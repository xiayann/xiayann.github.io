{"version":3,"file":"static/chunks/pages/scrcpy-f6f4e0c4c9d9f8a9.js","mappings":"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","sources":["webpack://_N_E/?3538","webpack://_N_E/../../common/temp/node_modules/.pnpm/@fluentui+react@8.101.1_2zx2umvpluuhvlq44va5bta2da/node_modules/@fluentui/react/lib/components/src/components/Layer/LayerHost.tsx","webpack://_N_E/../../libraries/scrcpy/src/adb/connection.ts","webpack://_N_E/../../libraries/scrcpy/src/adb/options/types.ts","webpack://_N_E/../../libraries/scrcpy/src/adb/options/1_16.ts","webpack://_N_E/../../libraries/scrcpy/src/adb/options/1_22.ts","webpack://_N_E/../../libraries/scrcpy/src/adb/options/index.ts","webpack://_N_E/../../libraries/scrcpy/src/control/type.ts","webpack://_N_E/../../libraries/scrcpy/src/control/inject-keycode.ts","webpack://_N_E/../../libraries/scrcpy/src/control/inject-text.ts","webpack://_N_E/../../libraries/scrcpy/src/control/inject-touch.ts","webpack://_N_E/../../libraries/scrcpy/src/control/rotate-device.ts","webpack://_N_E/../../libraries/scrcpy/src/control/set-screen-power-mode.ts","webpack://_N_E/../../libraries/scrcpy/src/control/serializer.ts","webpack://_N_E/../../libraries/scrcpy/src/control/index.ts","webpack://_N_E/../../libraries/scrcpy/src/device-message/type.ts","webpack://_N_E/../../libraries/scrcpy/src/device-message/clipboard.ts","webpack://_N_E/../../libraries/scrcpy/src/device-message/stream.ts","webpack://_N_E/../../libraries/scrcpy/src/device-message/index.ts","webpack://_N_E/../../libraries/scrcpy/src/options/1_16/codec-options.ts","webpack://_N_E/../../libraries/scrcpy/src/options/types.ts","webpack://_N_E/../../libraries/scrcpy/src/options/1_16/sps.ts","webpack://_N_E/../../libraries/scrcpy/src/options/1_16/options.ts","webpack://_N_E/../../libraries/scrcpy/src/options/1_16/index.ts","webpack://_N_E/../../libraries/scrcpy/src/options/1_18.ts","webpack://_N_E/../../libraries/scrcpy/src/options/1_21.ts","webpack://_N_E/../../libraries/scrcpy/src/options/1_22.ts","webpack://_N_E/../../libraries/scrcpy/src/options/1_23.ts","webpack://_N_E/../../libraries/scrcpy/src/options/1_24.ts","webpack://_N_E/../../libraries/scrcpy/src/options/index.ts","webpack://_N_E/../../libraries/scrcpy/src/adb/client.ts","webpack://_N_E/../../libraries/scrcpy/src/adb/index.ts","webpack://_N_E/../../libraries/scrcpy/src/codec.ts","webpack://_N_E/../../libraries/scrcpy/src/index.ts","webpack://_N_E/../../libraries/scrcpy-decoder-tinyh264/src/wrapper.ts","webpack://_N_E/../../libraries/scrcpy-decoder-tinyh264/src/index.ts","webpack://_N_E/../../libraries/scrcpy-decoder-webcodecs/src/index.ts","webpack://_N_E/../../libraries/scrcpy/bin/version.js","webpack://_N_E/./src/pages/scrcpy.tsx","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/scrcpy\",\n      function () {\n        return require(\"private-next-pages/scrcpy.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/scrcpy\"])\n      });\n    }\n  ","import * as React from 'react';\nimport { useUnmount } from '@fluentui/react-hooks';\nimport { css, getId } from '../../Utilities';\nimport { notifyHostChanged, registerLayerHost, unregisterLayerHost } from './Layer.notification';\nimport type { ILayerHost, ILayerHostProps } from './LayerHost.types';\n\nexport const LayerHost: React.FunctionComponent<ILayerHostProps> = props => {\n  const { className } = props;\n\n  const [layerHostId] = React.useState(() => getId());\n\n  const { id: hostId = layerHostId } = props;\n\n  const layerHostRef = React.useRef<ILayerHost>({\n    hostId,\n    rootRef: React.useRef<HTMLDivElement | null>(null),\n    notifyLayersChanged: () => {\n      // Nothing, since the default implementation of Layer Host does not need to react to layer changes.\n    },\n  });\n\n  React.useImperativeHandle(props.componentRef, () => layerHostRef.current);\n\n  React.useEffect(() => {\n    registerLayerHost(hostId, layerHostRef.current);\n    notifyHostChanged(hostId);\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- should only run on first render\n  }, []);\n\n  useUnmount(() => {\n    unregisterLayerHost(hostId, layerHostRef.current);\n    notifyHostChanged(hostId);\n  });\n\n  return <div {...props} className={css('ms-LayerHost', className)} ref={layerHostRef.current.rootRef} />;\n};\n","import type { Adb } from '@yume-chan/adb';\nimport { delay } from '@yume-chan/async';\nimport type { Disposable } from '@yume-chan/event';\nimport { TransformStream, type ReadableStream, type ReadableStreamDefaultReader, type ReadableWritablePair } from '@yume-chan/stream-extra';\nimport type { ValueOrPromise } from '@yume-chan/struct';\n\nexport interface AdbScrcpyConnectionOptions {\n    control: boolean;\n\n    /**\n     * Write a byte on start to detect connection issues\n     */\n    sendDummyByte: boolean;\n\n    /**\n     * Send device name and size\n     */\n    sendDeviceMeta: boolean;\n}\n\nexport abstract class AdbScrcpyConnection implements Disposable {\n    protected adb: Adb;\n\n    protected options: AdbScrcpyConnectionOptions;\n\n    public constructor(adb: Adb, options: AdbScrcpyConnectionOptions) {\n        this.adb = adb;\n        this.options = options;\n    }\n\n    public initialize(): ValueOrPromise<void> { }\n\n    public abstract getStreams(): ValueOrPromise<[videoSteam: ReadableStream<Uint8Array>, controlStream: ReadableWritablePair<Uint8Array, Uint8Array> | undefined]>;\n\n    public dispose(): void { }\n}\n\nexport class AdbScrcpyForwardConnection extends AdbScrcpyConnection {\n    private connect(): Promise<ReadableWritablePair<Uint8Array, Uint8Array>> {\n        return this.adb.createSocket('localabstract:scrcpy');\n    }\n\n    private async connectAndRetry(): Promise<ReadableWritablePair<Uint8Array, Uint8Array>> {\n        for (let i = 0; i < 100; i++) {\n            try {\n                return await this.connect();\n            } catch (e) {\n                await delay(100);\n            }\n        }\n        throw new Error(`Can't connect to server after 100 retries`);\n    }\n\n    private async connectVideoStream(): Promise<ReadableStream<Uint8Array>> {\n        const { readable: videoStream } = await this.connectAndRetry();\n        if (this.options.sendDummyByte) {\n            const reader = videoStream.getReader();\n            const { done, value } = await reader.read();\n            // server will write a `0` to signal connection success\n            if (done || value.byteLength !== 1 || value[0] !== 0) {\n                throw new Error('Unexpected response from server');\n            }\n            reader.releaseLock();\n        }\n        return videoStream;\n    }\n\n    public async getStreams(): Promise<[videoSteam: ReadableStream<Uint8Array>, controlStream: ReadableWritablePair<Uint8Array, Uint8Array> | undefined]> {\n        const videoStream = await this.connectVideoStream();\n\n        let controlStream: ReadableWritablePair<Uint8Array, Uint8Array> | undefined;\n        if (this.options.control) {\n            controlStream = await this.connectAndRetry();\n        }\n\n        // Server only writes device meta after control socket is connected (if enabled)\n        if (this.options.sendDeviceMeta) {\n            const reader = videoStream.getReader();\n            const { done, value } = await reader.read();\n            // 64 bytes device name + 2 bytes video width + 2 bytes video height\n            if (done || value.byteLength !== 64 + 2 + 2) {\n                throw new Error('Unexpected response from server');\n            }\n            reader.releaseLock();\n        }\n\n        return [videoStream, controlStream];\n    }\n}\n\nexport class AdbScrcpyReverseConnection extends AdbScrcpyConnection {\n    private streams!: ReadableStreamDefaultReader<ReadableWritablePair<Uint8Array, Uint8Array>>;\n\n    private address!: string;\n\n    public override async initialize(): Promise<void> {\n        // try to unbind first, ignore errors\n        await this.adb.reverse.remove('localabstract:scrcpy').catch(() => { });\n\n        const queue = new TransformStream<ReadableWritablePair<Uint8Array, Uint8Array>>();\n        this.streams = queue.readable.getReader();\n        const writer = queue.writable.getWriter();\n        this.address = await this.adb.reverse.add(\n            'localabstract:scrcpy',\n            'tcp:27183',\n            socket => {\n                writer.write(socket);\n                return true;\n            },\n        );\n    }\n\n    private async accept(): Promise<ReadableWritablePair<Uint8Array, Uint8Array>> {\n        return (await this.streams.read()).value!;\n    }\n\n    public async getStreams(): Promise<[videoSteam: ReadableStream<Uint8Array>, controlStream: ReadableWritablePair<Uint8Array, Uint8Array> | undefined]> {\n        const { readable: videoStream } = await this.accept();\n\n        let controlStream: ReadableWritablePair<Uint8Array, Uint8Array> | undefined;\n        if (this.options.control) {\n            controlStream = await this.accept();\n        }\n\n        // Server only writes device meta after control socket is connected (if enabled)\n        if (this.options.sendDeviceMeta) {\n            const reader = videoStream.getReader();\n            const { done, value } = await reader.read();\n            // 64 bytes device name + 2 bytes video width + 2 bytes video height\n            if (done || value.byteLength !== 64 + 2 + 2) {\n                throw new Error('Unexpected response from server');\n            }\n            reader.releaseLock();\n        }\n\n        return [videoStream, controlStream];\n    }\n\n    public override dispose() {\n        // Don't await this!\n        // `reverse.remove`'s response will never arrive\n        // before we read all pending data from `videoStream`\n        this.adb.reverse.remove(this.address);\n    }\n}\n","import type { Adb } from '@yume-chan/adb';\nimport type { TransformStream } from '@yume-chan/stream-extra';\n\nimport type { ScrcpyControlMessageType } from '../../control/index.js';\nimport type { ScrcpyBackOrScreenOnControlMessage1_18, ScrcpyInjectScrollControlMessage1_22, ScrcpyOptions, ScrcpyVideoStreamPacket } from '../../options/index.js';\nimport type { AdbScrcpyConnection } from '../connection.js';\n\nexport interface AdbScrcpyOptions<T> extends ScrcpyOptions<T> {\n    createConnection(adb: Adb): AdbScrcpyConnection;\n}\n\nexport abstract class AdbScrcpyOptionsBase<T> implements ScrcpyOptions<T> {\n    private raw: ScrcpyOptions<T>;\n\n    public get value(): Partial<T> { return this.raw.value; }\n    public set value(value: Partial<T>) { this.raw.value = value; }\n\n    public constructor(raw: ScrcpyOptions<T>) {\n        this.raw = raw;\n    }\n\n    public getDefaultValue(): T {\n        return this.raw.getDefaultValue();\n    }\n\n    public formatServerArguments(): string[] {\n        return this.raw.formatServerArguments();\n    }\n\n    public getOutputEncoderNameRegex(): RegExp {\n        return this.raw.getOutputEncoderNameRegex();\n    }\n\n    public createVideoStreamTransformer(): TransformStream<Uint8Array, ScrcpyVideoStreamPacket> {\n        return this.raw.createVideoStreamTransformer();\n    }\n\n    public getControlMessageTypes(): ScrcpyControlMessageType[] {\n        return this.raw.getControlMessageTypes();\n    }\n\n    public serializeBackOrScreenOnControlMessage(\n        message: ScrcpyBackOrScreenOnControlMessage1_18,\n    ): Uint8Array | undefined {\n        return this.raw.serializeBackOrScreenOnControlMessage(message);\n    }\n\n    public serializeInjectScrollControlMessage(\n        message: ScrcpyInjectScrollControlMessage1_22,\n    ): Uint8Array {\n        return this.raw.serializeInjectScrollControlMessage(message);\n    }\n\n    public abstract createConnection(adb: Adb): AdbScrcpyConnection;\n}\n","import type { Adb } from '@yume-chan/adb';\n\nimport type { ScrcpyOptionsInit1_16 } from '../../options/index.js';\nimport { AdbScrcpyConnection, AdbScrcpyConnectionOptions, AdbScrcpyForwardConnection, AdbScrcpyReverseConnection } from '../connection.js';\nimport { AdbScrcpyOptionsBase } from './types.js';\n\nexport class AdbScrcpyOptions1_16<T extends ScrcpyOptionsInit1_16 = ScrcpyOptionsInit1_16>\n    extends AdbScrcpyOptionsBase<T> {\n    public override createConnection(adb: Adb): AdbScrcpyConnection {\n        const options: AdbScrcpyConnectionOptions = {\n            // Old versions always have control stream no matter what the option is\n            // Pass `control: false` to `Connection` will disable the control stream\n            control: true,\n            sendDummyByte: true,\n            sendDeviceMeta: true,\n        };\n        if (this.value.tunnelForward) {\n            return new AdbScrcpyForwardConnection(adb, options);\n        } else {\n            return new AdbScrcpyReverseConnection(adb, options);\n        }\n    }\n}\n","import type { Adb } from '@yume-chan/adb';\n\nimport type { ScrcpyOptionsInit1_22 } from '../../options/index.js';\nimport { AdbScrcpyConnection, AdbScrcpyForwardConnection, AdbScrcpyReverseConnection } from '../connection.js';\nimport { AdbScrcpyOptions1_16 } from './1_16.js';\n\nexport class AdbScrcpyOptions1_22<T extends ScrcpyOptionsInit1_22 = ScrcpyOptionsInit1_22>\n    extends AdbScrcpyOptions1_16<T> {\n    public override createConnection(adb: Adb): AdbScrcpyConnection {\n        const options = {\n            ...this.getDefaultValue(),\n            ...this.value,\n        };\n        if (this.value.tunnelForward) {\n            return new AdbScrcpyForwardConnection(adb, options);\n        } else {\n            return new AdbScrcpyReverseConnection(adb, options);\n        }\n    }\n}\n","export * from './1_16.js';\nexport * from './1_22.js';\nexport * from './types.js';\n","// https://github.com/Genymobile/scrcpy/blob/fa5b2a29e983a46b49531def9cf3d80c40c3de37/app/src/control_msg.h#L23\n// For their message bodies, see https://github.com/Genymobile/scrcpy/blob/5c62f3419d252d10cd8c9cbb7c918b358b81f2d0/app/src/control_msg.c#L92\n// Their IDs change between versions, so always use `options.getControlMessageTypes()`\nexport enum ScrcpyControlMessageType {\n    InjectKeyCode,\n    InjectText,\n    InjectTouch,\n    InjectScroll,\n    BackOrScreenOn,\n    ExpandNotificationPanel,\n    ExpandSettingPanel,\n    CollapseNotificationPanel,\n    GetClipboard,\n    SetClipboard,\n    SetScreenPowerMode,\n    RotateDevice,\n}\n","import Struct, { placeholder } from '@yume-chan/struct';\n\nimport { ScrcpyControlMessageType } from './type.js';\n\nexport enum AndroidKeyEventAction {\n    Down = 0,\n    Up = 1,\n}\n\n// https://github.com/Genymobile/scrcpy/blob/cabb102a04153f9c237b18257d3269a058558c63/app/src/android/keycodes.h#L26\nexport enum AndroidKeyCode {\n    Home = 3,\n    Back = 4,\n    VolumeUp = 24,\n    VolumeDown,\n    A = 29,\n    B,\n    C,\n    D,\n    E,\n    F,\n    G,\n    H,\n    I,\n    J,\n    K,\n    L,\n    M,\n    N,\n    O,\n    P,\n    Q,\n    R,\n    S,\n    T,\n    U,\n    V,\n    W,\n    X,\n    Y,\n    Z,\n    Tab = 61,\n    Space,\n    Enter = 66,\n    Delete,\n    VolumeMute = 164,\n    AppSwitch = 187,\n}\n\nexport const ScrcpyInjectKeyCodeControlMessage =\n    new Struct()\n        .uint8('type', ScrcpyControlMessageType.InjectKeyCode as const)\n        .uint8('action', placeholder<AndroidKeyEventAction>())\n        .uint32('keyCode')\n        .uint32('repeat')\n        .uint32('metaState');\n\nexport type ScrcpyInjectKeyCodeControlMessage =\n    typeof ScrcpyInjectKeyCodeControlMessage['TInit'];\n","import Struct from '@yume-chan/struct';\n\nimport { ScrcpyControlMessageType } from './type.js';\n\nexport const ScrcpyInjectTextControlMessage =\n    new Struct()\n        .uint8('type', ScrcpyControlMessageType.InjectText as const)\n        .uint32('length')\n        .string('text', { lengthField: 'length' });\n\nexport type ScrcpyInjectTextControlMessage =\n    typeof ScrcpyInjectTextControlMessage['TInit'];\n","import Struct, { placeholder } from '@yume-chan/struct';\nimport { ScrcpyControlMessageType } from './type.js';\n\n// https://developer.android.com/reference/android/view/MotionEvent#constants_1\nexport enum AndroidMotionEventAction {\n    Down,\n    Up,\n    Move,\n    Cancel,\n    Outside,\n    PointerDown,\n    PointerUp,\n    HoverMove,\n    Scroll,\n    HoverEnter,\n    HoverExit,\n    ButtonPress,\n    ButtonRelease,\n}\n\nexport const ScrcpyInjectTouchControlMessage =\n    new Struct()\n        .uint8('type', ScrcpyControlMessageType.InjectTouch as const)\n        .uint8('action', placeholder<AndroidMotionEventAction>())\n        .uint64('pointerId')\n        .uint32('pointerX')\n        .uint32('pointerY')\n        .uint16('screenWidth')\n        .uint16('screenHeight')\n        .uint16('pressure')\n        .uint32('buttons');\n\nexport type ScrcpyInjectTouchControlMessage =\n    typeof ScrcpyInjectTouchControlMessage['TInit'];\n","import Struct from '@yume-chan/struct';\n\nimport { ScrcpyControlMessageType } from './type.js';\n\nexport const ScrcpyRotateDeviceControlMessage =\n    new Struct()\n        .uint8('type', ScrcpyControlMessageType.RotateDevice as const)\n\nexport type ScrcpyRotateDeviceControlMessage =\n    typeof ScrcpyRotateDeviceControlMessage['TInit'];\n","import Struct, { placeholder } from '@yume-chan/struct';\n\nimport { ScrcpyControlMessageType } from './type.js';\n\n// https://cs.android.com/android/platform/superproject/+/master:frameworks/base/core/java/android/view/SurfaceControl.java;l=659;drc=20303e05bf73796124ab70a279cf849b61b97905\nexport enum AndroidScreenPowerMode {\n    Off = 0,\n    Normal = 2\n}\n\nexport const ScrcpySetScreenPowerModeControlMessage =\n    new Struct()\n        .uint8('type', ScrcpyControlMessageType.SetScreenPowerMode as const)\n        .uint8('mode', placeholder<AndroidScreenPowerMode>());\n\nexport type ScrcpySetScreenPowerModeControlMessage =\n    typeof ScrcpySetScreenPowerModeControlMessage['TInit'];\n","import type { WritableStream, WritableStreamDefaultWriter } from '@yume-chan/stream-extra';\n\nimport type { ScrcpyInjectScrollControlMessage1_22, ScrcpyOptions } from '../options/index.js';\nimport { AndroidKeyEventAction, ScrcpyInjectKeyCodeControlMessage } from './inject-keycode.js';\nimport { ScrcpyInjectTextControlMessage } from './inject-text.js';\nimport { ScrcpyInjectTouchControlMessage } from './inject-touch.js';\nimport { ScrcpyRotateDeviceControlMessage } from './rotate-device.js';\nimport { AndroidScreenPowerMode, ScrcpySetScreenPowerModeControlMessage } from './set-screen-power-mode.js';\nimport { ScrcpyControlMessageType } from './type.js';\n\nexport class ScrcpyControlMessageSerializer {\n    private options: ScrcpyOptions<any>;\n    /** Control message type values for current version of server */\n    private types: ScrcpyControlMessageType[];\n    private writer: WritableStreamDefaultWriter<Uint8Array>;\n\n    public constructor(stream: WritableStream<Uint8Array>, options: ScrcpyOptions<any>) {\n        this.options = options;\n        this.types = options.getControlMessageTypes();\n        this.writer = stream.getWriter();\n    }\n\n    public getTypeValue(type: ScrcpyControlMessageType): number {\n        const value = this.types.indexOf(type);\n        if (value === -1) {\n            throw new Error('Not supported');\n        }\n        return value;\n    }\n\n    public injectKeyCode(message: Omit<ScrcpyInjectKeyCodeControlMessage, 'type'>) {\n        return this.writer.write(ScrcpyInjectKeyCodeControlMessage.serialize({\n            ...message,\n            type: this.getTypeValue(ScrcpyControlMessageType.InjectKeyCode),\n        }));\n    }\n\n    public injectText(text: string) {\n        return this.writer.write(ScrcpyInjectTextControlMessage.serialize({\n            text,\n            type: this.getTypeValue(ScrcpyControlMessageType.InjectText),\n        }));\n    }\n\n    public injectTouch(message: Omit<ScrcpyInjectTouchControlMessage, 'type'>) {\n        return this.writer.write(ScrcpyInjectTouchControlMessage.serialize({\n            ...message,\n            type: this.getTypeValue(ScrcpyControlMessageType.InjectTouch),\n        }));\n    }\n\n    public injectScroll(message: Omit<ScrcpyInjectScrollControlMessage1_22, 'type'>) {\n        return this.writer.write(this.options.serializeInjectScrollControlMessage({\n            ...message,\n            type: this.getTypeValue(ScrcpyControlMessageType.InjectScroll),\n        }));\n    }\n\n    public async backOrScreenOn(action: AndroidKeyEventAction) {\n        const buffer = this.options.serializeBackOrScreenOnControlMessage({\n            action,\n            type: this.getTypeValue(ScrcpyControlMessageType.BackOrScreenOn),\n        });\n\n        if (buffer) {\n            return await this.writer.write(buffer);\n        }\n    }\n\n    public setScreenPowerMode(mode: AndroidScreenPowerMode) {\n        return this.writer.write(ScrcpySetScreenPowerModeControlMessage.serialize({\n            mode,\n            type: this.getTypeValue(ScrcpyControlMessageType.SetScreenPowerMode),\n        }));\n    }\n\n    public rotateDevice() {\n        return this.writer.write(ScrcpyRotateDeviceControlMessage.serialize({\n            type: this.getTypeValue(ScrcpyControlMessageType.RotateDevice),\n        }));\n    }\n\n    public close() {\n        return this.writer.close();\n    }\n};\n","export * from './inject-keycode.js';\nexport * from './inject-text.js';\nexport * from './inject-touch.js';\nexport * from './rotate-device.js';\nexport * from './serializer.js';\nexport * from './set-screen-power-mode.js';\nexport * from './type.js';\n","// https://github.com/Genymobile/scrcpy/blob/41abe021e2a73efd4899b0efcd0b9eef9ec68c9b/server/src/main/java/com/genymobile/scrcpy/DeviceMessage.java#L5\nexport enum ScrcpyDeviceMessageType {\n    Clipboard,\n    AckClipboard,\n}\n","import Struct from '@yume-chan/struct';\nimport { ScrcpyDeviceMessageType } from './type.js';\n\nexport const ScrcpyClipboardDeviceMessage =\n    new Struct()\n        .uint32('length')\n        .string('content', { lengthField: 'length' })\n        .extra({ type: ScrcpyDeviceMessageType.Clipboard as const });\n\nexport type ScrcpyClipboardDeviceMessage =\n    typeof ScrcpyClipboardDeviceMessage['TDeserializeResult'];\n","import { BufferedTransformStream } from '@yume-chan/stream-extra';\nimport { ScrcpyClipboardDeviceMessage } from './clipboard.js';\n\nexport type ScrcpyDeviceMessage =\n    | ScrcpyClipboardDeviceMessage;\n\nexport class ScrcpyDeviceMessageDeserializeStream extends BufferedTransformStream<ScrcpyDeviceMessage> {\n    constructor() {\n        super(async (stream) => {\n            const type = await stream.read(1);\n            switch (type[0]) {\n                case 0:\n                    return await ScrcpyClipboardDeviceMessage.deserialize(stream);\n                default:\n                    throw new Error('unknown control message type');\n            }\n        })\n    }\n}\n","export * from './clipboard.js';\nexport * from './stream.js';\nexport * from './type.js';\n","import type { AndroidCodecLevel, AndroidCodecProfile } from '../../codec.js';\nimport type { ScrcpyOptionValue } from '../types.js';\n\n/**\n * If the option you need is not in this type,\n * please file an issue on GitHub.\n */\nexport interface CodecOptionsInit {\n    profile: AndroidCodecProfile;\n    level: AndroidCodecLevel;\n\n    iFrameInterval: number;\n    repeatPreviousFrameAfter: number;\n    maxPtsGapToEncoder: number;\n}\n\nfunction toDashCase(input: string) {\n    return input.replace(/([A-Z])/g, '-$1').toLowerCase();\n}\n\nconst CODEC_OPTION_TYPES: Partial<Record<keyof CodecOptionsInit, 'long' | 'float' | 'string'>> = {\n    repeatPreviousFrameAfter: 'long',\n    maxPtsGapToEncoder: 'long',\n};\n\nexport class CodecOptions implements ScrcpyOptionValue {\n    public value: Partial<CodecOptionsInit>;\n\n    public constructor(value: Partial<CodecOptionsInit>) {\n        this.value = value;\n    }\n\n    public toOptionValue(): string | undefined {\n        const entries = Object.entries(this.value)\n            .filter(([key, value]) => value !== undefined);\n\n        if (entries.length === 0) {\n            return undefined;\n        }\n\n        return entries\n            .map(([key, value]) => {\n                const type = CODEC_OPTION_TYPES[key as keyof CodecOptionsInit];\n                return `${toDashCase(key)}${type ? `:${type}` : ''}=${value}`;\n            })\n            .join(',');\n    }\n}\n","import type { TransformStream } from '@yume-chan/stream-extra';\n\nimport type { ScrcpyControlMessageType } from '../control/index.js';\nimport type { ScrcpyBackOrScreenOnControlMessage1_18 } from './1_18.js';\nimport type { ScrcpyInjectScrollControlMessage1_22 } from './1_22.js';\n\nexport const DEFAULT_SERVER_PATH = '/data/local/tmp/scrcpy-server.jar';\n\nexport interface ScrcpyOptionValue {\n    toOptionValue(): string | undefined;\n}\n\nexport function isScrcpyOptionValue(value: any): value is ScrcpyOptionValue {\n    return typeof value === 'object' &&\n        value !== null &&\n        typeof value.toOptionValue === 'function';\n}\n\nexport function toScrcpyOptionValue<T>(value: any, empty: T): string | T {\n    if (isScrcpyOptionValue(value)) {\n        value = value.toOptionValue();\n    }\n\n    if (value === undefined) {\n        return empty;\n    }\n\n    return `${value}`;\n}\n\nexport interface H264Configuration {\n    profileIndex: number;\n    constraintSet: number;\n    levelIndex: number;\n\n    encodedWidth: number;\n    encodedHeight: number;\n\n    cropLeft: number;\n    cropRight: number;\n\n    cropTop: number;\n    cropBottom: number;\n\n    croppedWidth: number;\n    croppedHeight: number;\n}\n\nexport interface ScrcpyVideoStreamConfigurationPacket {\n    type: 'configuration';\n    data: H264Configuration;\n}\n\nexport interface ScrcpyVideoStreamFramePacket {\n    type: 'frame';\n    keyframe?: boolean | undefined;\n    pts?: bigint | undefined;\n    data: Uint8Array;\n}\n\nexport type ScrcpyVideoStreamPacket =\n    | ScrcpyVideoStreamConfigurationPacket\n    | ScrcpyVideoStreamFramePacket;\n\nexport interface ScrcpyOptions<T> {\n    value: Partial<T>;\n\n    getDefaultValue(): T;\n\n    formatServerArguments(): string[];\n\n    getOutputEncoderNameRegex(): RegExp;\n\n    createVideoStreamTransformer(): TransformStream<Uint8Array, ScrcpyVideoStreamPacket>;\n\n    getControlMessageTypes(): ScrcpyControlMessageType[];\n\n    serializeBackOrScreenOnControlMessage(\n        message: ScrcpyBackOrScreenOnControlMessage1_18,\n    ): Uint8Array | undefined;\n\n    serializeInjectScrollControlMessage(\n        message: ScrcpyInjectScrollControlMessage1_22,\n    ): Uint8Array;\n}\n","// cspell: ignore golomb\n// cspell: ignore qpprime\n\nclass BitReader {\n    private buffer: Uint8Array;\n\n    private bytePosition = 0;\n\n    private bitPosition = 0;\n\n    public constructor(buffer: Uint8Array) {\n        this.buffer = buffer;\n    }\n\n    public read(length: number): number {\n        let result = 0;\n        for (let i = 0; i < length; i += 1) {\n            result = (result << 1) | this.next();\n        }\n        return result;\n    }\n\n    public next(): number {\n        const value = (this.buffer[this.bytePosition]! >> (7 - this.bitPosition)) & 1;\n        this.bitPosition += 1;\n        if (this.bitPosition === 8) {\n            this.bytePosition += 1;\n            this.bitPosition = 0;\n        }\n        return value;\n    }\n\n    public decodeExponentialGolombNumber(): number {\n        let length = 0;\n        while (this.next() === 0) {\n            length += 1;\n        }\n        if (length === 0) {\n            return 0;\n        }\n        return (1 << length | this.read(length)) - 1;\n    }\n}\n\nfunction* iterateNalu(buffer: Uint8Array): Generator<Uint8Array> {\n    // -1 means we haven't found the first start code\n    let start = -1;\n    let writeIndex = 0;\n\n    // How many `0x00`s in a row we have counted\n    let zeroCount = 0;\n\n    let inEmulation = false;\n\n    for (const byte of buffer) {\n        buffer[writeIndex] = byte;\n        writeIndex += 1;\n\n        if (inEmulation) {\n            if (byte > 0x03) {\n                // `0x00000304` or larger are invalid\n                throw new Error('Invalid data');\n            }\n\n            inEmulation = false;\n            continue;\n        }\n\n        if (byte == 0x00) {\n            zeroCount += 1;\n            continue;\n        }\n\n        const lastZeroCount = zeroCount;\n        zeroCount = 0;\n\n        if (start === -1) {\n            // 0x000001 is the start code\n            // But it can be preceded by any number of zeros\n            // So 2 is the minimal\n            if (lastZeroCount >= 2 && byte === 0x01) {\n                // Found start of first NAL unit\n                writeIndex = 0;\n                start = 0;\n                continue;\n            }\n\n            // Not begin with start code\n            throw new Error('Invalid data');\n        }\n\n        if (lastZeroCount < 2) {\n            // zero or one `0x00`s are acceptable\n            continue;\n        }\n\n        if (byte === 0x01) {\n            // Remove all leading `0x00`s and this `0x01`\n            writeIndex -= lastZeroCount + 1;\n\n            // Found another NAL unit\n            yield buffer.subarray(start, writeIndex);\n\n            start = writeIndex;\n            continue;\n        }\n\n        if (lastZeroCount > 2) {\n            // Too much `0x00`s\n            throw new Error('Invalid data');\n        }\n\n        switch (byte) {\n            case 0x02:\n                // Didn't find why, but 7.4.1 NAL unit semantics forbids `0x000002` appearing in NAL units\n                throw new Error('Invalid data');\n            case 0x03:\n                // `0x000003` is the \"emulation_prevention_three_byte\"\n                // `0x00000300`, `0x00000301`, `0x00000302` and `0x00000303` represent\n                // `0x000000`, `0x000001`, `0x000002` and `0x000003` respectively\n\n                // Remove current byte\n                writeIndex -= 1;\n\n                inEmulation = true;\n                break;\n            default:\n                // `0x000004` or larger are ok\n                break;\n        }\n    }\n\n    if (inEmulation || zeroCount !== 0) {\n        throw new Error('Invalid data');\n    }\n\n    yield buffer.subarray(start, writeIndex);\n}\n\n// 7.3.2.1.1 Sequence parameter set data syntax\nexport function parse_sequence_parameter_set(buffer: ArrayBuffer) {\n    for (const nalu of iterateNalu(new Uint8Array(buffer))) {\n        const reader = new BitReader(nalu);\n        if (reader.next() !== 0) {\n            throw new Error('Invalid data');\n        }\n\n        const nal_ref_idc = reader.read(2);\n        const nal_unit_type = reader.read(5);\n\n        if (nal_unit_type !== 7) {\n            continue;\n        }\n\n        if (nal_ref_idc === 0) {\n            throw new Error('Invalid data');\n        }\n\n        const profile_idc = reader.read(8);\n        const constraint_set = reader.read(8);\n\n        const constraint_set_reader = new BitReader(new Uint8Array([constraint_set]));\n        const constraint_set0_flag = !!constraint_set_reader.next();\n        const constraint_set1_flag = !!constraint_set_reader.next();\n        const constraint_set2_flag = !!constraint_set_reader.next();\n        const constraint_set3_flag = !!constraint_set_reader.next();\n        const constraint_set4_flag = !!constraint_set_reader.next();\n        const constraint_set5_flag = !!constraint_set_reader.next();\n\n        // reserved_zero_2bits\n        if (constraint_set_reader.read(2) !== 0) {\n            throw new Error('Invalid data');\n        }\n\n        const level_idc = reader.read(8);\n        const seq_parameter_set_id = reader.decodeExponentialGolombNumber();\n\n        if (profile_idc === 100 || profile_idc === 110 ||\n            profile_idc === 122 || profile_idc === 244 || profile_idc === 44 ||\n            profile_idc === 83 || profile_idc === 86 || profile_idc === 118 ||\n            profile_idc === 128 || profile_idc === 138 || profile_idc === 139 ||\n            profile_idc === 134) {\n            const chroma_format_idc = reader.decodeExponentialGolombNumber();\n            if (chroma_format_idc === 3) {\n                // separate_colour_plane_flag\n                reader.next();\n            }\n\n            // bit_depth_luma_minus8\n            reader.decodeExponentialGolombNumber();\n            // bit_depth_chroma_minus8\n            reader.decodeExponentialGolombNumber();\n\n            // qpprime_y_zero_transform_bypass_flag\n            reader.next();\n\n            const seq_scaling_matrix_present_flag = !!reader.next();\n            if (seq_scaling_matrix_present_flag) {\n                const seq_scaling_list_present_flag: boolean[] = [];\n                for (let i = 0; i < ((chroma_format_idc !== 3) ? 8 : 12); i++) {\n                    seq_scaling_list_present_flag[i] = !!reader.next();\n                    if (seq_scaling_list_present_flag[i])\n                        if (i < 6) {\n                            // TODO\n                            // scaling_list( ScalingList4x4[ i ], 16,\n                            //               UseDefaultScalingMatrix4x4Flag[ i ])\n                        } else {\n                            // TODO\n                            // scaling_list( ScalingList8x8[ i − 6 ], 64,\n                            //               UseDefaultScalingMatrix8x8Flag[ i − 6 ] )\n                        }\n                }\n            }\n        }\n\n        // log2_max_frame_num_minus4\n        reader.decodeExponentialGolombNumber();\n        const pic_order_cnt_type = reader.decodeExponentialGolombNumber();\n        if (pic_order_cnt_type === 0) {\n            // log2_max_pic_order_cnt_lsb_minus4\n            reader.decodeExponentialGolombNumber();\n        } else if (pic_order_cnt_type === 1) {\n            // delta_pic_order_always_zero_flag\n            reader.next();\n            // offset_for_non_ref_pic\n            reader.decodeExponentialGolombNumber();\n            // offset_for_top_to_bottom_field\n            reader.decodeExponentialGolombNumber();\n            const num_ref_frames_in_pic_order_cnt_cycle = reader.decodeExponentialGolombNumber();\n            const offset_for_ref_frame: number[] = [];\n            for (let i = 0; i < num_ref_frames_in_pic_order_cnt_cycle; i++) {\n                offset_for_ref_frame[i] = reader.decodeExponentialGolombNumber();\n            }\n        }\n\n        // max_num_ref_frames\n        reader.decodeExponentialGolombNumber();\n        // gaps_in_frame_num_value_allowed_flag\n        reader.next();\n        const pic_width_in_mbs_minus1 = reader.decodeExponentialGolombNumber();\n        const pic_height_in_map_units_minus1 = reader.decodeExponentialGolombNumber();\n\n        const frame_mbs_only_flag = reader.next();\n        if (!frame_mbs_only_flag) {\n            // mb_adaptive_frame_field_flag\n            reader.next();\n        }\n\n        // direct_8x8_inference_flag\n        reader.next();\n\n        const frame_cropping_flag = !!reader.next();\n        let frame_crop_left_offset: number;\n        let frame_crop_right_offset: number;\n        let frame_crop_top_offset: number;\n        let frame_crop_bottom_offset: number;\n        if (frame_cropping_flag) {\n            frame_crop_left_offset = reader.decodeExponentialGolombNumber();\n            frame_crop_right_offset = reader.decodeExponentialGolombNumber();\n            frame_crop_top_offset = reader.decodeExponentialGolombNumber();\n            frame_crop_bottom_offset = reader.decodeExponentialGolombNumber();\n        } else {\n            frame_crop_left_offset = 0;\n            frame_crop_right_offset = 0;\n            frame_crop_top_offset = 0;\n            frame_crop_bottom_offset = 0;\n        }\n\n        const vui_parameters_present_flag = !!reader.next();\n        if (vui_parameters_present_flag) {\n            // TODO\n            // vui_parameters( )\n        }\n\n        return {\n            profile_idc,\n            constraint_set,\n            constraint_set0_flag,\n            constraint_set1_flag,\n            constraint_set2_flag,\n            constraint_set3_flag,\n            constraint_set4_flag,\n            constraint_set5_flag,\n            level_idc,\n            seq_parameter_set_id,\n            pic_width_in_mbs_minus1,\n            pic_height_in_map_units_minus1,\n            frame_mbs_only_flag,\n            frame_cropping_flag,\n            frame_crop_left_offset,\n            frame_crop_right_offset,\n            frame_crop_top_offset,\n            frame_crop_bottom_offset,\n        };\n    }\n\n    throw new Error('Invalid data');\n}\n\nexport type SequenceParameterSet = ReturnType<typeof parse_sequence_parameter_set>;\n","import { StructDeserializeStream, TransformStream } from '@yume-chan/stream-extra';\nimport Struct from '@yume-chan/struct';\n\nimport { AndroidKeyEventAction, ScrcpyControlMessageType } from '../../control/index.js';\nimport type { ScrcpyBackOrScreenOnControlMessage1_18 } from '../1_18.js';\nimport type { ScrcpyInjectScrollControlMessage1_22 } from '../1_22.js';\nimport { toScrcpyOptionValue, type ScrcpyOptions, type ScrcpyVideoStreamPacket } from '../types.js';\nimport { CodecOptions } from './codec-options.js';\nimport { parse_sequence_parameter_set } from './sps.js';\n\nexport enum ScrcpyLogLevel {\n    Verbose = 'verbose',\n    Debug = 'debug',\n    Info = 'info',\n    Warn = 'warn',\n    Error = 'error',\n}\n\nexport enum ScrcpyVideoOrientation {\n    Initial = -2,\n    Unlocked = -1,\n    Portrait = 0,\n    Landscape = 1,\n    PortraitFlipped = 2,\n    LandscapeFlipped = 3,\n}\n\nexport interface ScrcpyOptionsInit1_16 {\n    logLevel: ScrcpyLogLevel;\n\n    /**\n     * The maximum value of both width and height.\n     */\n    maxSize: number;\n\n    bitRate: number;\n\n    /**\n     * 0 for unlimited.\n     *\n     * @default 0\n     */\n    maxFps: number;\n\n    /**\n     * The orientation of the video stream.\n     *\n     * It will not keep the device screen in specific orientation,\n     * only the captured video will in this orientation.\n     */\n    lockVideoOrientation: ScrcpyVideoOrientation;\n\n    tunnelForward: boolean;\n\n    crop: string;\n\n    /**\n     * Send PTS so that the client may record properly\n     *\n     * Note: When `sendFrameMeta: false` is specified,\n     * `onChangeEncoding` event won't fire and `onVideoData` event doesn't\n     * merge sps/pps frame and first video frame. Which means you can't use\n     * the shipped decoders to render the video\n     * (You can still record the stream into a file).\n     *\n     * @default true\n     */\n    sendFrameMeta: boolean;\n\n    /**\n     * @default true\n     */\n    control: boolean;\n\n    displayId: number;\n\n    showTouches: boolean;\n\n    stayAwake: boolean;\n\n    codecOptions: CodecOptions;\n\n    encoderName: string;\n}\n\nexport const VideoPacket =\n    new Struct()\n        .uint64('pts')\n        .uint32('size')\n        .uint8Array('data', { lengthField: 'size' });\n\nexport const NO_PTS = BigInt(1) << BigInt(63);\n\nexport const ScrcpyBackOrScreenOnControlMessage1_16 =\n    new Struct()\n        .uint8('type', ScrcpyControlMessageType.BackOrScreenOn as const);\n\nexport const ScrcpyInjectScrollControlMessage1_16 =\n    new Struct()\n        .uint8('type', ScrcpyControlMessageType.InjectScroll as const)\n        .uint32('pointerX')\n        .uint32('pointerY')\n        .uint16('screenWidth')\n        .uint16('screenHeight')\n        .int32('scrollX')\n        .int32('scrollY');\n\nexport class ScrcpyOptions1_16<T extends ScrcpyOptionsInit1_16 = ScrcpyOptionsInit1_16>\n    implements ScrcpyOptions<T> {\n    public value: Partial<T>;\n\n    public constructor(value: Partial<ScrcpyOptionsInit1_16>) {\n        if (new.target === ScrcpyOptions1_16 &&\n            value.logLevel === ScrcpyLogLevel.Verbose) {\n            value.logLevel = ScrcpyLogLevel.Debug;\n        }\n\n        if (new.target === ScrcpyOptions1_16 &&\n            value.lockVideoOrientation === ScrcpyVideoOrientation.Initial) {\n            value.lockVideoOrientation = ScrcpyVideoOrientation.Unlocked;\n        }\n\n        this.value = value as Partial<T>;\n    }\n\n    protected getArgumentOrder(): (keyof T)[] {\n        return [\n            'logLevel',\n            'maxSize',\n            'bitRate',\n            'maxFps',\n            'lockVideoOrientation',\n            'tunnelForward',\n            'crop',\n            'sendFrameMeta',\n            'control',\n            'displayId',\n            'showTouches',\n            'stayAwake',\n            'codecOptions',\n            'encoderName',\n        ];\n    }\n\n    public getDefaultValue(): T {\n        return {\n            logLevel: ScrcpyLogLevel.Debug,\n            maxSize: 0,\n            bitRate: 8_000_000,\n            maxFps: 0,\n            lockVideoOrientation: ScrcpyVideoOrientation.Unlocked,\n            tunnelForward: false,\n            crop: '-',\n            sendFrameMeta: true,\n            control: true,\n            displayId: 0,\n            showTouches: false,\n            stayAwake: false,\n            codecOptions: new CodecOptions({}),\n            encoderName: '-',\n        } as T;\n    }\n\n    public formatServerArguments(): string[] {\n        const defaults = this.getDefaultValue();\n        return this.getArgumentOrder()\n            .map(\n                key =>\n                    toScrcpyOptionValue(this.value[key] || defaults[key], '-')\n            );\n    }\n\n    public getOutputEncoderNameRegex(): RegExp {\n        return /\\s+scrcpy --encoder-name '(.*?)'/;\n    }\n\n    public createVideoStreamTransformer(): TransformStream<Uint8Array, ScrcpyVideoStreamPacket> {\n        // Optimized path for video frames only\n        if (this.value.sendFrameMeta === false) {\n            return new TransformStream({\n                transform(chunk, controller) {\n                    controller.enqueue({\n                        type: 'frame',\n                        data: chunk,\n                    });\n                },\n            });\n        }\n\n        let header: Uint8Array | undefined;\n\n        let deserializeStream = new StructDeserializeStream(VideoPacket);\n        return {\n            writable: deserializeStream.writable,\n            readable: deserializeStream.readable.pipeThrough(new TransformStream({\n                transform(packet, controller) {\n                    if (packet.pts === NO_PTS) {\n                        const sequenceParameterSet = parse_sequence_parameter_set(packet.data.slice().buffer);\n\n                        const {\n                            profile_idc: profileIndex,\n                            constraint_set: constraintSet,\n                            level_idc: levelIndex,\n                            pic_width_in_mbs_minus1,\n                            pic_height_in_map_units_minus1,\n                            frame_mbs_only_flag,\n                            frame_crop_left_offset,\n                            frame_crop_right_offset,\n                            frame_crop_top_offset,\n                            frame_crop_bottom_offset,\n                        } = sequenceParameterSet;\n\n                        const encodedWidth = (pic_width_in_mbs_minus1 + 1) * 16;\n                        const encodedHeight = (pic_height_in_map_units_minus1 + 1) * (2 - frame_mbs_only_flag) * 16;\n                        const cropLeft = frame_crop_left_offset * 2;\n                        const cropRight = frame_crop_right_offset * 2;\n                        const cropTop = frame_crop_top_offset * 2;\n                        const cropBottom = frame_crop_bottom_offset * 2;\n\n                        const croppedWidth = encodedWidth - cropLeft - cropRight;\n                        const croppedHeight = encodedHeight - cropTop - cropBottom;\n\n                        header = packet.data;\n                        controller.enqueue({\n                            type: 'configuration',\n                            data: {\n                                profileIndex,\n                                constraintSet,\n                                levelIndex,\n                                encodedWidth,\n                                encodedHeight,\n                                cropLeft,\n                                cropRight,\n                                cropTop,\n                                cropBottom,\n                                croppedWidth,\n                                croppedHeight,\n                            }\n                        });\n                        return;\n                    }\n\n                    let frameData: Uint8Array;\n                    if (header) {\n                        frameData = new Uint8Array(header.byteLength + packet.data.byteLength);\n                        frameData.set(header);\n                        frameData.set(packet.data, header.byteLength);\n                        header = undefined;\n                    } else {\n                        frameData = packet.data;\n                    }\n\n                    controller.enqueue({\n                        type: 'frame',\n                        pts: packet.pts,\n                        data: frameData,\n                    });\n                }\n            }))\n        };\n    }\n\n    public getControlMessageTypes(): ScrcpyControlMessageType[] {\n        return [\n            /*  0 */ ScrcpyControlMessageType.InjectKeyCode,\n            /*  1 */ ScrcpyControlMessageType.InjectText,\n            /*  2 */ ScrcpyControlMessageType.InjectTouch,\n            /*  3 */ ScrcpyControlMessageType.InjectScroll,\n            /*  4 */ ScrcpyControlMessageType.BackOrScreenOn,\n            /*  5 */ ScrcpyControlMessageType.ExpandNotificationPanel,\n            /*  6 */ ScrcpyControlMessageType.CollapseNotificationPanel,\n            /*  7 */ ScrcpyControlMessageType.GetClipboard,\n            /*  8 */ ScrcpyControlMessageType.SetClipboard,\n            /*  9 */ ScrcpyControlMessageType.SetScreenPowerMode,\n            /* 10 */ ScrcpyControlMessageType.RotateDevice,\n        ];\n    }\n\n    public serializeBackOrScreenOnControlMessage(\n        message: ScrcpyBackOrScreenOnControlMessage1_18,\n    ) {\n        if (message.action === AndroidKeyEventAction.Down) {\n            return ScrcpyBackOrScreenOnControlMessage1_16.serialize(message);\n        }\n\n        return undefined;\n    }\n\n    public serializeInjectScrollControlMessage(\n        message: ScrcpyInjectScrollControlMessage1_22,\n    ): Uint8Array {\n        return ScrcpyInjectScrollControlMessage1_16.serialize(message);\n    }\n}\n","export * from './codec-options.js';\nexport * from './options.js';\nexport * from './sps.js';\n","import Struct, { placeholder } from '@yume-chan/struct';\n\nimport { AndroidKeyEventAction, ScrcpyControlMessageType } from '../control/index.js';\nimport { ScrcpyBackOrScreenOnControlMessage1_16, ScrcpyOptions1_16, type ScrcpyOptionsInit1_16 } from './1_16/options.js';\n\nexport interface ScrcpyOptionsInit1_18 extends ScrcpyOptionsInit1_16 {\n    powerOffOnClose: boolean;\n}\n\nexport const ScrcpyBackOrScreenOnControlMessage1_18 =\n    new Struct()\n        .fields(ScrcpyBackOrScreenOnControlMessage1_16)\n        .uint8('action', placeholder<AndroidKeyEventAction>());\n\nexport type ScrcpyBackOrScreenOnControlMessage1_18 = typeof ScrcpyBackOrScreenOnControlMessage1_18['TInit'];\n\nexport class ScrcpyOptions1_18<T extends ScrcpyOptionsInit1_18 = ScrcpyOptionsInit1_18>\n    extends ScrcpyOptions1_16<T> {\n    constructor(value: Partial<ScrcpyOptionsInit1_18>) {\n        super(value);\n    }\n\n    protected override getArgumentOrder(): (keyof T)[] {\n        return super.getArgumentOrder().concat(['powerOffOnClose']);\n    }\n\n    public override getDefaultValue(): T {\n        return {\n            ...super.getDefaultValue(),\n            powerOffOnClose: false,\n        };\n    }\n\n    public override getOutputEncoderNameRegex(): RegExp {\n        return /\\s+scrcpy --encoder '(.*?)'/;\n    }\n\n    public override getControlMessageTypes(): ScrcpyControlMessageType[] {\n        /**\n         *  0 InjectKeycode\n         *  1 InjectText\n         *  2 InjectTouch\n         *  3 InjectScroll\n         *  4 BackOrScreenOn\n         *  5 ExpandNotificationPanel\n         *  6 ExpandSettingsPanel\n         *  7 CollapseNotificationPanel\n         *  8 GetClipboard\n         *  9 SetClipboard\n         * 10 SetScreenPowerMode\n         * 11 RotateDevice\n         */\n        const types = super.getControlMessageTypes();\n        types.splice(6, 0, ScrcpyControlMessageType.ExpandSettingPanel);\n        return types;\n    }\n\n    public override serializeBackOrScreenOnControlMessage(\n        message: ScrcpyBackOrScreenOnControlMessage1_18,\n    ) {\n        return ScrcpyBackOrScreenOnControlMessage1_18.serialize(message);\n    }\n}\n","// cspell: ignore autosync\n\nimport { ScrcpyOptions1_18, type ScrcpyOptionsInit1_18 } from './1_18.js';\nimport { toScrcpyOptionValue } from './types.js';\n\nexport interface ScrcpyOptionsInit1_21 extends ScrcpyOptionsInit1_18 {\n    clipboardAutosync?: boolean;\n}\n\nfunction toSnakeCase(input: string): string {\n    return input.replace(/([A-Z])/g, '_$1').toLowerCase();\n}\n\nexport class ScrcpyOptions1_21<T extends ScrcpyOptionsInit1_21 = ScrcpyOptionsInit1_21>\n    extends ScrcpyOptions1_18<T> {\n    public constructor(init: Partial<ScrcpyOptionsInit1_21>) {\n        super(init);\n    }\n\n    public override getDefaultValue(): T {\n        return {\n            ...super.getDefaultValue(),\n            clipboardAutosync: true,\n        };\n    }\n\n    public override formatServerArguments(): string[] {\n        // 1.21 changed the format of arguments\n        // So `getArgumentOrder()` is no longer needed\n        return Object.entries(this.value)\n            .map(\n                ([key, value]) =>\n                    [key, toScrcpyOptionValue(value, undefined)] as const\n            )\n            .filter(\n                (pair): pair is [string, string] =>\n                    pair[1] !== undefined\n            )\n            .map(\n                ([key, value]) =>\n                    `${toSnakeCase(key)}=${value}`\n            );\n    }\n}\n","import Struct from '@yume-chan/struct';\n\nimport { ScrcpyInjectScrollControlMessage1_16 } from './1_16/options.js';\nimport { ScrcpyOptions1_21, type ScrcpyOptionsInit1_21 } from './1_21.js';\n\nexport interface ScrcpyOptionsInit1_22 extends ScrcpyOptionsInit1_21 {\n    downsizeOnError: boolean;\n\n    /**\n     * Send device name and size at start of video stream.\n     *\n     * @default true\n     */\n    sendDeviceMeta: boolean;\n\n    /**\n     * Send a `0` byte on start of video stream to detect connection issues\n     *\n     * @default true\n     */\n    sendDummyByte: boolean;\n\n    /**\n     * Implies `sendDeviceMeta: false`, `sendFrameMeta: false` and `sendDummyByte: false`\n     *\n     * @default false\n     */\n    rawVideoStream: boolean;\n}\n\nexport const ScrcpyInjectScrollControlMessage1_22 =\n    new Struct()\n        .fields(ScrcpyInjectScrollControlMessage1_16)\n        .int32('buttons');\n\nexport type ScrcpyInjectScrollControlMessage1_22 =\n    typeof ScrcpyInjectScrollControlMessage1_22['TInit'];\n\nexport class ScrcpyOptions1_22<T extends ScrcpyOptionsInit1_22 = ScrcpyOptionsInit1_22>\n    extends ScrcpyOptions1_21<T> {\n    public constructor(init: Partial<ScrcpyOptionsInit1_22>) {\n        if (init.rawVideoStream) {\n            // Set implied options for client-side processing\n            init.sendDeviceMeta = false;\n            init.sendFrameMeta = false;\n            init.sendDummyByte = false;\n        }\n\n        super(init);\n    }\n\n    public override getDefaultValue(): T {\n        return {\n            ...super.getDefaultValue(),\n            downsizeOnError: true,\n            sendDeviceMeta: true,\n            sendDummyByte: true,\n            rawVideoStream: false,\n        };\n    }\n\n    public override serializeInjectScrollControlMessage(\n        message: ScrcpyInjectScrollControlMessage1_22,\n    ): Uint8Array {\n        return ScrcpyInjectScrollControlMessage1_22.serialize(message);\n    }\n}\n","import { TransformStream } from '@yume-chan/stream-extra';\n\nimport { ScrcpyOptions1_22, type ScrcpyOptionsInit1_22 } from './1_22.js';\nimport type { ScrcpyVideoStreamPacket } from './types.js';\n\nexport interface ScrcpyOptionsInit1_23 extends ScrcpyOptionsInit1_22 {\n    cleanup: boolean;\n}\n\nconst KEYFRAME_PTS = BigInt(1) << BigInt(62);\n\nexport class ScrcpyOptions1_23<T extends ScrcpyOptionsInit1_23 = ScrcpyOptionsInit1_23>\n    extends ScrcpyOptions1_22<T> {\n    public constructor(init: Partial<ScrcpyOptionsInit1_23>) {\n        super(init);\n    }\n\n    public override getDefaultValue(): T {\n        return {\n            ...super.getDefaultValue(),\n            cleanup: true,\n        };\n    }\n\n    public override createVideoStreamTransformer(): TransformStream<Uint8Array, ScrcpyVideoStreamPacket> {\n        const superStream = super.createVideoStreamTransformer();\n        return {\n            writable: superStream.writable,\n            readable: superStream.readable.pipeThrough(new TransformStream({\n                transform(packet, controller): void {\n                    if (packet.type !== 'frame') {\n                        controller.enqueue(packet);\n                        return;\n                    }\n\n                    if (packet.pts !== undefined && packet.pts & KEYFRAME_PTS) {\n                        packet.keyframe = true;\n                        packet.pts &= ~KEYFRAME_PTS;\n                    }\n\n                    controller.enqueue(packet);\n                }\n            }))\n        };\n    }\n}\n","import { ScrcpyOptions1_23, type ScrcpyOptionsInit1_23 } from './1_23.js';\n\nexport interface ScrcpyOptionsInit1_24 extends ScrcpyOptionsInit1_23 {\n    powerOn: boolean;\n}\n\nexport class ScrcpyOptions1_24<T extends ScrcpyOptionsInit1_24 = ScrcpyOptionsInit1_24>\n    extends ScrcpyOptions1_23<T> {\n    public constructor(init: Partial<ScrcpyOptionsInit1_24>) {\n        super(init);\n    }\n\n    public override getDefaultValue(): T {\n        return {\n            ...super.getDefaultValue(),\n            powerOn: true,\n        };\n    }\n}\n","export * from './1_16/index.js';\nexport * from './1_18.js';\nexport * from './1_21.js';\nexport * from './1_22.js';\nexport * from './1_23.js';\nexport * from './1_24.js';\nexport * from './types.js';\n","import { Adb, AdbSubprocessNoneProtocol, AdbSubprocessProtocol, AdbSync } from '@yume-chan/adb';\nimport { AbortController, DecodeUtf8Stream, InspectStream, ReadableStream, SplitStringStream, WrapWritableStream, WritableStream, type ReadableStreamDefaultController, type ReadableStreamDefaultReader, type ReadableWritablePair } from '@yume-chan/stream-extra';\n\nimport { ScrcpyControlMessageSerializer } from '../control/index.js';\nimport { ScrcpyDeviceMessageDeserializeStream, type ScrcpyDeviceMessage } from '../device-message/index.js';\nimport { DEFAULT_SERVER_PATH, type ScrcpyVideoStreamPacket } from '../options/index.js';\nimport type { AdbScrcpyOptions } from './options/index.js';\n\nclass ArrayToStream<T> extends ReadableStream<T>{\n    private array!: T[];\n    private index = 0;\n\n    constructor(array: T[]) {\n        super({\n            start: async () => {\n                await Promise.resolve();\n                this.array = array;\n            },\n            pull: (controller) => {\n                if (this.index < this.array.length) {\n                    controller.enqueue(this.array[this.index]!);\n                    this.index += 1;\n                } else {\n                    controller.close();\n                }\n            },\n        });\n    }\n}\n\nclass ConcatStream<T> extends ReadableStream<T>{\n    private streams!: ReadableStream<T>[];\n    private index = 0;\n    private reader!: ReadableStreamDefaultReader<T>;\n\n    constructor(...streams: ReadableStream<T>[]) {\n        super({\n            start: async (controller) => {\n                await Promise.resolve();\n\n                this.streams = streams;\n                this.advance(controller);\n            },\n            pull: async (controller) => {\n                const result = await this.reader.read();\n                if (!result.done) {\n                    controller.enqueue(result.value);\n                    return;\n                }\n                this.advance(controller);\n            }\n        });\n    }\n\n    private advance(controller: ReadableStreamDefaultController<T>) {\n        if (this.index < this.streams.length) {\n            this.reader = this.streams[this.index]!.getReader();\n            this.index += 1;\n        } else {\n            controller.close();\n        }\n    }\n}\n\nexport class AdbScrcpyClient {\n    public static pushServer(\n        adb: Adb,\n        path = DEFAULT_SERVER_PATH,\n    ) {\n        let sync!: AdbSync;\n        return new WrapWritableStream<Uint8Array>({\n            async start() {\n                sync = await adb.sync();\n                return sync.write(path);\n            },\n            async close() {\n                await sync.dispose();\n            },\n        });\n    }\n\n    public static async start(\n        adb: Adb,\n        path: string,\n        version: string,\n        options: AdbScrcpyOptions<any>\n    ) {\n        const connection = options.createConnection(adb);\n        let process: AdbSubprocessProtocol | undefined;\n\n        try {\n            await connection.initialize();\n\n            process = await adb.subprocess.spawn(\n                [\n                    // cspell: disable-next-line\n                    `CLASSPATH=${path}`,\n                    'app_process',\n                    /* unused */ '/',\n                    'com.genymobile.scrcpy.Server',\n                    version,\n                    ...options.formatServerArguments(),\n                ],\n                {\n                    // Scrcpy server doesn't use stderr,\n                    // so disable Shell Protocol to simplify processing\n                    protocols: [AdbSubprocessNoneProtocol],\n                }\n            );\n\n            const stdout = process.stdout\n                .pipeThrough(new DecodeUtf8Stream())\n                .pipeThrough(new SplitStringStream('\\n'));\n\n            // Read stdout, otherwise `process.exit` won't resolve.\n            const output: string[] = [];\n            const abortController = new AbortController();\n            const pipe = stdout\n                .pipeTo(new WritableStream({\n                    write(chunk) {\n                        output.push(chunk);\n                    }\n                }), {\n                    signal: abortController.signal,\n                    preventCancel: true,\n                })\n                .catch(() => { });\n\n            const result = await Promise.race([\n                process.exit,\n                connection.getStreams(),\n            ]);\n\n            if (typeof result === 'number') {\n                const error = new Error('scrcpy server exited prematurely');\n                (error as any).output = output;\n                throw error;\n            }\n\n            abortController.abort();\n            await pipe;\n\n            const [videoStream, controlStream] = result;\n            return new AdbScrcpyClient(\n                options,\n                process,\n                new ConcatStream(\n                    new ArrayToStream(output),\n                    stdout,\n                ),\n                videoStream,\n                controlStream\n            );\n        } catch (e) {\n            await process?.kill();\n            throw e;\n        } finally {\n            connection.dispose();\n        }\n    }\n\n    /**\n     * This method will modify the given `options`,\n     * so don't reuse it elsewhere.\n     */\n    public static async getEncoders(\n        adb: Adb,\n        path: string,\n        version: string,\n        options: AdbScrcpyOptions<any>\n    ): Promise<string[]> {\n        // Provide an invalid encoder name\n        // So the server will return all available encoders\n        options.value.encoderName = '_';\n        // Disable control for faster connection in 1.22+\n        options.value.control = false;\n        options.value.sendDeviceMeta = false;\n        options.value.sendDummyByte = false;\n\n        // Scrcpy server will open connections, before initializing encoder\n        // Thus although an invalid encoder name is given, the start process will success\n        const client = await AdbScrcpyClient.start(\n            adb,\n            path,\n            version,\n            options\n        );\n\n        const encoderNameRegex = options.getOutputEncoderNameRegex();\n        const encoders: string[] = [];\n        await client.stdout.pipeTo(new WritableStream({\n            write(line) {\n                const match = line.match(encoderNameRegex);\n                if (match) {\n                    encoders.push(match[1]!);\n                }\n            },\n        }));\n\n        return encoders;\n    }\n\n    /**\n     * This method will modify the given `options`,\n     * so don't reuse it elsewhere.\n     */\n    public static async getDisplays(\n        adb: Adb,\n        path: string,\n        version: string,\n        options: AdbScrcpyOptions<any>\n    ): Promise<number[]> {\n        // Similar to `getEncoders`, pass an invalid option and parse the output\n        options.value.displayId = -1;\n\n        options.value.control = false;\n        options.value.sendDeviceMeta = false;\n        options.value.sendDummyByte = false;\n\n        try {\n            // Server will exit before opening connections when an invalid display id was given.\n            await AdbScrcpyClient.start(adb, path, version, options);\n        } catch (e) {\n            if (e instanceof Error) {\n                const output = (e as any).output as string[];\n\n                const displayIdRegex = /\\s+scrcpy --display (\\d+)/;\n                const displays: number[] = [];\n                for (const line of output) {\n                    const match = line.match(displayIdRegex);\n                    if (match) {\n                        displays.push(Number.parseInt(match[1]!, 10));\n                    }\n                }\n                return displays;\n            }\n        }\n\n        throw new Error('failed to get displays');\n    }\n\n    private process: AdbSubprocessProtocol;\n\n    private _stdout: ReadableStream<string>;\n    public get stdout() { return this._stdout; }\n\n    public get exit() { return this.process.exit; }\n\n    private _screenWidth: number | undefined;\n    public get screenWidth() { return this._screenWidth; }\n\n    private _screenHeight: number | undefined;\n    public get screenHeight() { return this._screenHeight; }\n\n    private _videoStream: ReadableStream<ScrcpyVideoStreamPacket>;\n    public get videoStream() { return this._videoStream; }\n\n    private _controlMessageSerializer: ScrcpyControlMessageSerializer | undefined;\n    public get controlMessageSerializer() { return this._controlMessageSerializer; }\n\n    private _deviceMessageStream: ReadableStream<ScrcpyDeviceMessage> | undefined;\n    public get deviceMessageStream() { return this._deviceMessageStream; }\n\n    public constructor(\n        options: AdbScrcpyOptions<any>,\n        process: AdbSubprocessProtocol,\n        stdout: ReadableStream<string>,\n        videoStream: ReadableStream<Uint8Array>,\n        controlStream: ReadableWritablePair<Uint8Array, Uint8Array> | undefined,\n    ) {\n        this.process = process;\n        this._stdout = stdout;\n\n        this._videoStream = videoStream\n            .pipeThrough(options.createVideoStreamTransformer())\n            .pipeThrough(new InspectStream(packet => {\n                if (packet.type === 'configuration') {\n                    this._screenWidth = packet.data.croppedWidth;\n                    this._screenHeight = packet.data.croppedHeight;\n                }\n            }));\n\n        if (controlStream) {\n            this._controlMessageSerializer = new ScrcpyControlMessageSerializer(controlStream.writable, options);\n            this._deviceMessageStream = controlStream.readable.pipeThrough(new ScrcpyDeviceMessageDeserializeStream());\n        }\n    }\n\n    public async close() {\n        await this.process.kill();\n    }\n}\n","export * from './options/index.js';\nexport * from './client.js';\nexport * from './connection.js';\n","// From https://developer.android.com/reference/android/media/MediaCodecInfo.CodecProfileLevel\nexport enum AndroidCodecProfile {\n    Baseline = 0x01,\n    Main = 0x02,\n    Extended = 0x04,\n    High = 0x08,\n    High10 = 0x10,\n    High422 = 0x20,\n    High444 = 0x40,\n    ConstrainedBaseline = 0x10000,\n    ConstrainedHigh = 0x80000,\n}\n\nexport enum AndroidCodecLevel {\n    Level1 = 0x01,\n    Level1b = 0x02,\n    Level11 = 0x04,\n    Level12 = 0x08,\n    Level13 = 0x10,\n    Level2 = 0x20,\n    Level21 = 0x40,\n    Level22 = 0x80,\n    Level3 = 0x100,\n    Level31 = 0x200,\n    Level32 = 0x400,\n    Level4 = 0x800,\n    Level41 = 0x1000,\n    Level42 = 0x2000,\n    Level5 = 0x4000,\n    Level51 = 0x8000,\n    Level52 = 0x10000,\n    Level6 = 0x20000,\n    Level61 = 0x40000,\n    Level62 = 0x80000,\n}\n","export * from './adb/index.js';\nexport * from './codec.js';\nexport * from './control/index.js';\nexport * from './device-message/index.js';\nexport * from './options/index.js';\n","import { PromiseResolver } from '@yume-chan/async';\nimport { AutoDisposable, Disposable, EventEmitter } from '@yume-chan/event';\n\nlet worker: Worker | undefined;\nlet workerReady = false;\nconst pendingResolvers: PromiseResolver<TinyH264Wrapper>[] = [];\nlet streamId = 0;\n\nexport interface PictureReadyEventArgs {\n    renderStateId: number;\n\n    width: number;\n\n    height: number;\n\n    data: ArrayBuffer;\n}\n\nconst PICTURE_READY_SUBSCRIPTIONS = new Map<number, (e: PictureReadyEventArgs) => void>();\n\nfunction subscribePictureReady(streamId: number, handler: (e: PictureReadyEventArgs) => void): Disposable {\n    PICTURE_READY_SUBSCRIPTIONS.set(streamId, handler);\n\n    return {\n        dispose() {\n            PICTURE_READY_SUBSCRIPTIONS.delete(streamId);\n        }\n    };\n}\n\nexport class TinyH264Wrapper extends AutoDisposable {\n    public readonly streamId: number;\n\n    private readonly pictureReadyEvent = new EventEmitter<PictureReadyEventArgs>();\n    public get onPictureReady() { return this.pictureReadyEvent.event; }\n\n    public constructor(streamId: number) {\n        super();\n\n        this.streamId = streamId;\n        this.addDisposable(subscribePictureReady(streamId, this.handlePictureReady));\n    }\n\n    private handlePictureReady = (e: PictureReadyEventArgs) => {\n        this.pictureReadyEvent.fire(e);\n    };\n\n    public feed(data: ArrayBuffer) {\n        worker!.postMessage({\n            type: 'decode',\n            data: data,\n            offset: 0,\n            length: data.byteLength,\n            renderStateId: this.streamId,\n        }, [data]);\n    }\n\n    public override dispose() {\n        super.dispose();\n        worker!.postMessage({\n            type: 'release',\n            renderStateId: this.streamId,\n        });\n    }\n}\n\nexport function createTinyH264Wrapper(): Promise<TinyH264Wrapper> {\n    if (!worker) {\n        worker = new Worker(new URL('./worker.js', import.meta.url));\n        worker.addEventListener('message', (e) => {\n            const { data } = e;\n            switch (data.type) {\n                case 'decoderReady':\n                    workerReady = true;\n                    for (const resolver of pendingResolvers) {\n                        resolver.resolve(new TinyH264Wrapper(streamId));\n                        streamId += 1;\n                    }\n                    pendingResolvers.length = 0;\n                    break;\n                case 'pictureReady':\n                    PICTURE_READY_SUBSCRIPTIONS.get(data.renderStateId)?.(data);\n                    break;\n            }\n        });\n    }\n\n    if (!workerReady) {\n        const resolver = new PromiseResolver<TinyH264Wrapper>();\n        pendingResolvers.push(resolver);\n        return resolver.promise;\n    }\n\n    const decoder = new TinyH264Wrapper(streamId);\n    streamId += 1;\n    return Promise.resolve(decoder);\n}\n","import { PromiseResolver } from '@yume-chan/async';\nimport { AndroidCodecLevel, AndroidCodecProfile, type H264Configuration, type ScrcpyVideoStreamPacket } from '@yume-chan/scrcpy';\nimport { WritableStream } from '@yume-chan/stream-extra';\n\nimport { createTinyH264Wrapper, type TinyH264Wrapper } from './wrapper.js';\n\nlet cachedInitializePromise: Promise<{ YuvBuffer: typeof import('yuv-buffer'), YuvCanvas: typeof import('yuv-canvas').default; }> | undefined;\nfunction initialize() {\n    if (!cachedInitializePromise) {\n        cachedInitializePromise = Promise.all(\n            [import('yuv-buffer'), import('yuv-canvas')]\n        ).then(([YuvBuffer, { default: YuvCanvas }]) => ({\n            YuvBuffer, YuvCanvas\n        }));\n    }\n\n    return cachedInitializePromise;\n}\n\nexport class TinyH264Decoder {\n    public readonly maxProfile = AndroidCodecProfile.Baseline;\n\n    public readonly maxLevel = AndroidCodecLevel.Level4;\n\n    private _renderer: HTMLCanvasElement;\n    public get renderer() { return this._renderer; }\n\n    private _frameRendered = 0;\n    public get frameRendered() { return this._frameRendered; }\n\n    private _writable: WritableStream<ScrcpyVideoStreamPacket>;\n    public get writable() { return this._writable; }\n\n    private _yuvCanvas: import('yuv-canvas').default | undefined;\n    private _initializer: PromiseResolver<TinyH264Wrapper> | undefined;\n\n    public constructor() {\n        initialize();\n\n        this._renderer = document.createElement('canvas');\n\n        this._writable = new WritableStream<ScrcpyVideoStreamPacket>({\n            write: async (packet) => {\n                switch (packet.type) {\n                    case 'configuration':\n                        this.configure(packet.data);\n                        break;\n                    case 'frame':\n                        if (!this._initializer) {\n                            throw new Error('Decoder not initialized');\n                        }\n\n                        const wrapper = await this._initializer.promise;\n                        wrapper.feed(packet.data.slice().buffer);\n                        break;\n                }\n            }\n        });\n    }\n\n    private async configure(config: H264Configuration) {\n        this.dispose();\n\n        this._initializer = new PromiseResolver<TinyH264Wrapper>();\n        const { YuvBuffer, YuvCanvas } = await initialize();\n\n        if (!this._yuvCanvas) {\n            this._yuvCanvas = YuvCanvas.attach(this._renderer);;\n        }\n\n        const { encodedWidth, encodedHeight } = config;\n        const chromaWidth = encodedWidth / 2;\n        const chromaHeight = encodedHeight / 2;\n\n        this._renderer.width = config.croppedWidth;\n        this._renderer.height = config.croppedHeight;\n        const format = YuvBuffer.format({\n            width: encodedWidth,\n            height: encodedHeight,\n            chromaWidth,\n            chromaHeight,\n            cropLeft: config.cropLeft,\n            cropTop: config.cropTop,\n            cropWidth: config.croppedWidth,\n            cropHeight: config.croppedHeight,\n            displayWidth: config.croppedWidth,\n            displayHeight: config.croppedHeight,\n        });\n\n        const wrapper = await createTinyH264Wrapper();\n        this._initializer.resolve(wrapper);\n\n        const uPlaneOffset = encodedWidth * encodedHeight;\n        const vPlaneOffset = uPlaneOffset + chromaWidth * chromaHeight;\n        wrapper.onPictureReady(({ data }) => {\n            this._frameRendered += 1;\n            const array = new Uint8Array(data);\n            const frame = YuvBuffer.frame(format,\n                YuvBuffer.lumaPlane(format, array, encodedWidth, 0),\n                YuvBuffer.chromaPlane(format, array, chromaWidth, uPlaneOffset),\n                YuvBuffer.chromaPlane(format, array, chromaWidth, vPlaneOffset)\n            );\n            this._yuvCanvas!.drawFrame(frame);\n        });\n    }\n\n    public dispose(): void {\n        this._initializer?.promise.then(wrapper => wrapper.dispose());\n        this._initializer = undefined;\n    }\n}\n","import type { H264Configuration, ScrcpyVideoStreamPacket } from '@yume-chan/scrcpy';\nimport { WritableStream } from '@yume-chan/stream-extra';\n\nfunction toHex(value: number) {\n    return value.toString(16).padStart(2, '0').toUpperCase();\n}\n\nexport class WebCodecsDecoder {\n    // Usually, browsers can decode most configurations,\n    // So let device choose best profile and level for itself.\n    public readonly maxProfile = undefined;\n    public readonly maxLevel = undefined;\n\n    private _writable: WritableStream<ScrcpyVideoStreamPacket>;\n    public get writable() { return this._writable; }\n\n    private _renderer: HTMLCanvasElement;\n    public get renderer() { return this._renderer; }\n\n    private _frameRendered = 0;\n    public get frameRendered() { return this._frameRendered; }\n\n    private context: CanvasRenderingContext2D;\n    private decoder: VideoDecoder;\n\n    // Limit FPS to system refresh rate\n    private lastFrame: VideoFrame | undefined;\n    private animationFrame: number = 0;\n\n    public constructor() {\n        this._renderer = document.createElement('canvas');\n\n        this.context = this._renderer.getContext('2d')!;\n        this.decoder = new VideoDecoder({\n            output: (frame) => {\n                if (this.lastFrame) {\n                    this.lastFrame.close();\n                }\n                this.lastFrame = frame;\n\n                if (!this.animationFrame) {\n                    // Start render loop on first frame\n                    this.render();\n                }\n            },\n            error() { },\n        });\n\n        this._writable = new WritableStream<ScrcpyVideoStreamPacket>({\n            write: async (packet) => {\n                switch (packet.type) {\n                    case 'configuration':\n                        this.configure(packet.data);\n                        break;\n                    case 'frame':\n                        this.decoder.decode(new EncodedVideoChunk({\n                            // Treat `undefined` as `key`, otherwise won't decode.\n                            type: packet.keyframe === false ? 'delta' : 'key',\n                            timestamp: 0,\n                            data: packet.data,\n                        }));\n                        break;\n                }\n            }\n        });\n    }\n\n    private render = () => {\n        if (this.lastFrame) {\n            this._frameRendered += 1;\n            this.context.drawImage(this.lastFrame, 0, 0);\n            this.lastFrame.close();\n            this.lastFrame = undefined;\n        }\n\n        this.animationFrame = requestAnimationFrame(this.render);\n    };\n\n    private configure(config: H264Configuration) {\n        const { profileIndex, constraintSet, levelIndex } = config;\n\n        this._renderer.width = config.croppedWidth;\n        this._renderer.height = config.croppedHeight;\n\n        // https://www.rfc-editor.org/rfc/rfc6381#section-3.3\n        // ISO Base Media File Format Name Space\n        const codec = `avc1.${[profileIndex, constraintSet, levelIndex].map(toHex).join('')}`;\n        this.decoder.configure({\n            codec: codec,\n            optimizeForLatency: true,\n        });\n    }\n\n    public dispose() {\n        cancelAnimationFrame(this.animationFrame);\n        this.decoder.close();\n    }\n}\n","export default '1.24';","import { CommandBar, ContextualMenuItemType, Dialog, Dropdown, ICommandBarItemProps, Icon, IconButton, IDropdownOption, LayerHost, Position, ProgressIndicator, SpinButton, Stack, TextField, Toggle, TooltipHost } from \"@fluentui/react\";\nimport { useId } from \"@fluentui/react-hooks\";\nimport { makeStyles } from \"@griffel/react\";\nimport { action, autorun, makeAutoObservable, observable, runInAction } from \"mobx\";\nimport { observer } from \"mobx-react-lite\";\nimport { NextPage } from \"next\";\nimport Head from \"next/head\";\nimport { CSSProperties, ReactNode, useEffect, useState } from \"react\";\n\nimport { ADB_SYNC_MAX_PACKET_SIZE } from '@yume-chan/adb';\nimport { Disposable, EventEmitter } from \"@yume-chan/event\";\nimport { AdbScrcpyClient, AdbScrcpyOptions1_22, AndroidCodecLevel, AndroidCodecProfile, AndroidKeyCode, AndroidKeyEventAction, AndroidMotionEventAction, AndroidScreenPowerMode, CodecOptions, DEFAULT_SERVER_PATH, ScrcpyDeviceMessageType, ScrcpyLogLevel, ScrcpyOptions1_24, ScrcpyOptionsInit1_24, ScrcpyVideoOrientation, type ScrcpyVideoStreamPacket } from \"@yume-chan/scrcpy\";\nimport { TinyH264Decoder } from '@yume-chan/scrcpy-decoder-tinyh264';\nimport { WebCodecsDecoder } from '@yume-chan/scrcpy-decoder-webcodecs';\nimport SCRCPY_SERVER_VERSION from '@yume-chan/scrcpy/bin/version';\nimport { ChunkStream, InspectStream, ReadableStream, WritableStream } from '@yume-chan/stream-extra';\n\nimport { DemoModePanel, DeviceView, DeviceViewRef, ExternalLink } from \"../components\";\nimport { GlobalState } from \"../state\";\nimport { CommonStackTokens, formatSpeed, Icons, ProgressStream, RouteStackProps } from \"../utils\";\n\nconst SERVER_URL = new URL('@yume-chan/scrcpy/bin/scrcpy-server?url', import.meta.url);\n\nclass FetchWithProgress {\n    public readonly promise: Promise<Uint8Array>;\n\n    private _downloaded = 0;\n    public get downloaded() { return this._downloaded; }\n\n    private _total = 0;\n    public get total() { return this._total; }\n\n    private progressEvent = new EventEmitter<[download: number, total: number]>();\n    public get onProgress() { return this.progressEvent.event; }\n\n    public constructor(url: string | URL) {\n        this.promise = this.fetch(url);\n    }\n\n    private async fetch(url: string | URL) {\n        const response = await window.fetch(url);\n        this._total = Number.parseInt(response.headers.get('Content-Length') ?? '0', 10);\n        this.progressEvent.fire([this._downloaded, this._total]);\n\n        const reader = response.body!.getReader();\n        const chunks: Uint8Array[] = [];\n        while (true) {\n            const result = await reader.read();\n            if (result.done) {\n                break;\n            }\n            chunks.push(result.value);\n            this._downloaded += result.value.byteLength;\n            this.progressEvent.fire([this._downloaded, this._total]);\n        }\n\n        this._total = chunks.reduce((result, item) => result + item.byteLength, 0);\n        const result = new Uint8Array(this._total);\n        let position = 0;\n        for (const chunk of chunks) {\n            result.set(chunk, position);\n            position += chunk.byteLength;\n        }\n        return result;\n    }\n}\n\nlet cachedValue: FetchWithProgress | undefined;\nfunction fetchServer(onProgress?: (e: [downloaded: number, total: number]) => void) {\n    if (!cachedValue) {\n        cachedValue = new FetchWithProgress(SERVER_URL);\n        cachedValue.promise.catch((e) => {\n            cachedValue = undefined;\n        });\n    }\n\n    if (onProgress) {\n        cachedValue.onProgress(onProgress);\n        onProgress([cachedValue.downloaded, cachedValue.total]);\n    }\n\n    return cachedValue.promise;\n}\n\nfunction clamp(value: number, min: number, max: number): number {\n    if (value < min) {\n        return min;\n    }\n\n    if (value > max) {\n        return max;\n    }\n\n    return value;\n}\n\nexport interface H264Decoder extends Disposable {\n    readonly maxProfile: AndroidCodecProfile | undefined;\n    readonly maxLevel: AndroidCodecLevel | undefined;\n\n    readonly renderer: HTMLElement;\n    readonly frameRendered: number;\n    readonly writable: WritableStream<ScrcpyVideoStreamPacket>;\n}\n\nexport interface H264DecoderConstructor {\n    new(): H264Decoder;\n}\n\ninterface DecoderDefinition {\n    key: string;\n    name: string;\n    Constructor: H264DecoderConstructor;\n}\n\ntype RequiredScrcpyOptions = Pick<ScrcpyOptionsInit1_24, 'crop' | 'maxSize' | 'bitRate' | 'powerOn'>;\ntype OptionalScrcpyOptions = Partial<Pick<ScrcpyOptionsInit1_24, 'displayId' | 'lockVideoOrientation' | 'encoderName' | 'tunnelForward' | 'stayAwake' | 'powerOffOnClose'>>;\n\ninterface Settings extends RequiredScrcpyOptions, OptionalScrcpyOptions {\n    turnScreenOff?: boolean;\n    decoder?: string;\n    ignoreDecoderCodecArgs?: boolean;\n};\n\ninterface SettingDefinitionBase {\n    key: keyof Settings;\n    type: string;\n    label: string;\n    labelExtra?: JSX.Element;\n    description?: string;\n}\n\ninterface TextSettingDefinition extends SettingDefinitionBase {\n    type: 'text';\n    placeholder?: string;\n}\n\ninterface DropdownSettingDefinition extends SettingDefinitionBase {\n    type: 'dropdown';\n    placeholder?: string;\n    options: IDropdownOption[];\n}\n\ninterface ToggleSettingDefinition extends SettingDefinitionBase {\n    type: 'toggle',\n}\n\ninterface NumberSettingDefinition extends SettingDefinitionBase {\n    type: 'number',\n    min?: number;\n    max?: number;\n    step?: number;\n}\n\ntype SettingDefinition =\n    TextSettingDefinition |\n    DropdownSettingDefinition |\n    ToggleSettingDefinition |\n    NumberSettingDefinition;\n\ninterface SettingItemProps {\n    definition: SettingDefinition;\n    settings: any;\n    onChange: (key: keyof Settings, value: any) => void;\n}\n\nconst useClasses = makeStyles({\n    labelRight: {\n        marginLeft: '4px',\n    },\n    video: {\n        transformOrigin: 'center center',\n    },\n});\n\nconst SettingItem = observer(function SettingItem({\n    definition,\n    settings,\n    onChange,\n}: SettingItemProps) {\n    const classes = useClasses();\n\n    let label: JSX.Element = (\n        <Stack horizontal verticalAlign=\"center\">\n            <span>{definition.label}</span>\n            {!!definition.description && (\n                <TooltipHost content={definition.description}>\n                    <Icon className={classes.labelRight} iconName={Icons.Info} />\n                </TooltipHost>\n            )}\n            {definition.labelExtra}\n        </Stack>\n    );\n\n    switch (definition.type) {\n        case 'text':\n            return (\n                <TextField\n                    label={label as any}\n                    placeholder={definition.placeholder}\n                    value={settings[definition.key]}\n                    onChange={(e, value) => onChange(definition.key, value)}\n                />\n            );\n        case 'dropdown':\n            return (\n                <Dropdown\n                    label={label as any}\n                    options={definition.options}\n                    placeholder={definition.placeholder}\n                    selectedKey={settings[definition.key]}\n                    onChange={(e, option) => onChange(definition.key, option!.key)}\n                />\n            );\n        case 'toggle':\n            return (\n                <Toggle\n                    label={label}\n                    checked={settings[definition.key]}\n                    onChange={(e, checked) => onChange(definition.key, checked)}\n                />\n            );\n        case 'number':\n            return (\n                <SpinButton\n                    label={definition.label}\n                    labelPosition={Position.top}\n                    min={definition.min}\n                    max={definition.max}\n                    step={definition.step}\n                    value={settings[definition.key].toString()}\n                    onChange={(e, value) => onChange(definition.key, Number.parseInt(value!, 10))}\n                />\n            );\n    }\n});\n\nclass ScrcpyPageState {\n    running = false;\n\n    deviceView: DeviceViewRef | null = null;\n    rendererContainer: HTMLDivElement | null = null;\n\n    logVisible = false;\n    log: string[] = [];\n    settingsVisible = false;\n    demoModeVisible = false;\n    navigationBarVisible = true;\n\n    width = 0;\n    height = 0;\n    rotate = 0;\n\n    get rotatedWidth() { return state.rotate & 1 ? state.height : state.width; }\n    get rotatedHeight() { return state.rotate & 1 ? state.width : state.height; }\n\n    client: AdbScrcpyClient | undefined = undefined;\n\n    async pushServer() {\n        const serverBuffer = await fetchServer();\n\n        await new ReadableStream<Uint8Array>({\n            start(controller) {\n                controller.enqueue(serverBuffer);\n                controller.close();\n            },\n        })\n            .pipeTo(AdbScrcpyClient.pushServer(GlobalState.device!));\n    }\n\n    encoders: string[] = [];\n    updateEncoders = async () => {\n        try {\n            await this.pushServer();\n\n            const encoders = await AdbScrcpyClient.getEncoders(\n                GlobalState.device!,\n                DEFAULT_SERVER_PATH,\n                SCRCPY_SERVER_VERSION,\n                new AdbScrcpyOptions1_22(new ScrcpyOptions1_24({\n                    logLevel: ScrcpyLogLevel.Debug,\n                    tunnelForward: this.settings.tunnelForward,\n                }))\n            );\n\n            runInAction(() => {\n                this.encoders = encoders;\n                if (!this.settings.encoderName ||\n                    !this.encoders.includes(this.settings.encoderName)) {\n                    this.settings.encoderName = this.encoders[0];\n                }\n            });\n        } catch (e: any) {\n            GlobalState.showErrorDialog(e);\n        }\n    };\n\n    decoders: DecoderDefinition[] = [{\n        key: 'tinyh264',\n        name: 'TinyH264 (Software)',\n        Constructor: TinyH264Decoder,\n    }];\n    decoder: H264Decoder | undefined = undefined;\n    fpsCounterIntervalId: any = undefined;\n    fps = 0;\n\n    displays: number[] = [];\n    updateDisplays = async () => {\n        try {\n            await this.pushServer();\n\n            const displays = await AdbScrcpyClient.getDisplays(\n                GlobalState.device!,\n                DEFAULT_SERVER_PATH,\n                SCRCPY_SERVER_VERSION,\n                new AdbScrcpyOptions1_22(new ScrcpyOptions1_24({\n                    logLevel: ScrcpyLogLevel.Debug,\n                    tunnelForward: this.settings.tunnelForward,\n                }))\n            );\n\n            runInAction(() => {\n                this.displays = displays;\n                if (!this.settings.displayId ||\n                    !this.displays.includes(this.settings.displayId)) {\n                    this.settings.displayId = this.displays[0];\n                }\n            });\n        } catch (e: any) {\n            GlobalState.showErrorDialog(e);\n        }\n    };\n\n    connecting = false;\n    serverTotalSize = 0;\n    serverDownloadedSize = 0;\n    debouncedServerDownloadedSize = 0;\n    serverDownloadSpeed = 0;\n    serverUploadedSize = 0;\n    debouncedServerUploadedSize = 0;\n    serverUploadSpeed = 0;\n\n    get commandBarItems() {\n        const result: ICommandBarItemProps[] = [];\n\n        if (!this.running) {\n            result.push({\n                key: 'start',\n                disabled: !GlobalState.device,\n                iconProps: { iconName: Icons.Play },\n                text: 'Start',\n                onClick: this.start as VoidFunction,\n            });\n        } else {\n            result.push({\n                key: 'stop',\n                iconProps: { iconName: Icons.Stop },\n                text: 'Stop',\n                onClick: this.stop as VoidFunction,\n            });\n        }\n\n        result.push({\n            key: 'fullscreen',\n            disabled: !this.running,\n            iconProps: { iconName: Icons.FullScreenMaximize },\n            iconOnly: true,\n            text: 'Fullscreen',\n            onClick: () => { this.deviceView?.enterFullscreen(); },\n        });\n\n        result.push({\n            key: 'volumeUp',\n            disabled: !this.running,\n            iconProps: { iconName: Icons.Speaker2 },\n            iconOnly: true,\n            text: 'Volume Up',\n            onClick: (async () => {\n                // TODO: Auto repeat when holding\n                await this.client?.controlMessageSerializer!.injectKeyCode({\n                    action: AndroidKeyEventAction.Down,\n                    keyCode: AndroidKeyCode.VolumeUp,\n                    repeat: 0,\n                    metaState: 0,\n                });\n                await this.client?.controlMessageSerializer!.injectKeyCode({\n                    action: AndroidKeyEventAction.Up,\n                    keyCode: AndroidKeyCode.VolumeUp,\n                    repeat: 0,\n                    metaState: 0,\n                });\n            }) as (() => void),\n        }, {\n            key: 'volumeDown',\n            disabled: !this.running,\n            iconProps: { iconName: Icons.Speaker1 },\n            iconOnly: true,\n            text: 'Volume Down',\n            onClick: (async () => {\n                await this.client?.controlMessageSerializer!.injectKeyCode({\n                    action: AndroidKeyEventAction.Down,\n                    keyCode: AndroidKeyCode.VolumeDown,\n                    repeat: 0,\n                    metaState: 0,\n                });\n                await this.client?.controlMessageSerializer!.injectKeyCode({\n                    action: AndroidKeyEventAction.Up,\n                    keyCode: AndroidKeyCode.VolumeDown,\n                    repeat: 0,\n                    metaState: 0,\n                });\n            }) as (() => void),\n        }, {\n            key: 'volumeMute',\n            disabled: !this.running,\n            iconProps: { iconName: Icons.SpeakerOff },\n            iconOnly: true,\n            text: 'Toggle Mute',\n            onClick: (async () => {\n                await this.client?.controlMessageSerializer!.injectKeyCode({\n                    action: AndroidKeyEventAction.Down,\n                    keyCode: AndroidKeyCode.VolumeMute,\n                    repeat: 0,\n                    metaState: 0,\n                });\n                await this.client?.controlMessageSerializer!.injectKeyCode({\n                    action: AndroidKeyEventAction.Up,\n                    keyCode: AndroidKeyCode.VolumeMute,\n                    repeat: 0,\n                    metaState: 0,\n                });\n            }) as (() => void),\n        });\n\n        result.push({\n            key: 'rotateDevice',\n            disabled: !this.running,\n            iconProps: { iconName: Icons.Orientation },\n            iconOnly: true,\n            text: 'Rotate Device',\n            onClick: () => { this.client!.controlMessageSerializer!.rotateDevice(); },\n        }, {\n            key: 'rotateVideoLeft',\n            disabled: !this.running,\n            iconProps: { iconName: Icons.RotateLeft },\n            iconOnly: true,\n            text: 'Rotate Video Left',\n            onClick: action(() => {\n                this.rotate -= 1;\n                if (this.rotate < 0) {\n                    this.rotate = 3;\n                }\n            }),\n        }, {\n            key: 'rotateVideoRight',\n            disabled: !this.running,\n            iconProps: { iconName: Icons.RotateRight },\n            iconOnly: true,\n            text: 'Rotate Video Right',\n            onClick: action(() => {\n                this.rotate = (this.rotate + 1) & 3;\n            }),\n        });\n\n        result.push({\n            key: 'turnScreenOff',\n            disabled: !this.running,\n            iconProps: { iconName: Icons.Lightbulb },\n            iconOnly: true,\n            text: 'Turn Screen Off',\n            onClick: () => {\n                this.client!.controlMessageSerializer!.setScreenPowerMode(AndroidScreenPowerMode.Off);\n            },\n        }, {\n            key: 'turnScreenOn',\n            disabled: !this.running,\n            iconProps: { iconName: Icons.LightbulbFilament },\n            iconOnly: true,\n            text: 'Turn Screen On',\n            onClick: () => {\n                this.client!.controlMessageSerializer!.setScreenPowerMode(AndroidScreenPowerMode.Normal);\n            },\n        });\n\n        if (this.running) {\n            result.push({\n                key: 'fps',\n                text: `FPS: ${this.fps}`,\n                disabled: true,\n            });\n        }\n\n        return result;\n    }\n\n    get commandBarFarItems(): ICommandBarItemProps[] {\n        return [\n            {\n                key: 'NavigationBar',\n                iconProps: { iconName: Icons.PanelBottom },\n                checked: this.navigationBarVisible,\n                text: 'Navigation Bar',\n                iconOnly: true,\n                onClick: action(() => {\n                    this.navigationBarVisible = !this.navigationBarVisible;\n                }),\n            },\n            {\n                key: 'Log',\n                iconProps: { iconName: Icons.TextGrammarError },\n                checked: this.logVisible,\n                text: 'Log',\n                iconOnly: true,\n                onClick: action(() => {\n                    this.logVisible = !this.logVisible;\n                }),\n            },\n            {\n                key: 'Settings',\n                iconProps: { iconName: Icons.Settings },\n                checked: this.settingsVisible,\n                text: 'Settings',\n                iconOnly: true,\n                onClick: action(() => {\n                    this.settingsVisible = !this.settingsVisible;\n                }),\n            },\n            {\n                key: 'DemoMode',\n                iconProps: { iconName: Icons.Wand },\n                checked: this.demoModeVisible,\n                text: 'Demo Mode',\n                iconOnly: true,\n                onClick: action(() => {\n                    this.demoModeVisible = !this.demoModeVisible;\n                }),\n            },\n            {\n                key: 'info',\n                iconProps: { iconName: Icons.Info },\n                iconOnly: true,\n                tooltipHostProps: {\n                    content: (\n                        <>\n                            <p>\n                                <ExternalLink href=\"https://github.com/Genymobile/scrcpy\" spaceAfter>Scrcpy</ExternalLink>\n                                developed by Genymobile can display the screen with low latency (1~2 frames) and control the device, all without root access.\n                            </p>\n                            <p>\n                                This is a TypeScript implementation of the client part. Paired with official pre-built server binary.\n                            </p>\n                        </>\n                    ),\n                    calloutProps: {\n                        calloutMaxWidth: 300,\n                    }\n                },\n            }\n        ];\n    }\n\n    settings: Settings = {\n        maxSize: 1080,\n        bitRate: 4_000_000,\n        lockVideoOrientation: ScrcpyVideoOrientation.Unlocked,\n        displayId: 0,\n        crop: '',\n        powerOn: true,\n    };\n\n    get settingDefinitions() {\n        const result: SettingDefinition[] = [];\n\n        result.push({\n            key: 'powerOn',\n            type: 'toggle',\n            label: 'Turn device on when starting',\n        }, {\n            key: 'turnScreenOff',\n            type: 'toggle',\n            label: 'Turn screen off when starting',\n        }, {\n            key: 'stayAwake',\n            type: 'toggle',\n            label: 'Stay awake (if plugged in)',\n        }, {\n            key: 'powerOffOnClose',\n            type: 'toggle',\n            label: 'Turn device off when exiting',\n        });\n\n        result.push({\n            key: 'displayId',\n            type: 'dropdown',\n            label: 'Display',\n            placeholder: 'Press refresh to update available displays',\n            labelExtra: (\n                <IconButton\n                    iconProps={{ iconName: Icons.ArrowClockwise }}\n                    disabled={!GlobalState.device}\n                    text=\"Refresh\"\n                    onClick={this.updateDisplays}\n                />\n            ),\n            options: this.displays.map(item => ({\n                key: item,\n                text: item.toString(),\n            })),\n        });\n\n        result.push({\n            key: 'crop',\n            type: 'text',\n            label: 'Crop',\n            placeholder: 'W:H:X:Y',\n        });\n\n        result.push({\n            key: 'maxSize',\n            type: 'number',\n            label: 'Max Resolution (longer side, 0 = unlimited)',\n            min: 0,\n            max: 2560,\n            step: 50,\n        });\n\n        result.push({\n            key: 'bitRate',\n            type: 'number',\n            label: 'Max Bit Rate',\n            min: 100,\n            max: 100_000_000,\n            step: 100,\n        });\n\n        result.push({\n            key: 'lockVideoOrientation',\n            type: 'dropdown',\n            label: 'Lock Video Orientation',\n            options: [\n                {\n                    key: ScrcpyVideoOrientation.Unlocked,\n                    text: 'Unlocked',\n                },\n                {\n                    key: ScrcpyVideoOrientation.Initial,\n                    text: 'Current',\n                },\n                {\n                    key: ScrcpyVideoOrientation.Portrait,\n                    text: 'Portrait',\n                },\n                {\n                    key: ScrcpyVideoOrientation.Landscape,\n                    text: 'Landscape',\n                },\n                {\n                    key: ScrcpyVideoOrientation.PortraitFlipped,\n                    text: 'Portrait (Flipped)',\n                },\n                {\n                    key: ScrcpyVideoOrientation.LandscapeFlipped,\n                    text: 'Landscape (Flipped)',\n                },\n            ],\n        });\n\n        result.push({\n            key: 'encoderName',\n            type: 'dropdown',\n            label: 'Encoder',\n            placeholder: 'Press refresh to update available encoders',\n            labelExtra: (\n                <IconButton\n                    iconProps={{ iconName: Icons.ArrowClockwise }}\n                    disabled={!GlobalState.device}\n                    text=\"Refresh\"\n                    onClick={this.updateEncoders}\n                />\n            ),\n            options: this.encoders.map(item => ({\n                key: item,\n                text: item,\n            })),\n        });\n\n        if (this.decoders.length > 1) {\n            result.push({\n                key: 'decoder',\n                type: 'dropdown',\n                label: 'Decoder',\n                options: this.decoders.map(item => ({\n                    key: item.key,\n                    text: item.name,\n                    data: item,\n                })),\n            });\n        }\n\n        result.push({\n            key: 'ignoreDecoderCodecArgs',\n            type: 'toggle',\n            label: `Ignore decoder's codec arguments`,\n            description: `Some decoders don't support all H.264 profile/levels, so they request the device to encode at their highest-supported codec. However, some super old devices may not support that codec so their encoders will fail to start. Use this option to let device choose the codec to be used.`,\n        });\n\n        result.push({\n            key: 'tunnelForward',\n            type: 'toggle',\n            label: 'Use forward connection',\n            description: 'Android before version 9 has a bug that prevents reverse tunneling when using ADB over WiFi.'\n        });\n\n        return result;\n    }\n\n    constructor() {\n        makeAutoObservable(this, {\n            decoders: observable.shallow,\n            settings: observable.deep,\n            start: false,\n            stop: action.bound,\n            dispose: action.bound,\n            handleDeviceViewRef: action.bound,\n            handleRendererContainerRef: action.bound,\n            handleBackPointerDown: false,\n            handleBackPointerUp: false,\n            handleHomePointerDown: false,\n            handleHomePointerUp: false,\n            handleAppSwitchPointerDown: false,\n            handleAppSwitchPointerUp: false,\n            calculatePointerPosition: false,\n            injectTouch: false,\n            handlePointerDown: false,\n            handlePointerMove: false,\n            handlePointerUp: false,\n            handleWheel: false,\n            handleContextMenu: false,\n            handleKeyDown: false,\n        });\n\n        autorun(() => {\n            if (GlobalState.device) {\n                runInAction(() => {\n                    this.encoders = [];\n                    this.settings.encoderName = undefined;\n\n                    this.displays = [];\n                    this.settings.displayId = undefined;\n                });\n            } else {\n                this.dispose();\n            }\n        });\n\n        autorun(() => {\n            if (this.rendererContainer && this.decoder) {\n                while (this.rendererContainer.firstChild) {\n                    this.rendererContainer.firstChild.remove();\n                }\n                this.rendererContainer.appendChild(this.decoder.renderer);\n            }\n        });\n\n        autorun(() => {\n            this.settings.decoder = this.decoders[0].key;\n        });\n\n        if (typeof window !== 'undefined' && typeof window.VideoDecoder === 'function') {\n            setTimeout(action(() => {\n                this.decoders.unshift({\n                    key: 'webcodecs',\n                    name: 'WebCodecs',\n                    Constructor: WebCodecsDecoder,\n                });\n            }), 0);\n        }\n    }\n\n    start = async () => {\n        if (!GlobalState.device) {\n            return;\n        }\n\n        try {\n            if (!this.settings.decoder) {\n                throw new Error('No available decoder');\n            }\n\n            runInAction(() => {\n                this.serverTotalSize = 0;\n                this.serverDownloadedSize = 0;\n                this.debouncedServerDownloadedSize = 0;\n                this.serverUploadedSize = 0;\n                this.debouncedServerUploadedSize = 0;\n                this.connecting = true;\n            });\n\n            let intervalId = setInterval(action(() => {\n                this.serverDownloadSpeed = this.serverDownloadedSize - this.debouncedServerDownloadedSize;\n                this.debouncedServerDownloadedSize = this.serverDownloadedSize;\n            }), 1000);\n\n            let serverBuffer: Uint8Array;\n\n            try {\n                serverBuffer = await fetchServer(action(([downloaded, total]) => {\n                    this.serverDownloadedSize = downloaded;\n                    this.serverTotalSize = total;\n                }));\n                runInAction(() => {\n                    this.serverDownloadSpeed = this.serverDownloadedSize - this.debouncedServerDownloadedSize;\n                    this.debouncedServerDownloadedSize = this.serverDownloadedSize;\n                });\n            } finally {\n                clearInterval(intervalId);\n            }\n\n            intervalId = setInterval(action(() => {\n                this.serverUploadSpeed = this.serverUploadedSize - this.debouncedServerUploadedSize;\n                this.debouncedServerUploadedSize = this.serverUploadedSize;\n            }), 1000);\n\n            try {\n                await new ReadableStream<Uint8Array>({\n                    start(controller) {\n                        controller.enqueue(serverBuffer);\n                        controller.close();\n                    },\n                })\n                    .pipeThrough(new ChunkStream(ADB_SYNC_MAX_PACKET_SIZE))\n                    .pipeThrough(new ProgressStream(action((progress) => {\n                        this.serverUploadedSize = progress;\n                    })))\n                    .pipeTo(AdbScrcpyClient.pushServer(GlobalState.device!));\n\n                runInAction(() => {\n                    this.serverUploadSpeed = this.serverUploadedSize - this.debouncedServerUploadedSize;\n                    this.debouncedServerUploadedSize = this.serverUploadedSize;\n                });\n            } finally {\n                clearInterval(intervalId);\n            }\n\n            const decoderDefinition = this.decoders.find(x => x.key === this.settings.decoder) ?? this.decoders[0];\n            const decoder = new decoderDefinition.Constructor();\n\n            runInAction(() => {\n                this.decoder = decoder;\n\n                let lastFrameCount = 0;\n                this.fpsCounterIntervalId = setInterval(action(() => {\n                    this.fps = decoder.frameRendered - lastFrameCount;\n                    lastFrameCount = decoder.frameRendered;\n                }), 1000);\n            });\n\n            const options = new AdbScrcpyOptions1_22(new ScrcpyOptions1_24({\n                logLevel: ScrcpyLogLevel.Debug,\n                ...this.settings,\n                sendDeviceMeta: false,\n                sendDummyByte: false,\n                codecOptions: !this.settings.ignoreDecoderCodecArgs\n                    ? new CodecOptions({\n                        profile: decoder.maxProfile,\n                        level: decoder.maxLevel,\n                    })\n                    : undefined,\n            }));\n\n            runInAction(() => {\n                this.log = [];\n                this.log.push(`[client] Server version: ${SCRCPY_SERVER_VERSION}`);\n                this.log.push(`[client] Server arguments: ${options.formatServerArguments().join(' ')}`);\n            });\n\n            const client = await AdbScrcpyClient.start(\n                GlobalState.device!,\n                DEFAULT_SERVER_PATH,\n                SCRCPY_SERVER_VERSION,\n                options\n            );\n\n            client.stdout.pipeTo(new WritableStream<string>({\n                write: action((line) => {\n                    this.log.push(line);\n                }),\n            }));\n\n            client.videoStream\n                .pipeThrough(new InspectStream(action((packet: ScrcpyVideoStreamPacket) => {\n                    if (packet.type === 'configuration') {\n                        const { croppedWidth, croppedHeight, } = packet.data;\n                        this.log.push(`[client] Video size changed: ${croppedWidth}x${croppedHeight}`);\n\n                        this.width = croppedWidth;\n                        this.height = croppedHeight;\n                    }\n                })))\n                .pipeTo(decoder.writable)\n                .catch(() => { });\n\n            client.exit.then(this.dispose);\n\n            client.deviceMessageStream!.pipeTo(new WritableStream({\n                write(message) {\n                    switch (message.type) {\n                        case ScrcpyDeviceMessageType.Clipboard:\n                            window.navigator.clipboard.writeText(message.content);\n                            break;\n                    }\n                }\n            })).catch(() => { });\n\n            if (this.settings.turnScreenOff) {\n                await client.controlMessageSerializer!.setScreenPowerMode(AndroidScreenPowerMode.Off);\n            }\n\n            runInAction(() => {\n                this.client = client;\n                this.running = true;\n            });\n        } catch (e: any) {\n            GlobalState.showErrorDialog(e);\n        } finally {\n            runInAction(() => {\n                this.connecting = false;\n            });\n        }\n    };\n\n    async stop() {\n        // Request to close client first\n        await this.client?.close();\n        this.dispose();\n    }\n\n    dispose() {\n        // Otherwise some packets may still arrive at decoder\n        this.decoder?.dispose();\n        this.decoder = undefined;\n\n        this.fps = 0;\n        clearTimeout(this.fpsCounterIntervalId);\n\n        this.client = undefined;\n        this.running = false;\n    }\n\n    handleDeviceViewRef(element: DeviceViewRef | null) {\n        this.deviceView = element;\n    }\n\n    handleRendererContainerRef(element: HTMLDivElement | null) {\n        this.rendererContainer = element;\n        this.rendererContainer?.addEventListener('wheel', this.handleWheel, { passive: false });\n    };\n\n    handleBackPointerDown = (e: React.PointerEvent<HTMLDivElement>) => {\n        if (!this.client) {\n            return;\n        }\n\n        if (e.button !== 0) {\n            return;\n        }\n        e.currentTarget.setPointerCapture(e.pointerId);\n\n        this.client!.controlMessageSerializer!.backOrScreenOn(AndroidKeyEventAction.Down);\n    };\n\n    handleBackPointerUp = (e: React.PointerEvent<HTMLDivElement>) => {\n        if (!this.client) {\n            return;\n        }\n\n        if (e.button !== 0) {\n            return;\n        }\n\n        this.client!.controlMessageSerializer!.backOrScreenOn(AndroidKeyEventAction.Up);\n    };\n\n    handleHomePointerDown = (e: React.PointerEvent<HTMLDivElement>) => {\n        if (!this.client) {\n            return;\n        }\n\n        if (e.button !== 0) {\n            return;\n        }\n        e.currentTarget.setPointerCapture(e.pointerId);\n\n        this.client!.controlMessageSerializer!.injectKeyCode({\n            action: AndroidKeyEventAction.Down,\n            keyCode: AndroidKeyCode.Home,\n            repeat: 0,\n            metaState: 0,\n        });\n    };\n\n    handleHomePointerUp = (e: React.PointerEvent<HTMLDivElement>) => {\n        if (!this.client) {\n            return;\n        }\n\n        if (e.button !== 0) {\n            return;\n        }\n\n        this.client!.controlMessageSerializer!.injectKeyCode({\n            action: AndroidKeyEventAction.Up,\n            keyCode: AndroidKeyCode.Home,\n            repeat: 0,\n            metaState: 0,\n        });\n    };\n\n    handleAppSwitchPointerDown = async (e: React.PointerEvent<HTMLDivElement>) => {\n        if (!this.client) {\n            return;\n        }\n\n        if (e.button !== 0) {\n            return;\n        }\n        e.currentTarget.setPointerCapture(e.pointerId);\n\n        this.client!.controlMessageSerializer!.injectKeyCode({\n            action: AndroidKeyEventAction.Down,\n            keyCode: AndroidKeyCode.AppSwitch,\n            repeat: 0,\n            metaState: 0,\n        });\n    };\n\n    handleAppSwitchPointerUp = async (e: React.PointerEvent<HTMLDivElement>) => {\n        if (!this.client) {\n            return;\n        }\n\n        if (e.button !== 0) {\n            return;\n        }\n\n        this.client!.controlMessageSerializer!.injectKeyCode({\n            action: AndroidKeyEventAction.Up,\n            keyCode: AndroidKeyCode.AppSwitch,\n            repeat: 0,\n            metaState: 0,\n        });\n    };\n\n    calculatePointerPosition(clientX: number, clientY: number) {\n        const viewRect = this.rendererContainer!.getBoundingClientRect();\n        let pointerViewX = clamp((clientX - viewRect.x) / viewRect.width, 0, 1);\n        let pointerViewY = clamp((clientY - viewRect.y) / viewRect.height, 0, 1);\n\n        if (this.rotate & 1) {\n            ([pointerViewX, pointerViewY] = [pointerViewY, pointerViewX]);\n        }\n        switch (this.rotate) {\n            case 1:\n                pointerViewY = 1 - pointerViewY;\n                break;\n            case 2:\n                pointerViewX = 1 - pointerViewX;\n                pointerViewY = 1 - pointerViewY;\n                break;\n            case 3:\n                pointerViewX = 1 - pointerViewX;\n                break;\n        }\n\n        return {\n            x: pointerViewX * this.width,\n            y: pointerViewY * this.height,\n        };\n    }\n\n    injectTouch = (\n        action: AndroidMotionEventAction,\n        e: React.PointerEvent<HTMLDivElement>\n    ) => {\n        if (!this.client) {\n            return;\n        }\n\n        const { x, y } = this.calculatePointerPosition(e.clientX, e.clientY);\n        this.client!.controlMessageSerializer!.injectTouch({\n            action,\n            pointerId: e.pointerType === \"mouse\" ? BigInt(-1) : BigInt(e.pointerId),\n            screenWidth: this.client!.screenWidth!,\n            screenHeight: this.client!.screenHeight!,\n            pointerX: x,\n            pointerY: y,\n            pressure: e.pressure * 65535,\n            buttons: e.buttons,\n        });\n    };\n\n    handlePointerDown = (e: React.PointerEvent<HTMLDivElement>) => {\n        this.rendererContainer!.focus();\n        e.preventDefault();\n        e.currentTarget.setPointerCapture(e.pointerId);\n        this.injectTouch(AndroidMotionEventAction.Down, e);\n    };\n\n    handlePointerMove = (e: React.PointerEvent<HTMLDivElement>) => {\n        this.injectTouch(\n            e.buttons === 0 ? AndroidMotionEventAction.HoverMove : AndroidMotionEventAction.Move,\n            e\n        );\n    };\n\n    handlePointerUp = (e: React.PointerEvent<HTMLDivElement>) => {\n        this.injectTouch(AndroidMotionEventAction.Up, e);\n    };\n\n    handleWheel = (e: WheelEvent) => {\n        if (!this.client) {\n            return;\n        }\n\n        e.preventDefault();\n        e.stopPropagation();\n\n        const { x, y } = this.calculatePointerPosition(e.clientX, e.clientY);\n        this.client!.controlMessageSerializer!.injectScroll({\n            screenWidth: this.client!.screenWidth!,\n            screenHeight: this.client!.screenHeight!,\n            pointerX: x,\n            pointerY: y,\n            scrollX: -Math.sign(e.deltaX),\n            scrollY: -Math.sign(e.deltaY),\n            buttons: 0,\n        });\n    };\n\n    handleContextMenu = (e: React.MouseEvent<HTMLDivElement>) => {\n        e.preventDefault();\n    };\n\n    handleKeyDown = async (e: React.KeyboardEvent<HTMLDivElement>) => {\n        if (!this.client) {\n            return;\n        }\n\n        const { key, code } = e;\n        if (key.match(/^[!-`{-~]$/i)) {\n            this.client!.controlMessageSerializer!.injectText(key);\n            return;\n        }\n\n        const keyCode = ({\n            Backspace: AndroidKeyCode.Delete,\n            Space: AndroidKeyCode.Space,\n            Enter: AndroidKeyCode.Enter,\n        } as Record<string, AndroidKeyCode | undefined>)[code];\n\n        if (keyCode) {\n            this.client!.controlMessageSerializer!.injectKeyCode({\n                action: AndroidKeyEventAction.Down,\n                keyCode,\n                metaState: 0,\n                repeat: 0,\n            });\n            this.client!.controlMessageSerializer!.injectKeyCode({\n                action: AndroidKeyEventAction.Up,\n                keyCode,\n                metaState: 0,\n                repeat: 0,\n            });\n        }\n    };\n}\n\nconst state = new ScrcpyPageState();\n\nconst ConnectionDialog = observer(() => {\n    const layerHostId = useId('layerHost');\n\n    const [isClient, setIsClient] = useState(false);\n\n    useEffect(() => {\n        setIsClient(true);\n    }, []);\n\n    if (!isClient) {\n        return null;\n    }\n\n    return (\n        <>\n            <LayerHost id={layerHostId} style={{ position: 'absolute', top: 0, bottom: 0, left: 0, right: 0, margin: 0, pointerEvents: 'none' }} />\n\n            <Dialog\n                hidden={!state.connecting}\n                modalProps={{ layerProps: { hostId: layerHostId } }}\n                dialogContentProps={{ title: 'Connecting...' }}\n            >\n                <Stack tokens={CommonStackTokens}>\n                    <ProgressIndicator\n                        label=\"1. Downloading scrcpy server...\"\n                        percentComplete={state.serverTotalSize ? state.serverDownloadedSize / state.serverTotalSize : undefined}\n                        description={formatSpeed(state.debouncedServerDownloadedSize, state.serverTotalSize, state.serverDownloadSpeed)}\n                    />\n\n                    <ProgressIndicator\n                        label=\"2. Pushing scrcpy server to device...\"\n                        progressHidden={state.serverTotalSize === 0 || state.serverDownloadedSize !== state.serverTotalSize}\n                        percentComplete={state.serverUploadedSize / state.serverTotalSize}\n                        description={formatSpeed(state.debouncedServerUploadedSize, state.serverTotalSize, state.serverUploadSpeed)}\n                    />\n\n                    <ProgressIndicator\n                        label=\"3. Starting scrcpy server on device...\"\n                        progressHidden={state.serverTotalSize === 0 || state.serverUploadedSize !== state.serverTotalSize}\n                    />\n                </Stack>\n            </Dialog>\n        </>\n    );\n});\n\nconst NavigationBar = observer(function NavigationBar({\n    className,\n    style,\n    children\n}: {\n    className: string;\n    style: CSSProperties;\n    children: ReactNode;\n    }) {\n    if (!state.navigationBarVisible) {\n        return (\n            <div className={className} style={style}>{children}</div>\n        );\n    }\n\n    return (\n        <Stack className={className} verticalFill horizontalAlign=\"center\" style={{ height: '40px', background: '#999', ...style }}>\n            {children}\n            <Stack verticalFill horizontal style={{ width: '100%', maxWidth: 300 }} horizontalAlign=\"space-evenly\" verticalAlign=\"center\">\n                <IconButton\n                    iconProps={{ iconName: Icons.Play }}\n                    style={{ transform: 'rotate(180deg)', color: 'white' }}\n                    onPointerDown={state.handleBackPointerDown}\n                    onPointerUp={state.handleBackPointerUp}\n                />\n                <IconButton\n                    iconProps={{ iconName: Icons.Circle }}\n                    style={{ color: 'white' }}\n                    onPointerDown={state.handleHomePointerDown}\n                    onPointerUp={state.handleHomePointerUp}\n                />\n                <IconButton\n                    iconProps={{ iconName: Icons.Stop }}\n                    style={{ color: 'white' }}\n                    onPointerDown={state.handleAppSwitchPointerDown}\n                    onPointerUp={state.handleAppSwitchPointerUp}\n                />\n            </Stack>\n        </Stack>\n    );\n});\n\nconst Scrcpy: NextPage = () => {\n    const classes = useClasses();\n\n    return (\n        <Stack {...RouteStackProps}>\n            <Head>\n                <title>Scrcpy - Android Web Toolbox</title>\n            </Head>\n\n            <CommandBar items={state.commandBarItems} farItems={state.commandBarFarItems} />\n\n            <Stack horizontal grow styles={{ root: { height: 0 } }}>\n                <DeviceView\n                    ref={state.handleDeviceViewRef}\n                    width={state.rotatedWidth}\n                    height={state.rotatedHeight}\n                    BottomElement={NavigationBar}\n                >\n                    <div\n                        ref={state.handleRendererContainerRef}\n                        tabIndex={-1}\n                        className={classes.video}\n                        style={{\n                            width: state.width,\n                            height: state.height,\n                            transform: `translate(${(state.rotatedWidth - state.width) / 2}px, ${(state.rotatedHeight - state.height) / 2}px) rotate(${state.rotate * 90}deg)`\n                        }}\n                        onPointerDown={state.handlePointerDown}\n                        onPointerMove={state.handlePointerMove}\n                        onPointerUp={state.handlePointerUp}\n                        onPointerCancel={state.handlePointerUp}\n                        onKeyDown={state.handleKeyDown}\n                        onContextMenu={state.handleContextMenu}\n                    />\n                </DeviceView>\n\n                <div style={{\n                    padding: 12,\n                    overflow: 'hidden auto',\n                    display: state.logVisible ? 'block' : 'none',\n                    width: 500,\n                    fontFamily: 'monospace',\n                    overflowY: 'auto',\n                    whiteSpace: 'pre-wrap',\n                    wordWrap: 'break-word',\n                }}>\n                    {state.log.map((line, index) => (\n                        <div key={index}>\n                            {line}\n                        </div>\n                    ))}\n                </div>\n\n                <div style={{ padding: 12, overflow: 'hidden auto', display: state.settingsVisible ? 'block' : 'none', width: 300 }}>\n                    <div>Changes will take effect on next connection</div>\n\n                    {state.settingDefinitions.map(definition => (\n                        <SettingItem\n                            key={definition.key}\n                            definition={definition}\n                            settings={state.settings}\n                            onChange={action((key, value) => (state.settings as any)[key] = value)}\n                        />\n                    ))}\n                </div>\n\n                <DemoModePanel\n                    style={{ display: state.demoModeVisible ? 'block' : 'none' }}\n                />\n\n                <ConnectionDialog />\n            </Stack>\n        </Stack>\n    );\n};\n\nexport default observer(Scrcpy);\n","(self[\"webpackChunk_N_E\"] = self[\"webpackChunk_N_E\"] || []).push([[533],{\n\n/***/ 7452:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/scrcpy\",\n      function () {\n        return __webpack_require__(1492);\n      }\n    ]);\n    if(false) {}\n  \n\n/***/ }),\n\n/***/ 1492:\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": function() { return /* binding */ scrcpy; }\n});\n\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(4471);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@fluentui+react@8.101.1_2zx2umvpluuhvlq44va5bta2da/node_modules/@fluentui/react/lib/components/Stack/Stack.js + 2 modules\nvar Stack = __webpack_require__(1887);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@fluentui+react@8.101.1_2zx2umvpluuhvlq44va5bta2da/node_modules/@fluentui/react/lib/components/Tooltip/TooltipHost.js + 7 modules\nvar TooltipHost = __webpack_require__(5169);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@fluentui+react@8.101.1_2zx2umvpluuhvlq44va5bta2da/node_modules/@fluentui/react/lib/components/Icon/Icon.js + 2 modules\nvar Icon = __webpack_require__(8415);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@fluentui+react@8.101.1_2zx2umvpluuhvlq44va5bta2da/node_modules/@fluentui/react/lib/components/TextField/TextField.js + 5 modules\nvar TextField = __webpack_require__(2081);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@fluentui+react@8.101.1_2zx2umvpluuhvlq44va5bta2da/node_modules/@fluentui/react/lib/components/Dropdown/Dropdown.js + 11 modules\nvar Dropdown = __webpack_require__(706);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@fluentui+react@8.101.1_2zx2umvpluuhvlq44va5bta2da/node_modules/@fluentui/react/lib/components/Toggle/Toggle.js + 2 modules\nvar Toggle = __webpack_require__(7738);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@fluentui+react@8.101.1_2zx2umvpluuhvlq44va5bta2da/node_modules/@fluentui/react/lib/components/SpinButton/SpinButton.js + 3 modules\nvar SpinButton = __webpack_require__(1818);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@fluentui+react@8.101.1_2zx2umvpluuhvlq44va5bta2da/node_modules/@fluentui/react/lib/utilities/positioning/positioning.types.js\nvar positioning_types = __webpack_require__(638);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@fluentui+react@8.101.1_2zx2umvpluuhvlq44va5bta2da/node_modules/@fluentui/react/lib/components/Button/IconButton/IconButton.js + 1 modules\nvar IconButton = __webpack_require__(1197);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/tslib@2.4.1/node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(3499);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/react@18.2.0/node_modules/react/index.js\nvar react = __webpack_require__(3370);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@fluentui+react-hooks@8.6.14_fan5qbzahqtxlm5dzefqlqx5ia/node_modules/@fluentui/react-hooks/lib/useUnmount.js\nvar useUnmount = __webpack_require__(1344);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@fluentui+utilities@8.13.4_fan5qbzahqtxlm5dzefqlqx5ia/node_modules/@fluentui/utilities/lib/getId.js\nvar getId = __webpack_require__(5561);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@fluentui+utilities@8.13.4_fan5qbzahqtxlm5dzefqlqx5ia/node_modules/@fluentui/utilities/lib/css.js\nvar css = __webpack_require__(6799);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@fluentui+react@8.101.1_2zx2umvpluuhvlq44va5bta2da/node_modules/@fluentui/react/lib/components/Layer/Layer.notification.js\nvar Layer_notification = __webpack_require__(4619);\n;// CONCATENATED MODULE: ../../common/temp/node_modules/.pnpm/@fluentui+react@8.101.1_2zx2umvpluuhvlq44va5bta2da/node_modules/@fluentui/react/lib/components/Layer/LayerHost.js\n\n\n\n\n\nvar LayerHost = function (props) {\n    var className = props.className;\n    var layerHostId = react.useState(function () { return (0,getId/* getId */.z)(); })[0];\n    var _a = props.id, hostId = _a === void 0 ? layerHostId : _a;\n    var layerHostRef = react.useRef({\n        hostId: hostId,\n        rootRef: react.useRef(null),\n        notifyLayersChanged: function () {\n            // Nothing, since the default implementation of Layer Host does not need to react to layer changes.\n        },\n    });\n    react.useImperativeHandle(props.componentRef, function () { return layerHostRef.current; });\n    react.useEffect(function () {\n        (0,Layer_notification/* registerLayerHost */._Y)(hostId, layerHostRef.current);\n        (0,Layer_notification/* notifyHostChanged */.EQ)(hostId);\n        // eslint-disable-next-line react-hooks/exhaustive-deps -- should only run on first render\n    }, []);\n    (0,useUnmount/* useUnmount */.k)(function () {\n        (0,Layer_notification/* unregisterLayerHost */.nw)(hostId, layerHostRef.current);\n        (0,Layer_notification/* notifyHostChanged */.EQ)(hostId);\n    });\n    return react.createElement(\"div\", (0,tslib_es6/* __assign */.pi)({}, props, { className: (0,css/* css */.i)('ms-LayerHost', className), ref: layerHostRef.current.rootRef }));\n};\n\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@fluentui+react@8.101.1_2zx2umvpluuhvlq44va5bta2da/node_modules/@fluentui/react/lib/components/Dialog/Dialog.js + 10 modules\nvar Dialog = __webpack_require__(6335);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@fluentui+react@8.101.1_2zx2umvpluuhvlq44va5bta2da/node_modules/@fluentui/react/lib/components/ProgressIndicator/ProgressIndicator.js + 2 modules\nvar ProgressIndicator = __webpack_require__(7520);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@fluentui+react@8.101.1_2zx2umvpluuhvlq44va5bta2da/node_modules/@fluentui/react/lib/components/CommandBar/CommandBar.js + 8 modules\nvar CommandBar = __webpack_require__(9426);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@fluentui+react-hooks@8.6.14_fan5qbzahqtxlm5dzefqlqx5ia/node_modules/@fluentui/react-hooks/lib/useId.js\nvar useId = __webpack_require__(4976);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@griffel+react@1.4.2_react@18.2.0/node_modules/@griffel/react/makeStyles.esm.js + 27 modules\nvar makeStyles_esm = __webpack_require__(9332);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/mobx@6.7.0/node_modules/mobx/dist/mobx.esm.js\nvar mobx_esm = __webpack_require__(6323);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/mobx-react-lite@3.4.0_jofyzmwkboewm6mjrhi25mngky/node_modules/mobx-react-lite/es/index.js + 16 modules\nvar es = __webpack_require__(6779);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/next@13.0.3_biqbaboplfbrettd7655fr4n2y/node_modules/next/head.js\nvar head = __webpack_require__(3591);\nvar head_default = /*#__PURE__*/__webpack_require__.n(head);\n// EXTERNAL MODULE: ../../libraries/adb/esm/index.js + 32 modules\nvar esm = __webpack_require__(7417);\n// EXTERNAL MODULE: ../../libraries/event/esm/index.js + 3 modules\nvar event_esm = __webpack_require__(2469);\n// EXTERNAL MODULE: ../../common/temp/node_modules/.pnpm/@yume-chan+async@2.2.0/node_modules/@yume-chan/async/esm/index.js + 3 modules\nvar async_esm = __webpack_require__(6789);\n// EXTERNAL MODULE: ../../libraries/stream-extra/esm/index.js + 16 modules\nvar stream_extra_esm = __webpack_require__(6261);\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/adb/connection.js\n\n\nclass AdbScrcpyConnection {\n    adb;\n    options;\n    constructor(adb, options) {\n        this.adb = adb;\n        this.options = options;\n    }\n    initialize() { }\n    dispose() { }\n}\nclass AdbScrcpyForwardConnection extends AdbScrcpyConnection {\n    connect() {\n        return this.adb.createSocket('localabstract:scrcpy');\n    }\n    async connectAndRetry() {\n        for (let i = 0; i < 100; i++) {\n            try {\n                return await this.connect();\n            }\n            catch (e) {\n                await (0,async_esm/* delay */.gw)(100);\n            }\n        }\n        throw new Error(`Can't connect to server after 100 retries`);\n    }\n    async connectVideoStream() {\n        const { readable: videoStream } = await this.connectAndRetry();\n        if (this.options.sendDummyByte) {\n            const reader = videoStream.getReader();\n            const { done, value } = await reader.read();\n            // server will write a `0` to signal connection success\n            if (done || value.byteLength !== 1 || value[0] !== 0) {\n                throw new Error('Unexpected response from server');\n            }\n            reader.releaseLock();\n        }\n        return videoStream;\n    }\n    async getStreams() {\n        const videoStream = await this.connectVideoStream();\n        let controlStream;\n        if (this.options.control) {\n            controlStream = await this.connectAndRetry();\n        }\n        // Server only writes device meta after control socket is connected (if enabled)\n        if (this.options.sendDeviceMeta) {\n            const reader = videoStream.getReader();\n            const { done, value } = await reader.read();\n            // 64 bytes device name + 2 bytes video width + 2 bytes video height\n            if (done || value.byteLength !== 64 + 2 + 2) {\n                throw new Error('Unexpected response from server');\n            }\n            reader.releaseLock();\n        }\n        return [videoStream, controlStream];\n    }\n}\nclass AdbScrcpyReverseConnection extends AdbScrcpyConnection {\n    streams;\n    address;\n    async initialize() {\n        // try to unbind first, ignore errors\n        await this.adb.reverse.remove('localabstract:scrcpy').catch(() => { });\n        const queue = new stream_extra_esm/* TransformStream */.GJ();\n        this.streams = queue.readable.getReader();\n        const writer = queue.writable.getWriter();\n        this.address = await this.adb.reverse.add('localabstract:scrcpy', 'tcp:27183', socket => {\n            writer.write(socket);\n            return true;\n        });\n    }\n    async accept() {\n        return (await this.streams.read()).value;\n    }\n    async getStreams() {\n        const { readable: videoStream } = await this.accept();\n        let controlStream;\n        if (this.options.control) {\n            controlStream = await this.accept();\n        }\n        // Server only writes device meta after control socket is connected (if enabled)\n        if (this.options.sendDeviceMeta) {\n            const reader = videoStream.getReader();\n            const { done, value } = await reader.read();\n            // 64 bytes device name + 2 bytes video width + 2 bytes video height\n            if (done || value.byteLength !== 64 + 2 + 2) {\n                throw new Error('Unexpected response from server');\n            }\n            reader.releaseLock();\n        }\n        return [videoStream, controlStream];\n    }\n    dispose() {\n        // Don't await this!\n        // `reverse.remove`'s response will never arrive\n        // before we read all pending data from `videoStream`\n        this.adb.reverse.remove(this.address);\n    }\n}\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/adb/options/types.js\nclass AdbScrcpyOptionsBase {\n    raw;\n    get value() { return this.raw.value; }\n    set value(value) { this.raw.value = value; }\n    constructor(raw) {\n        this.raw = raw;\n    }\n    getDefaultValue() {\n        return this.raw.getDefaultValue();\n    }\n    formatServerArguments() {\n        return this.raw.formatServerArguments();\n    }\n    getOutputEncoderNameRegex() {\n        return this.raw.getOutputEncoderNameRegex();\n    }\n    createVideoStreamTransformer() {\n        return this.raw.createVideoStreamTransformer();\n    }\n    getControlMessageTypes() {\n        return this.raw.getControlMessageTypes();\n    }\n    serializeBackOrScreenOnControlMessage(message) {\n        return this.raw.serializeBackOrScreenOnControlMessage(message);\n    }\n    serializeInjectScrollControlMessage(message) {\n        return this.raw.serializeInjectScrollControlMessage(message);\n    }\n}\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/adb/options/1_16.js\n\n\nclass AdbScrcpyOptions1_16 extends AdbScrcpyOptionsBase {\n    createConnection(adb) {\n        const options = {\n            // Old versions always have control stream no matter what the option is\n            // Pass `control: false` to `Connection` will disable the control stream\n            control: true,\n            sendDummyByte: true,\n            sendDeviceMeta: true,\n        };\n        if (this.value.tunnelForward) {\n            return new AdbScrcpyForwardConnection(adb, options);\n        }\n        else {\n            return new AdbScrcpyReverseConnection(adb, options);\n        }\n    }\n}\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/adb/options/1_22.js\n\n\nclass AdbScrcpyOptions1_22 extends AdbScrcpyOptions1_16 {\n    createConnection(adb) {\n        const options = {\n            ...this.getDefaultValue(),\n            ...this.value,\n        };\n        if (this.value.tunnelForward) {\n            return new AdbScrcpyForwardConnection(adb, options);\n        }\n        else {\n            return new AdbScrcpyReverseConnection(adb, options);\n        }\n    }\n}\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/adb/options/index.js\n\n\n\n\n// EXTERNAL MODULE: ../../libraries/struct/esm/index.js + 15 modules\nvar struct_esm = __webpack_require__(9229);\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/control/type.js\n// https://github.com/Genymobile/scrcpy/blob/fa5b2a29e983a46b49531def9cf3d80c40c3de37/app/src/control_msg.h#L23\n// For their message bodies, see https://github.com/Genymobile/scrcpy/blob/5c62f3419d252d10cd8c9cbb7c918b358b81f2d0/app/src/control_msg.c#L92\n// Their IDs change between versions, so always use `options.getControlMessageTypes()`\nvar ScrcpyControlMessageType;\n(function (ScrcpyControlMessageType) {\n    ScrcpyControlMessageType[ScrcpyControlMessageType[\"InjectKeyCode\"] = 0] = \"InjectKeyCode\";\n    ScrcpyControlMessageType[ScrcpyControlMessageType[\"InjectText\"] = 1] = \"InjectText\";\n    ScrcpyControlMessageType[ScrcpyControlMessageType[\"InjectTouch\"] = 2] = \"InjectTouch\";\n    ScrcpyControlMessageType[ScrcpyControlMessageType[\"InjectScroll\"] = 3] = \"InjectScroll\";\n    ScrcpyControlMessageType[ScrcpyControlMessageType[\"BackOrScreenOn\"] = 4] = \"BackOrScreenOn\";\n    ScrcpyControlMessageType[ScrcpyControlMessageType[\"ExpandNotificationPanel\"] = 5] = \"ExpandNotificationPanel\";\n    ScrcpyControlMessageType[ScrcpyControlMessageType[\"ExpandSettingPanel\"] = 6] = \"ExpandSettingPanel\";\n    ScrcpyControlMessageType[ScrcpyControlMessageType[\"CollapseNotificationPanel\"] = 7] = \"CollapseNotificationPanel\";\n    ScrcpyControlMessageType[ScrcpyControlMessageType[\"GetClipboard\"] = 8] = \"GetClipboard\";\n    ScrcpyControlMessageType[ScrcpyControlMessageType[\"SetClipboard\"] = 9] = \"SetClipboard\";\n    ScrcpyControlMessageType[ScrcpyControlMessageType[\"SetScreenPowerMode\"] = 10] = \"SetScreenPowerMode\";\n    ScrcpyControlMessageType[ScrcpyControlMessageType[\"RotateDevice\"] = 11] = \"RotateDevice\";\n})(ScrcpyControlMessageType = ScrcpyControlMessageType || (ScrcpyControlMessageType = {}));\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/control/inject-keycode.js\n\n\nvar AndroidKeyEventAction;\n(function (AndroidKeyEventAction) {\n    AndroidKeyEventAction[AndroidKeyEventAction[\"Down\"] = 0] = \"Down\";\n    AndroidKeyEventAction[AndroidKeyEventAction[\"Up\"] = 1] = \"Up\";\n})(AndroidKeyEventAction = AndroidKeyEventAction || (AndroidKeyEventAction = {}));\n// https://github.com/Genymobile/scrcpy/blob/cabb102a04153f9c237b18257d3269a058558c63/app/src/android/keycodes.h#L26\nvar AndroidKeyCode;\n(function (AndroidKeyCode) {\n    AndroidKeyCode[AndroidKeyCode[\"Home\"] = 3] = \"Home\";\n    AndroidKeyCode[AndroidKeyCode[\"Back\"] = 4] = \"Back\";\n    AndroidKeyCode[AndroidKeyCode[\"VolumeUp\"] = 24] = \"VolumeUp\";\n    AndroidKeyCode[AndroidKeyCode[\"VolumeDown\"] = 25] = \"VolumeDown\";\n    AndroidKeyCode[AndroidKeyCode[\"A\"] = 29] = \"A\";\n    AndroidKeyCode[AndroidKeyCode[\"B\"] = 30] = \"B\";\n    AndroidKeyCode[AndroidKeyCode[\"C\"] = 31] = \"C\";\n    AndroidKeyCode[AndroidKeyCode[\"D\"] = 32] = \"D\";\n    AndroidKeyCode[AndroidKeyCode[\"E\"] = 33] = \"E\";\n    AndroidKeyCode[AndroidKeyCode[\"F\"] = 34] = \"F\";\n    AndroidKeyCode[AndroidKeyCode[\"G\"] = 35] = \"G\";\n    AndroidKeyCode[AndroidKeyCode[\"H\"] = 36] = \"H\";\n    AndroidKeyCode[AndroidKeyCode[\"I\"] = 37] = \"I\";\n    AndroidKeyCode[AndroidKeyCode[\"J\"] = 38] = \"J\";\n    AndroidKeyCode[AndroidKeyCode[\"K\"] = 39] = \"K\";\n    AndroidKeyCode[AndroidKeyCode[\"L\"] = 40] = \"L\";\n    AndroidKeyCode[AndroidKeyCode[\"M\"] = 41] = \"M\";\n    AndroidKeyCode[AndroidKeyCode[\"N\"] = 42] = \"N\";\n    AndroidKeyCode[AndroidKeyCode[\"O\"] = 43] = \"O\";\n    AndroidKeyCode[AndroidKeyCode[\"P\"] = 44] = \"P\";\n    AndroidKeyCode[AndroidKeyCode[\"Q\"] = 45] = \"Q\";\n    AndroidKeyCode[AndroidKeyCode[\"R\"] = 46] = \"R\";\n    AndroidKeyCode[AndroidKeyCode[\"S\"] = 47] = \"S\";\n    AndroidKeyCode[AndroidKeyCode[\"T\"] = 48] = \"T\";\n    AndroidKeyCode[AndroidKeyCode[\"U\"] = 49] = \"U\";\n    AndroidKeyCode[AndroidKeyCode[\"V\"] = 50] = \"V\";\n    AndroidKeyCode[AndroidKeyCode[\"W\"] = 51] = \"W\";\n    AndroidKeyCode[AndroidKeyCode[\"X\"] = 52] = \"X\";\n    AndroidKeyCode[AndroidKeyCode[\"Y\"] = 53] = \"Y\";\n    AndroidKeyCode[AndroidKeyCode[\"Z\"] = 54] = \"Z\";\n    AndroidKeyCode[AndroidKeyCode[\"Tab\"] = 61] = \"Tab\";\n    AndroidKeyCode[AndroidKeyCode[\"Space\"] = 62] = \"Space\";\n    AndroidKeyCode[AndroidKeyCode[\"Enter\"] = 66] = \"Enter\";\n    AndroidKeyCode[AndroidKeyCode[\"Delete\"] = 67] = \"Delete\";\n    AndroidKeyCode[AndroidKeyCode[\"VolumeMute\"] = 164] = \"VolumeMute\";\n    AndroidKeyCode[AndroidKeyCode[\"AppSwitch\"] = 187] = \"AppSwitch\";\n})(AndroidKeyCode = AndroidKeyCode || (AndroidKeyCode = {}));\nconst ScrcpyInjectKeyCodeControlMessage = new struct_esm/* default */.ZP()\n    .uint8('type', ScrcpyControlMessageType.InjectKeyCode)\n    .uint8('action', (0,struct_esm/* placeholder */.W$)())\n    .uint32('keyCode')\n    .uint32('repeat')\n    .uint32('metaState');\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/control/inject-text.js\n\n\nconst ScrcpyInjectTextControlMessage = new struct_esm/* default */.ZP()\n    .uint8('type', ScrcpyControlMessageType.InjectText)\n    .uint32('length')\n    .string('text', { lengthField: 'length' });\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/control/inject-touch.js\n\n\n// https://developer.android.com/reference/android/view/MotionEvent#constants_1\nvar AndroidMotionEventAction;\n(function (AndroidMotionEventAction) {\n    AndroidMotionEventAction[AndroidMotionEventAction[\"Down\"] = 0] = \"Down\";\n    AndroidMotionEventAction[AndroidMotionEventAction[\"Up\"] = 1] = \"Up\";\n    AndroidMotionEventAction[AndroidMotionEventAction[\"Move\"] = 2] = \"Move\";\n    AndroidMotionEventAction[AndroidMotionEventAction[\"Cancel\"] = 3] = \"Cancel\";\n    AndroidMotionEventAction[AndroidMotionEventAction[\"Outside\"] = 4] = \"Outside\";\n    AndroidMotionEventAction[AndroidMotionEventAction[\"PointerDown\"] = 5] = \"PointerDown\";\n    AndroidMotionEventAction[AndroidMotionEventAction[\"PointerUp\"] = 6] = \"PointerUp\";\n    AndroidMotionEventAction[AndroidMotionEventAction[\"HoverMove\"] = 7] = \"HoverMove\";\n    AndroidMotionEventAction[AndroidMotionEventAction[\"Scroll\"] = 8] = \"Scroll\";\n    AndroidMotionEventAction[AndroidMotionEventAction[\"HoverEnter\"] = 9] = \"HoverEnter\";\n    AndroidMotionEventAction[AndroidMotionEventAction[\"HoverExit\"] = 10] = \"HoverExit\";\n    AndroidMotionEventAction[AndroidMotionEventAction[\"ButtonPress\"] = 11] = \"ButtonPress\";\n    AndroidMotionEventAction[AndroidMotionEventAction[\"ButtonRelease\"] = 12] = \"ButtonRelease\";\n})(AndroidMotionEventAction = AndroidMotionEventAction || (AndroidMotionEventAction = {}));\nconst ScrcpyInjectTouchControlMessage = new struct_esm/* default */.ZP()\n    .uint8('type', ScrcpyControlMessageType.InjectTouch)\n    .uint8('action', (0,struct_esm/* placeholder */.W$)())\n    .uint64('pointerId')\n    .uint32('pointerX')\n    .uint32('pointerY')\n    .uint16('screenWidth')\n    .uint16('screenHeight')\n    .uint16('pressure')\n    .uint32('buttons');\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/control/rotate-device.js\n\n\nconst ScrcpyRotateDeviceControlMessage = new struct_esm/* default */.ZP()\n    .uint8('type', ScrcpyControlMessageType.RotateDevice);\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/control/set-screen-power-mode.js\n\n\n// https://cs.android.com/android/platform/superproject/+/master:frameworks/base/core/java/android/view/SurfaceControl.java;l=659;drc=20303e05bf73796124ab70a279cf849b61b97905\nvar AndroidScreenPowerMode;\n(function (AndroidScreenPowerMode) {\n    AndroidScreenPowerMode[AndroidScreenPowerMode[\"Off\"] = 0] = \"Off\";\n    AndroidScreenPowerMode[AndroidScreenPowerMode[\"Normal\"] = 2] = \"Normal\";\n})(AndroidScreenPowerMode = AndroidScreenPowerMode || (AndroidScreenPowerMode = {}));\nconst ScrcpySetScreenPowerModeControlMessage = new struct_esm/* default */.ZP()\n    .uint8('type', ScrcpyControlMessageType.SetScreenPowerMode)\n    .uint8('mode', (0,struct_esm/* placeholder */.W$)());\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/control/serializer.js\n\n\n\n\n\n\nclass ScrcpyControlMessageSerializer {\n    options;\n    /** Control message type values for current version of server */\n    types;\n    writer;\n    constructor(stream, options) {\n        this.options = options;\n        this.types = options.getControlMessageTypes();\n        this.writer = stream.getWriter();\n    }\n    getTypeValue(type) {\n        const value = this.types.indexOf(type);\n        if (value === -1) {\n            throw new Error('Not supported');\n        }\n        return value;\n    }\n    injectKeyCode(message) {\n        return this.writer.write(ScrcpyInjectKeyCodeControlMessage.serialize({\n            ...message,\n            type: this.getTypeValue(ScrcpyControlMessageType.InjectKeyCode),\n        }));\n    }\n    injectText(text) {\n        return this.writer.write(ScrcpyInjectTextControlMessage.serialize({\n            text,\n            type: this.getTypeValue(ScrcpyControlMessageType.InjectText),\n        }));\n    }\n    injectTouch(message) {\n        return this.writer.write(ScrcpyInjectTouchControlMessage.serialize({\n            ...message,\n            type: this.getTypeValue(ScrcpyControlMessageType.InjectTouch),\n        }));\n    }\n    injectScroll(message) {\n        return this.writer.write(this.options.serializeInjectScrollControlMessage({\n            ...message,\n            type: this.getTypeValue(ScrcpyControlMessageType.InjectScroll),\n        }));\n    }\n    async backOrScreenOn(action) {\n        const buffer = this.options.serializeBackOrScreenOnControlMessage({\n            action,\n            type: this.getTypeValue(ScrcpyControlMessageType.BackOrScreenOn),\n        });\n        if (buffer) {\n            return await this.writer.write(buffer);\n        }\n    }\n    setScreenPowerMode(mode) {\n        return this.writer.write(ScrcpySetScreenPowerModeControlMessage.serialize({\n            mode,\n            type: this.getTypeValue(ScrcpyControlMessageType.SetScreenPowerMode),\n        }));\n    }\n    rotateDevice() {\n        return this.writer.write(ScrcpyRotateDeviceControlMessage.serialize({\n            type: this.getTypeValue(ScrcpyControlMessageType.RotateDevice),\n        }));\n    }\n    close() {\n        return this.writer.close();\n    }\n}\n;\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/control/index.js\n\n\n\n\n\n\n\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/device-message/type.js\n// https://github.com/Genymobile/scrcpy/blob/41abe021e2a73efd4899b0efcd0b9eef9ec68c9b/server/src/main/java/com/genymobile/scrcpy/DeviceMessage.java#L5\nvar ScrcpyDeviceMessageType;\n(function (ScrcpyDeviceMessageType) {\n    ScrcpyDeviceMessageType[ScrcpyDeviceMessageType[\"Clipboard\"] = 0] = \"Clipboard\";\n    ScrcpyDeviceMessageType[ScrcpyDeviceMessageType[\"AckClipboard\"] = 1] = \"AckClipboard\";\n})(ScrcpyDeviceMessageType = ScrcpyDeviceMessageType || (ScrcpyDeviceMessageType = {}));\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/device-message/clipboard.js\n\n\nconst ScrcpyClipboardDeviceMessage = new struct_esm/* default */.ZP()\n    .uint32('length')\n    .string('content', { lengthField: 'length' })\n    .extra({ type: ScrcpyDeviceMessageType.Clipboard });\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/device-message/stream.js\n\n\nclass ScrcpyDeviceMessageDeserializeStream extends stream_extra_esm/* BufferedTransformStream */.pC {\n    constructor() {\n        super(async (stream) => {\n            const type = await stream.read(1);\n            switch (type[0]) {\n                case 0:\n                    return await ScrcpyClipboardDeviceMessage.deserialize(stream);\n                default:\n                    throw new Error('unknown control message type');\n            }\n        });\n    }\n}\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/device-message/index.js\n\n\n\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/options/1_16/codec-options.js\nfunction toDashCase(input) {\n    return input.replace(/([A-Z])/g, '-$1').toLowerCase();\n}\nconst CODEC_OPTION_TYPES = {\n    repeatPreviousFrameAfter: 'long',\n    maxPtsGapToEncoder: 'long',\n};\nclass CodecOptions {\n    value;\n    constructor(value) {\n        this.value = value;\n    }\n    toOptionValue() {\n        const entries = Object.entries(this.value)\n            .filter(([key, value]) => value !== undefined);\n        if (entries.length === 0) {\n            return undefined;\n        }\n        return entries\n            .map(([key, value]) => {\n            const type = CODEC_OPTION_TYPES[key];\n            return `${toDashCase(key)}${type ? `:${type}` : ''}=${value}`;\n        })\n            .join(',');\n    }\n}\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/options/types.js\nconst DEFAULT_SERVER_PATH = '/data/local/tmp/scrcpy-server.jar';\nfunction isScrcpyOptionValue(value) {\n    return typeof value === 'object' &&\n        value !== null &&\n        typeof value.toOptionValue === 'function';\n}\nfunction toScrcpyOptionValue(value, empty) {\n    if (isScrcpyOptionValue(value)) {\n        value = value.toOptionValue();\n    }\n    if (value === undefined) {\n        return empty;\n    }\n    return `${value}`;\n}\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/options/1_16/sps.js\n// cspell: ignore golomb\n// cspell: ignore qpprime\nclass BitReader {\n    buffer;\n    bytePosition = 0;\n    bitPosition = 0;\n    constructor(buffer) {\n        this.buffer = buffer;\n    }\n    read(length) {\n        let result = 0;\n        for (let i = 0; i < length; i += 1) {\n            result = (result << 1) | this.next();\n        }\n        return result;\n    }\n    next() {\n        const value = (this.buffer[this.bytePosition] >> (7 - this.bitPosition)) & 1;\n        this.bitPosition += 1;\n        if (this.bitPosition === 8) {\n            this.bytePosition += 1;\n            this.bitPosition = 0;\n        }\n        return value;\n    }\n    decodeExponentialGolombNumber() {\n        let length = 0;\n        while (this.next() === 0) {\n            length += 1;\n        }\n        if (length === 0) {\n            return 0;\n        }\n        return (1 << length | this.read(length)) - 1;\n    }\n}\nfunction* iterateNalu(buffer) {\n    // -1 means we haven't found the first start code\n    let start = -1;\n    let writeIndex = 0;\n    // How many `0x00`s in a row we have counted\n    let zeroCount = 0;\n    let inEmulation = false;\n    for (const byte of buffer) {\n        buffer[writeIndex] = byte;\n        writeIndex += 1;\n        if (inEmulation) {\n            if (byte > 0x03) {\n                // `0x00000304` or larger are invalid\n                throw new Error('Invalid data');\n            }\n            inEmulation = false;\n            continue;\n        }\n        if (byte == 0x00) {\n            zeroCount += 1;\n            continue;\n        }\n        const lastZeroCount = zeroCount;\n        zeroCount = 0;\n        if (start === -1) {\n            // 0x000001 is the start code\n            // But it can be preceded by any number of zeros\n            // So 2 is the minimal\n            if (lastZeroCount >= 2 && byte === 0x01) {\n                // Found start of first NAL unit\n                writeIndex = 0;\n                start = 0;\n                continue;\n            }\n            // Not begin with start code\n            throw new Error('Invalid data');\n        }\n        if (lastZeroCount < 2) {\n            // zero or one `0x00`s are acceptable\n            continue;\n        }\n        if (byte === 0x01) {\n            // Remove all leading `0x00`s and this `0x01`\n            writeIndex -= lastZeroCount + 1;\n            // Found another NAL unit\n            yield buffer.subarray(start, writeIndex);\n            start = writeIndex;\n            continue;\n        }\n        if (lastZeroCount > 2) {\n            // Too much `0x00`s\n            throw new Error('Invalid data');\n        }\n        switch (byte) {\n            case 0x02:\n                // Didn't find why, but 7.4.1 NAL unit semantics forbids `0x000002` appearing in NAL units\n                throw new Error('Invalid data');\n            case 0x03:\n                // `0x000003` is the \"emulation_prevention_three_byte\"\n                // `0x00000300`, `0x00000301`, `0x00000302` and `0x00000303` represent\n                // `0x000000`, `0x000001`, `0x000002` and `0x000003` respectively\n                // Remove current byte\n                writeIndex -= 1;\n                inEmulation = true;\n                break;\n            default:\n                // `0x000004` or larger are ok\n                break;\n        }\n    }\n    if (inEmulation || zeroCount !== 0) {\n        throw new Error('Invalid data');\n    }\n    yield buffer.subarray(start, writeIndex);\n}\n// 7.3.2.1.1 Sequence parameter set data syntax\nfunction parse_sequence_parameter_set(buffer) {\n    for (const nalu of iterateNalu(new Uint8Array(buffer))) {\n        const reader = new BitReader(nalu);\n        if (reader.next() !== 0) {\n            throw new Error('Invalid data');\n        }\n        const nal_ref_idc = reader.read(2);\n        const nal_unit_type = reader.read(5);\n        if (nal_unit_type !== 7) {\n            continue;\n        }\n        if (nal_ref_idc === 0) {\n            throw new Error('Invalid data');\n        }\n        const profile_idc = reader.read(8);\n        const constraint_set = reader.read(8);\n        const constraint_set_reader = new BitReader(new Uint8Array([constraint_set]));\n        const constraint_set0_flag = !!constraint_set_reader.next();\n        const constraint_set1_flag = !!constraint_set_reader.next();\n        const constraint_set2_flag = !!constraint_set_reader.next();\n        const constraint_set3_flag = !!constraint_set_reader.next();\n        const constraint_set4_flag = !!constraint_set_reader.next();\n        const constraint_set5_flag = !!constraint_set_reader.next();\n        // reserved_zero_2bits\n        if (constraint_set_reader.read(2) !== 0) {\n            throw new Error('Invalid data');\n        }\n        const level_idc = reader.read(8);\n        const seq_parameter_set_id = reader.decodeExponentialGolombNumber();\n        if (profile_idc === 100 || profile_idc === 110 ||\n            profile_idc === 122 || profile_idc === 244 || profile_idc === 44 ||\n            profile_idc === 83 || profile_idc === 86 || profile_idc === 118 ||\n            profile_idc === 128 || profile_idc === 138 || profile_idc === 139 ||\n            profile_idc === 134) {\n            const chroma_format_idc = reader.decodeExponentialGolombNumber();\n            if (chroma_format_idc === 3) {\n                // separate_colour_plane_flag\n                reader.next();\n            }\n            // bit_depth_luma_minus8\n            reader.decodeExponentialGolombNumber();\n            // bit_depth_chroma_minus8\n            reader.decodeExponentialGolombNumber();\n            // qpprime_y_zero_transform_bypass_flag\n            reader.next();\n            const seq_scaling_matrix_present_flag = !!reader.next();\n            if (seq_scaling_matrix_present_flag) {\n                const seq_scaling_list_present_flag = [];\n                for (let i = 0; i < ((chroma_format_idc !== 3) ? 8 : 12); i++) {\n                    seq_scaling_list_present_flag[i] = !!reader.next();\n                    if (seq_scaling_list_present_flag[i])\n                        if (i < 6) {\n                            // TODO\n                            // scaling_list( ScalingList4x4[ i ], 16,\n                            //               UseDefaultScalingMatrix4x4Flag[ i ])\n                        }\n                        else {\n                            // TODO\n                            // scaling_list( ScalingList8x8[ i − 6 ], 64,\n                            //               UseDefaultScalingMatrix8x8Flag[ i − 6 ] )\n                        }\n                }\n            }\n        }\n        // log2_max_frame_num_minus4\n        reader.decodeExponentialGolombNumber();\n        const pic_order_cnt_type = reader.decodeExponentialGolombNumber();\n        if (pic_order_cnt_type === 0) {\n            // log2_max_pic_order_cnt_lsb_minus4\n            reader.decodeExponentialGolombNumber();\n        }\n        else if (pic_order_cnt_type === 1) {\n            // delta_pic_order_always_zero_flag\n            reader.next();\n            // offset_for_non_ref_pic\n            reader.decodeExponentialGolombNumber();\n            // offset_for_top_to_bottom_field\n            reader.decodeExponentialGolombNumber();\n            const num_ref_frames_in_pic_order_cnt_cycle = reader.decodeExponentialGolombNumber();\n            const offset_for_ref_frame = [];\n            for (let i = 0; i < num_ref_frames_in_pic_order_cnt_cycle; i++) {\n                offset_for_ref_frame[i] = reader.decodeExponentialGolombNumber();\n            }\n        }\n        // max_num_ref_frames\n        reader.decodeExponentialGolombNumber();\n        // gaps_in_frame_num_value_allowed_flag\n        reader.next();\n        const pic_width_in_mbs_minus1 = reader.decodeExponentialGolombNumber();\n        const pic_height_in_map_units_minus1 = reader.decodeExponentialGolombNumber();\n        const frame_mbs_only_flag = reader.next();\n        if (!frame_mbs_only_flag) {\n            // mb_adaptive_frame_field_flag\n            reader.next();\n        }\n        // direct_8x8_inference_flag\n        reader.next();\n        const frame_cropping_flag = !!reader.next();\n        let frame_crop_left_offset;\n        let frame_crop_right_offset;\n        let frame_crop_top_offset;\n        let frame_crop_bottom_offset;\n        if (frame_cropping_flag) {\n            frame_crop_left_offset = reader.decodeExponentialGolombNumber();\n            frame_crop_right_offset = reader.decodeExponentialGolombNumber();\n            frame_crop_top_offset = reader.decodeExponentialGolombNumber();\n            frame_crop_bottom_offset = reader.decodeExponentialGolombNumber();\n        }\n        else {\n            frame_crop_left_offset = 0;\n            frame_crop_right_offset = 0;\n            frame_crop_top_offset = 0;\n            frame_crop_bottom_offset = 0;\n        }\n        const vui_parameters_present_flag = !!reader.next();\n        if (vui_parameters_present_flag) {\n            // TODO\n            // vui_parameters( )\n        }\n        return {\n            profile_idc,\n            constraint_set,\n            constraint_set0_flag,\n            constraint_set1_flag,\n            constraint_set2_flag,\n            constraint_set3_flag,\n            constraint_set4_flag,\n            constraint_set5_flag,\n            level_idc,\n            seq_parameter_set_id,\n            pic_width_in_mbs_minus1,\n            pic_height_in_map_units_minus1,\n            frame_mbs_only_flag,\n            frame_cropping_flag,\n            frame_crop_left_offset,\n            frame_crop_right_offset,\n            frame_crop_top_offset,\n            frame_crop_bottom_offset,\n        };\n    }\n    throw new Error('Invalid data');\n}\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/options/1_16/options.js\n\n\n\n\n\n\nvar ScrcpyLogLevel;\n(function (ScrcpyLogLevel) {\n    ScrcpyLogLevel[\"Verbose\"] = \"verbose\";\n    ScrcpyLogLevel[\"Debug\"] = \"debug\";\n    ScrcpyLogLevel[\"Info\"] = \"info\";\n    ScrcpyLogLevel[\"Warn\"] = \"warn\";\n    ScrcpyLogLevel[\"Error\"] = \"error\";\n})(ScrcpyLogLevel = ScrcpyLogLevel || (ScrcpyLogLevel = {}));\nvar ScrcpyVideoOrientation;\n(function (ScrcpyVideoOrientation) {\n    ScrcpyVideoOrientation[ScrcpyVideoOrientation[\"Initial\"] = -2] = \"Initial\";\n    ScrcpyVideoOrientation[ScrcpyVideoOrientation[\"Unlocked\"] = -1] = \"Unlocked\";\n    ScrcpyVideoOrientation[ScrcpyVideoOrientation[\"Portrait\"] = 0] = \"Portrait\";\n    ScrcpyVideoOrientation[ScrcpyVideoOrientation[\"Landscape\"] = 1] = \"Landscape\";\n    ScrcpyVideoOrientation[ScrcpyVideoOrientation[\"PortraitFlipped\"] = 2] = \"PortraitFlipped\";\n    ScrcpyVideoOrientation[ScrcpyVideoOrientation[\"LandscapeFlipped\"] = 3] = \"LandscapeFlipped\";\n})(ScrcpyVideoOrientation = ScrcpyVideoOrientation || (ScrcpyVideoOrientation = {}));\nconst VideoPacket = new struct_esm/* default */.ZP()\n    .uint64('pts')\n    .uint32('size')\n    .uint8Array('data', { lengthField: 'size' });\nconst NO_PTS = BigInt(1) << BigInt(63);\nconst ScrcpyBackOrScreenOnControlMessage1_16 = new struct_esm/* default */.ZP()\n    .uint8('type', ScrcpyControlMessageType.BackOrScreenOn);\nconst ScrcpyInjectScrollControlMessage1_16 = new struct_esm/* default */.ZP()\n    .uint8('type', ScrcpyControlMessageType.InjectScroll)\n    .uint32('pointerX')\n    .uint32('pointerY')\n    .uint16('screenWidth')\n    .uint16('screenHeight')\n    .int32('scrollX')\n    .int32('scrollY');\nclass ScrcpyOptions1_16 {\n    value;\n    constructor(value) {\n        if (new.target === ScrcpyOptions1_16 &&\n            value.logLevel === ScrcpyLogLevel.Verbose) {\n            value.logLevel = ScrcpyLogLevel.Debug;\n        }\n        if (new.target === ScrcpyOptions1_16 &&\n            value.lockVideoOrientation === ScrcpyVideoOrientation.Initial) {\n            value.lockVideoOrientation = ScrcpyVideoOrientation.Unlocked;\n        }\n        this.value = value;\n    }\n    getArgumentOrder() {\n        return [\n            'logLevel',\n            'maxSize',\n            'bitRate',\n            'maxFps',\n            'lockVideoOrientation',\n            'tunnelForward',\n            'crop',\n            'sendFrameMeta',\n            'control',\n            'displayId',\n            'showTouches',\n            'stayAwake',\n            'codecOptions',\n            'encoderName',\n        ];\n    }\n    getDefaultValue() {\n        return {\n            logLevel: ScrcpyLogLevel.Debug,\n            maxSize: 0,\n            bitRate: 8000000,\n            maxFps: 0,\n            lockVideoOrientation: ScrcpyVideoOrientation.Unlocked,\n            tunnelForward: false,\n            crop: '-',\n            sendFrameMeta: true,\n            control: true,\n            displayId: 0,\n            showTouches: false,\n            stayAwake: false,\n            codecOptions: new CodecOptions({}),\n            encoderName: '-',\n        };\n    }\n    formatServerArguments() {\n        const defaults = this.getDefaultValue();\n        return this.getArgumentOrder()\n            .map(key => toScrcpyOptionValue(this.value[key] || defaults[key], '-'));\n    }\n    getOutputEncoderNameRegex() {\n        return /\\s+scrcpy --encoder-name '(.*?)'/;\n    }\n    createVideoStreamTransformer() {\n        // Optimized path for video frames only\n        if (this.value.sendFrameMeta === false) {\n            return new stream_extra_esm/* TransformStream */.GJ({\n                transform(chunk, controller) {\n                    controller.enqueue({\n                        type: 'frame',\n                        data: chunk,\n                    });\n                },\n            });\n        }\n        let header;\n        let deserializeStream = new stream_extra_esm/* StructDeserializeStream */.gL(VideoPacket);\n        return {\n            writable: deserializeStream.writable,\n            readable: deserializeStream.readable.pipeThrough(new stream_extra_esm/* TransformStream */.GJ({\n                transform(packet, controller) {\n                    if (packet.pts === NO_PTS) {\n                        const sequenceParameterSet = parse_sequence_parameter_set(packet.data.slice().buffer);\n                        const { profile_idc: profileIndex, constraint_set: constraintSet, level_idc: levelIndex, pic_width_in_mbs_minus1, pic_height_in_map_units_minus1, frame_mbs_only_flag, frame_crop_left_offset, frame_crop_right_offset, frame_crop_top_offset, frame_crop_bottom_offset, } = sequenceParameterSet;\n                        const encodedWidth = (pic_width_in_mbs_minus1 + 1) * 16;\n                        const encodedHeight = (pic_height_in_map_units_minus1 + 1) * (2 - frame_mbs_only_flag) * 16;\n                        const cropLeft = frame_crop_left_offset * 2;\n                        const cropRight = frame_crop_right_offset * 2;\n                        const cropTop = frame_crop_top_offset * 2;\n                        const cropBottom = frame_crop_bottom_offset * 2;\n                        const croppedWidth = encodedWidth - cropLeft - cropRight;\n                        const croppedHeight = encodedHeight - cropTop - cropBottom;\n                        header = packet.data;\n                        controller.enqueue({\n                            type: 'configuration',\n                            data: {\n                                profileIndex,\n                                constraintSet,\n                                levelIndex,\n                                encodedWidth,\n                                encodedHeight,\n                                cropLeft,\n                                cropRight,\n                                cropTop,\n                                cropBottom,\n                                croppedWidth,\n                                croppedHeight,\n                            }\n                        });\n                        return;\n                    }\n                    let frameData;\n                    if (header) {\n                        frameData = new Uint8Array(header.byteLength + packet.data.byteLength);\n                        frameData.set(header);\n                        frameData.set(packet.data, header.byteLength);\n                        header = undefined;\n                    }\n                    else {\n                        frameData = packet.data;\n                    }\n                    controller.enqueue({\n                        type: 'frame',\n                        pts: packet.pts,\n                        data: frameData,\n                    });\n                }\n            }))\n        };\n    }\n    getControlMessageTypes() {\n        return [\n            /*  0 */ ScrcpyControlMessageType.InjectKeyCode,\n            /*  1 */ ScrcpyControlMessageType.InjectText,\n            /*  2 */ ScrcpyControlMessageType.InjectTouch,\n            /*  3 */ ScrcpyControlMessageType.InjectScroll,\n            /*  4 */ ScrcpyControlMessageType.BackOrScreenOn,\n            /*  5 */ ScrcpyControlMessageType.ExpandNotificationPanel,\n            /*  6 */ ScrcpyControlMessageType.CollapseNotificationPanel,\n            /*  7 */ ScrcpyControlMessageType.GetClipboard,\n            /*  8 */ ScrcpyControlMessageType.SetClipboard,\n            /*  9 */ ScrcpyControlMessageType.SetScreenPowerMode,\n            /* 10 */ ScrcpyControlMessageType.RotateDevice,\n        ];\n    }\n    serializeBackOrScreenOnControlMessage(message) {\n        if (message.action === AndroidKeyEventAction.Down) {\n            return ScrcpyBackOrScreenOnControlMessage1_16.serialize(message);\n        }\n        return undefined;\n    }\n    serializeInjectScrollControlMessage(message) {\n        return ScrcpyInjectScrollControlMessage1_16.serialize(message);\n    }\n}\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/options/1_16/index.js\n\n\n\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/options/1_18.js\n\n\n\nconst ScrcpyBackOrScreenOnControlMessage1_18 = new struct_esm/* default */.ZP()\n    .fields(ScrcpyBackOrScreenOnControlMessage1_16)\n    .uint8('action', (0,struct_esm/* placeholder */.W$)());\nclass ScrcpyOptions1_18 extends ScrcpyOptions1_16 {\n    constructor(value) {\n        super(value);\n    }\n    getArgumentOrder() {\n        return super.getArgumentOrder().concat(['powerOffOnClose']);\n    }\n    getDefaultValue() {\n        return {\n            ...super.getDefaultValue(),\n            powerOffOnClose: false,\n        };\n    }\n    getOutputEncoderNameRegex() {\n        return /\\s+scrcpy --encoder '(.*?)'/;\n    }\n    getControlMessageTypes() {\n        /**\n         *  0 InjectKeycode\n         *  1 InjectText\n         *  2 InjectTouch\n         *  3 InjectScroll\n         *  4 BackOrScreenOn\n         *  5 ExpandNotificationPanel\n         *  6 ExpandSettingsPanel\n         *  7 CollapseNotificationPanel\n         *  8 GetClipboard\n         *  9 SetClipboard\n         * 10 SetScreenPowerMode\n         * 11 RotateDevice\n         */\n        const types = super.getControlMessageTypes();\n        types.splice(6, 0, ScrcpyControlMessageType.ExpandSettingPanel);\n        return types;\n    }\n    serializeBackOrScreenOnControlMessage(message) {\n        return ScrcpyBackOrScreenOnControlMessage1_18.serialize(message);\n    }\n}\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/options/1_21.js\n// cspell: ignore autosync\n\n\nfunction toSnakeCase(input) {\n    return input.replace(/([A-Z])/g, '_$1').toLowerCase();\n}\nclass ScrcpyOptions1_21 extends ScrcpyOptions1_18 {\n    constructor(init) {\n        super(init);\n    }\n    getDefaultValue() {\n        return {\n            ...super.getDefaultValue(),\n            clipboardAutosync: true,\n        };\n    }\n    formatServerArguments() {\n        // 1.21 changed the format of arguments\n        // So `getArgumentOrder()` is no longer needed\n        return Object.entries(this.value)\n            .map(([key, value]) => [key, toScrcpyOptionValue(value, undefined)])\n            .filter((pair) => pair[1] !== undefined)\n            .map(([key, value]) => `${toSnakeCase(key)}=${value}`);\n    }\n}\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/options/1_22.js\n\n\n\nconst ScrcpyInjectScrollControlMessage1_22 = new struct_esm/* default */.ZP()\n    .fields(ScrcpyInjectScrollControlMessage1_16)\n    .int32('buttons');\nclass ScrcpyOptions1_22 extends ScrcpyOptions1_21 {\n    constructor(init) {\n        if (init.rawVideoStream) {\n            // Set implied options for client-side processing\n            init.sendDeviceMeta = false;\n            init.sendFrameMeta = false;\n            init.sendDummyByte = false;\n        }\n        super(init);\n    }\n    getDefaultValue() {\n        return {\n            ...super.getDefaultValue(),\n            downsizeOnError: true,\n            sendDeviceMeta: true,\n            sendDummyByte: true,\n            rawVideoStream: false,\n        };\n    }\n    serializeInjectScrollControlMessage(message) {\n        return ScrcpyInjectScrollControlMessage1_22.serialize(message);\n    }\n}\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/options/1_23.js\n\n\nconst KEYFRAME_PTS = BigInt(1) << BigInt(62);\nclass ScrcpyOptions1_23 extends ScrcpyOptions1_22 {\n    constructor(init) {\n        super(init);\n    }\n    getDefaultValue() {\n        return {\n            ...super.getDefaultValue(),\n            cleanup: true,\n        };\n    }\n    createVideoStreamTransformer() {\n        const superStream = super.createVideoStreamTransformer();\n        return {\n            writable: superStream.writable,\n            readable: superStream.readable.pipeThrough(new stream_extra_esm/* TransformStream */.GJ({\n                transform(packet, controller) {\n                    if (packet.type !== 'frame') {\n                        controller.enqueue(packet);\n                        return;\n                    }\n                    if (packet.pts !== undefined && packet.pts & KEYFRAME_PTS) {\n                        packet.keyframe = true;\n                        packet.pts &= ~KEYFRAME_PTS;\n                    }\n                    controller.enqueue(packet);\n                }\n            }))\n        };\n    }\n}\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/options/1_24.js\n\nclass ScrcpyOptions1_24 extends ScrcpyOptions1_23 {\n    constructor(init) {\n        super(init);\n    }\n    getDefaultValue() {\n        return {\n            ...super.getDefaultValue(),\n            powerOn: true,\n        };\n    }\n}\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/options/index.js\n\n\n\n\n\n\n\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/adb/client.js\n\n\n\n\n\nclass ArrayToStream extends stream_extra_esm/* ReadableStream */.Pz {\n    array;\n    index = 0;\n    constructor(array) {\n        super({\n            start: async () => {\n                await Promise.resolve();\n                this.array = array;\n            },\n            pull: (controller) => {\n                if (this.index < this.array.length) {\n                    controller.enqueue(this.array[this.index]);\n                    this.index += 1;\n                }\n                else {\n                    controller.close();\n                }\n            },\n        });\n    }\n}\nclass ConcatStream extends stream_extra_esm/* ReadableStream */.Pz {\n    streams;\n    index = 0;\n    reader;\n    constructor(...streams) {\n        super({\n            start: async (controller) => {\n                await Promise.resolve();\n                this.streams = streams;\n                this.advance(controller);\n            },\n            pull: async (controller) => {\n                const result = await this.reader.read();\n                if (!result.done) {\n                    controller.enqueue(result.value);\n                    return;\n                }\n                this.advance(controller);\n            }\n        });\n    }\n    advance(controller) {\n        if (this.index < this.streams.length) {\n            this.reader = this.streams[this.index].getReader();\n            this.index += 1;\n        }\n        else {\n            controller.close();\n        }\n    }\n}\nclass AdbScrcpyClient {\n    static pushServer(adb, path = DEFAULT_SERVER_PATH) {\n        let sync;\n        return new stream_extra_esm/* WrapWritableStream */.BF({\n            async start() {\n                sync = await adb.sync();\n                return sync.write(path);\n            },\n            async close() {\n                await sync.dispose();\n            },\n        });\n    }\n    static async start(adb, path, version, options) {\n        const connection = options.createConnection(adb);\n        let process;\n        try {\n            await connection.initialize();\n            process = await adb.subprocess.spawn([\n                // cspell: disable-next-line\n                `CLASSPATH=${path}`,\n                'app_process',\n                /* unused */ '/',\n                'com.genymobile.scrcpy.Server',\n                version,\n                ...options.formatServerArguments(),\n            ], {\n                // Scrcpy server doesn't use stderr,\n                // so disable Shell Protocol to simplify processing\n                protocols: [esm/* AdbSubprocessNoneProtocol */.vf],\n            });\n            const stdout = process.stdout\n                .pipeThrough(new stream_extra_esm/* DecodeUtf8Stream */.xU())\n                .pipeThrough(new stream_extra_esm/* SplitStringStream */.Jb('\\n'));\n            // Read stdout, otherwise `process.exit` won't resolve.\n            const output = [];\n            const abortController = new stream_extra_esm/* AbortController */.HS();\n            const pipe = stdout\n                .pipeTo(new stream_extra_esm/* WritableStream */.Vj({\n                write(chunk) {\n                    output.push(chunk);\n                }\n            }), {\n                signal: abortController.signal,\n                preventCancel: true,\n            })\n                .catch(() => { });\n            const result = await Promise.race([\n                process.exit,\n                connection.getStreams(),\n            ]);\n            if (typeof result === 'number') {\n                const error = new Error('scrcpy server exited prematurely');\n                error.output = output;\n                throw error;\n            }\n            abortController.abort();\n            await pipe;\n            const [videoStream, controlStream] = result;\n            return new AdbScrcpyClient(options, process, new ConcatStream(new ArrayToStream(output), stdout), videoStream, controlStream);\n        }\n        catch (e) {\n            await process?.kill();\n            throw e;\n        }\n        finally {\n            connection.dispose();\n        }\n    }\n    /**\n     * This method will modify the given `options`,\n     * so don't reuse it elsewhere.\n     */\n    static async getEncoders(adb, path, version, options) {\n        // Provide an invalid encoder name\n        // So the server will return all available encoders\n        options.value.encoderName = '_';\n        // Disable control for faster connection in 1.22+\n        options.value.control = false;\n        options.value.sendDeviceMeta = false;\n        options.value.sendDummyByte = false;\n        // Scrcpy server will open connections, before initializing encoder\n        // Thus although an invalid encoder name is given, the start process will success\n        const client = await AdbScrcpyClient.start(adb, path, version, options);\n        const encoderNameRegex = options.getOutputEncoderNameRegex();\n        const encoders = [];\n        await client.stdout.pipeTo(new stream_extra_esm/* WritableStream */.Vj({\n            write(line) {\n                const match = line.match(encoderNameRegex);\n                if (match) {\n                    encoders.push(match[1]);\n                }\n            },\n        }));\n        return encoders;\n    }\n    /**\n     * This method will modify the given `options`,\n     * so don't reuse it elsewhere.\n     */\n    static async getDisplays(adb, path, version, options) {\n        // Similar to `getEncoders`, pass an invalid option and parse the output\n        options.value.displayId = -1;\n        options.value.control = false;\n        options.value.sendDeviceMeta = false;\n        options.value.sendDummyByte = false;\n        try {\n            // Server will exit before opening connections when an invalid display id was given.\n            await AdbScrcpyClient.start(adb, path, version, options);\n        }\n        catch (e) {\n            if (e instanceof Error) {\n                const output = e.output;\n                const displayIdRegex = /\\s+scrcpy --display (\\d+)/;\n                const displays = [];\n                for (const line of output) {\n                    const match = line.match(displayIdRegex);\n                    if (match) {\n                        displays.push(Number.parseInt(match[1], 10));\n                    }\n                }\n                return displays;\n            }\n        }\n        throw new Error('failed to get displays');\n    }\n    process;\n    _stdout;\n    get stdout() { return this._stdout; }\n    get exit() { return this.process.exit; }\n    _screenWidth;\n    get screenWidth() { return this._screenWidth; }\n    _screenHeight;\n    get screenHeight() { return this._screenHeight; }\n    _videoStream;\n    get videoStream() { return this._videoStream; }\n    _controlMessageSerializer;\n    get controlMessageSerializer() { return this._controlMessageSerializer; }\n    _deviceMessageStream;\n    get deviceMessageStream() { return this._deviceMessageStream; }\n    constructor(options, process, stdout, videoStream, controlStream) {\n        this.process = process;\n        this._stdout = stdout;\n        this._videoStream = videoStream\n            .pipeThrough(options.createVideoStreamTransformer())\n            .pipeThrough(new stream_extra_esm/* InspectStream */.N7(packet => {\n            if (packet.type === 'configuration') {\n                this._screenWidth = packet.data.croppedWidth;\n                this._screenHeight = packet.data.croppedHeight;\n            }\n        }));\n        if (controlStream) {\n            this._controlMessageSerializer = new ScrcpyControlMessageSerializer(controlStream.writable, options);\n            this._deviceMessageStream = controlStream.readable.pipeThrough(new ScrcpyDeviceMessageDeserializeStream());\n        }\n    }\n    async close() {\n        await this.process.kill();\n    }\n}\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/adb/index.js\n\n\n\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/codec.js\n// From https://developer.android.com/reference/android/media/MediaCodecInfo.CodecProfileLevel\nvar AndroidCodecProfile;\n(function (AndroidCodecProfile) {\n    AndroidCodecProfile[AndroidCodecProfile[\"Baseline\"] = 1] = \"Baseline\";\n    AndroidCodecProfile[AndroidCodecProfile[\"Main\"] = 2] = \"Main\";\n    AndroidCodecProfile[AndroidCodecProfile[\"Extended\"] = 4] = \"Extended\";\n    AndroidCodecProfile[AndroidCodecProfile[\"High\"] = 8] = \"High\";\n    AndroidCodecProfile[AndroidCodecProfile[\"High10\"] = 16] = \"High10\";\n    AndroidCodecProfile[AndroidCodecProfile[\"High422\"] = 32] = \"High422\";\n    AndroidCodecProfile[AndroidCodecProfile[\"High444\"] = 64] = \"High444\";\n    AndroidCodecProfile[AndroidCodecProfile[\"ConstrainedBaseline\"] = 65536] = \"ConstrainedBaseline\";\n    AndroidCodecProfile[AndroidCodecProfile[\"ConstrainedHigh\"] = 524288] = \"ConstrainedHigh\";\n})(AndroidCodecProfile = AndroidCodecProfile || (AndroidCodecProfile = {}));\nvar AndroidCodecLevel;\n(function (AndroidCodecLevel) {\n    AndroidCodecLevel[AndroidCodecLevel[\"Level1\"] = 1] = \"Level1\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level1b\"] = 2] = \"Level1b\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level11\"] = 4] = \"Level11\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level12\"] = 8] = \"Level12\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level13\"] = 16] = \"Level13\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level2\"] = 32] = \"Level2\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level21\"] = 64] = \"Level21\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level22\"] = 128] = \"Level22\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level3\"] = 256] = \"Level3\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level31\"] = 512] = \"Level31\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level32\"] = 1024] = \"Level32\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level4\"] = 2048] = \"Level4\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level41\"] = 4096] = \"Level41\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level42\"] = 8192] = \"Level42\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level5\"] = 16384] = \"Level5\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level51\"] = 32768] = \"Level51\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level52\"] = 65536] = \"Level52\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level6\"] = 131072] = \"Level6\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level61\"] = 262144] = \"Level61\";\n    AndroidCodecLevel[AndroidCodecLevel[\"Level62\"] = 524288] = \"Level62\";\n})(AndroidCodecLevel = AndroidCodecLevel || (AndroidCodecLevel = {}));\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/esm/index.js\n\n\n\n\n\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy-decoder-tinyh264/esm/wrapper.js\n\n\nlet worker;\nlet workerReady = false;\nconst pendingResolvers = [];\nlet streamId = 0;\nconst PICTURE_READY_SUBSCRIPTIONS = new Map();\nfunction subscribePictureReady(streamId, handler) {\n    PICTURE_READY_SUBSCRIPTIONS.set(streamId, handler);\n    return {\n        dispose() {\n            PICTURE_READY_SUBSCRIPTIONS.delete(streamId);\n        }\n    };\n}\nclass TinyH264Wrapper extends event_esm/* AutoDisposable */.Xn {\n    streamId;\n    pictureReadyEvent = new event_esm/* EventEmitter */.vp();\n    get onPictureReady() { return this.pictureReadyEvent.event; }\n    constructor(streamId) {\n        super();\n        this.streamId = streamId;\n        this.addDisposable(subscribePictureReady(streamId, this.handlePictureReady));\n    }\n    handlePictureReady = (e) => {\n        this.pictureReadyEvent.fire(e);\n    };\n    feed(data) {\n        worker.postMessage({\n            type: 'decode',\n            data: data,\n            offset: 0,\n            length: data.byteLength,\n            renderStateId: this.streamId,\n        }, [data]);\n    }\n    dispose() {\n        super.dispose();\n        worker.postMessage({\n            type: 'release',\n            renderStateId: this.streamId,\n        });\n    }\n}\nfunction createTinyH264Wrapper() {\n    if (!worker) {\n        worker = new Worker(__webpack_require__.tu(new URL(/* worker import */ __webpack_require__.p + __webpack_require__.u(292), __webpack_require__.b)));\n        worker.addEventListener('message', (e) => {\n            const { data } = e;\n            switch (data.type) {\n                case 'decoderReady':\n                    workerReady = true;\n                    for (const resolver of pendingResolvers) {\n                        resolver.resolve(new TinyH264Wrapper(streamId));\n                        streamId += 1;\n                    }\n                    pendingResolvers.length = 0;\n                    break;\n                case 'pictureReady':\n                    PICTURE_READY_SUBSCRIPTIONS.get(data.renderStateId)?.(data);\n                    break;\n            }\n        });\n    }\n    if (!workerReady) {\n        const resolver = new async_esm/* PromiseResolver */.hP();\n        pendingResolvers.push(resolver);\n        return resolver.promise;\n    }\n    const decoder = new TinyH264Wrapper(streamId);\n    streamId += 1;\n    return Promise.resolve(decoder);\n}\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy-decoder-tinyh264/esm/index.js\n\n\n\n\nlet cachedInitializePromise;\nfunction initialize() {\n    if (!cachedInitializePromise) {\n        cachedInitializePromise = Promise.all([__webpack_require__.e(/* import() */ 118).then(__webpack_require__.t.bind(__webpack_require__, 6118, 19)), __webpack_require__.e(/* import() */ 337).then(__webpack_require__.t.bind(__webpack_require__, 6337, 19))]).then(([YuvBuffer, { default: YuvCanvas }]) => ({\n            YuvBuffer, YuvCanvas\n        }));\n    }\n    return cachedInitializePromise;\n}\nclass TinyH264Decoder {\n    maxProfile = AndroidCodecProfile.Baseline;\n    maxLevel = AndroidCodecLevel.Level4;\n    _renderer;\n    get renderer() { return this._renderer; }\n    _frameRendered = 0;\n    get frameRendered() { return this._frameRendered; }\n    _writable;\n    get writable() { return this._writable; }\n    _yuvCanvas;\n    _initializer;\n    constructor() {\n        initialize();\n        this._renderer = document.createElement('canvas');\n        this._writable = new stream_extra_esm/* WritableStream */.Vj({\n            write: async (packet) => {\n                switch (packet.type) {\n                    case 'configuration':\n                        this.configure(packet.data);\n                        break;\n                    case 'frame':\n                        if (!this._initializer) {\n                            throw new Error('Decoder not initialized');\n                        }\n                        const wrapper = await this._initializer.promise;\n                        wrapper.feed(packet.data.slice().buffer);\n                        break;\n                }\n            }\n        });\n    }\n    async configure(config) {\n        this.dispose();\n        this._initializer = new async_esm/* PromiseResolver */.hP();\n        const { YuvBuffer, YuvCanvas } = await initialize();\n        if (!this._yuvCanvas) {\n            this._yuvCanvas = YuvCanvas.attach(this._renderer);\n            ;\n        }\n        const { encodedWidth, encodedHeight } = config;\n        const chromaWidth = encodedWidth / 2;\n        const chromaHeight = encodedHeight / 2;\n        this._renderer.width = config.croppedWidth;\n        this._renderer.height = config.croppedHeight;\n        const format = YuvBuffer.format({\n            width: encodedWidth,\n            height: encodedHeight,\n            chromaWidth,\n            chromaHeight,\n            cropLeft: config.cropLeft,\n            cropTop: config.cropTop,\n            cropWidth: config.croppedWidth,\n            cropHeight: config.croppedHeight,\n            displayWidth: config.croppedWidth,\n            displayHeight: config.croppedHeight,\n        });\n        const wrapper = await createTinyH264Wrapper();\n        this._initializer.resolve(wrapper);\n        const uPlaneOffset = encodedWidth * encodedHeight;\n        const vPlaneOffset = uPlaneOffset + chromaWidth * chromaHeight;\n        wrapper.onPictureReady(({ data }) => {\n            this._frameRendered += 1;\n            const array = new Uint8Array(data);\n            const frame = YuvBuffer.frame(format, YuvBuffer.lumaPlane(format, array, encodedWidth, 0), YuvBuffer.chromaPlane(format, array, chromaWidth, uPlaneOffset), YuvBuffer.chromaPlane(format, array, chromaWidth, vPlaneOffset));\n            this._yuvCanvas.drawFrame(frame);\n        });\n    }\n    dispose() {\n        this._initializer?.promise.then(wrapper => wrapper.dispose());\n        this._initializer = undefined;\n    }\n}\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy-decoder-webcodecs/esm/index.js\n\nfunction toHex(value) {\n    return value.toString(16).padStart(2, '0').toUpperCase();\n}\nclass WebCodecsDecoder {\n    // Usually, browsers can decode most configurations,\n    // So let device choose best profile and level for itself.\n    maxProfile = undefined;\n    maxLevel = undefined;\n    _writable;\n    get writable() { return this._writable; }\n    _renderer;\n    get renderer() { return this._renderer; }\n    _frameRendered = 0;\n    get frameRendered() { return this._frameRendered; }\n    context;\n    decoder;\n    // Limit FPS to system refresh rate\n    lastFrame;\n    animationFrame = 0;\n    constructor() {\n        this._renderer = document.createElement('canvas');\n        this.context = this._renderer.getContext('2d');\n        this.decoder = new VideoDecoder({\n            output: (frame) => {\n                if (this.lastFrame) {\n                    this.lastFrame.close();\n                }\n                this.lastFrame = frame;\n                if (!this.animationFrame) {\n                    // Start render loop on first frame\n                    this.render();\n                }\n            },\n            error() { },\n        });\n        this._writable = new stream_extra_esm/* WritableStream */.Vj({\n            write: async (packet) => {\n                switch (packet.type) {\n                    case 'configuration':\n                        this.configure(packet.data);\n                        break;\n                    case 'frame':\n                        this.decoder.decode(new EncodedVideoChunk({\n                            // Treat `undefined` as `key`, otherwise won't decode.\n                            type: packet.keyframe === false ? 'delta' : 'key',\n                            timestamp: 0,\n                            data: packet.data,\n                        }));\n                        break;\n                }\n            }\n        });\n    }\n    render = () => {\n        if (this.lastFrame) {\n            this._frameRendered += 1;\n            this.context.drawImage(this.lastFrame, 0, 0);\n            this.lastFrame.close();\n            this.lastFrame = undefined;\n        }\n        this.animationFrame = requestAnimationFrame(this.render);\n    };\n    configure(config) {\n        const { profileIndex, constraintSet, levelIndex } = config;\n        this._renderer.width = config.croppedWidth;\n        this._renderer.height = config.croppedHeight;\n        // https://www.rfc-editor.org/rfc/rfc6381#section-3.3\n        // ISO Base Media File Format Name Space\n        const codec = `avc1.${[profileIndex, constraintSet, levelIndex].map(toHex).join('')}`;\n        this.decoder.configure({\n            codec: codec,\n            optimizeForLatency: true,\n        });\n    }\n    dispose() {\n        cancelAnimationFrame(this.animationFrame);\n        this.decoder.close();\n    }\n}\n\n;// CONCATENATED MODULE: ../../libraries/scrcpy/bin/version.js\n/* harmony default export */ var version = ('1.24');\n// EXTERNAL MODULE: ./src/components/index.ts + 16 modules\nvar components = __webpack_require__(4347);\n// EXTERNAL MODULE: ./src/state/index.ts + 1 modules\nvar state = __webpack_require__(2344);\n// EXTERNAL MODULE: ./src/utils/index.ts + 4 modules\nvar utils = __webpack_require__(5155);\n;// CONCATENATED MODULE: ./src/pages/scrcpy.tsx\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst SERVER_URL = /* asset import */ new __webpack_require__.U(__webpack_require__(4439));\nclass FetchWithProgress {\n    get downloaded() {\n        return this._downloaded;\n    }\n    get total() {\n        return this._total;\n    }\n    get onProgress() {\n        return this.progressEvent.event;\n    }\n    async fetch(url) {\n        const response = await window.fetch(url);\n        var ref;\n        this._total = Number.parseInt((ref = response.headers.get(\"Content-Length\")) !== null && ref !== void 0 ? ref : \"0\", 10);\n        this.progressEvent.fire([\n            this._downloaded,\n            this._total\n        ]);\n        const reader = response.body.getReader();\n        const chunks = [];\n        while(true){\n            const result = await reader.read();\n            if (result.done) {\n                break;\n            }\n            chunks.push(result.value);\n            this._downloaded += result.value.byteLength;\n            this.progressEvent.fire([\n                this._downloaded,\n                this._total\n            ]);\n        }\n        this._total = chunks.reduce((result, item)=>result + item.byteLength, 0);\n        const result1 = new Uint8Array(this._total);\n        let position = 0;\n        for (const chunk of chunks){\n            result1.set(chunk, position);\n            position += chunk.byteLength;\n        }\n        return result1;\n    }\n    constructor(url){\n        this._downloaded = 0;\n        this._total = 0;\n        this.progressEvent = new event_esm/* EventEmitter */.vp();\n        this.promise = this.fetch(url);\n    }\n}\nlet cachedValue;\nfunction fetchServer(onProgress) {\n    if (!cachedValue) {\n        cachedValue = new FetchWithProgress(SERVER_URL);\n        cachedValue.promise.catch((e)=>{\n            cachedValue = undefined;\n        });\n    }\n    if (onProgress) {\n        cachedValue.onProgress(onProgress);\n        onProgress([\n            cachedValue.downloaded,\n            cachedValue.total\n        ]);\n    }\n    return cachedValue.promise;\n}\nfunction clamp(value, min, max) {\n    if (value < min) {\n        return min;\n    }\n    if (value > max) {\n        return max;\n    }\n    return value;\n}\nconst useClasses = (0,makeStyles_esm/* makeStyles */.Z)({\n    labelRight: {\n        marginLeft: \"4px\"\n    },\n    video: {\n        transformOrigin: \"center center\"\n    }\n});\nconst SettingItem = (0,es/* observer */.Pi)(function SettingItem(param) {\n    let { definition , settings , onChange  } = param;\n    const classes = useClasses();\n    let label = /*#__PURE__*/ (0,jsx_runtime.jsxs)(Stack/* Stack */.K, {\n        horizontal: true,\n        verticalAlign: \"center\",\n        children: [\n            /*#__PURE__*/ (0,jsx_runtime.jsx)(\"span\", {\n                children: definition.label\n            }),\n            !!definition.description && /*#__PURE__*/ (0,jsx_runtime.jsx)(TooltipHost/* TooltipHost */.G, {\n                content: definition.description,\n                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Icon/* Icon */.J, {\n                    className: classes.labelRight,\n                    iconName: utils/* Icons.Info */.PJ.Info\n                })\n            }),\n            definition.labelExtra\n        ]\n    });\n    switch(definition.type){\n        case \"text\":\n            return /*#__PURE__*/ (0,jsx_runtime.jsx)(TextField/* TextField */.n, {\n                label: label,\n                placeholder: definition.placeholder,\n                value: settings[definition.key],\n                onChange: (e, value)=>onChange(definition.key, value)\n            });\n        case \"dropdown\":\n            return /*#__PURE__*/ (0,jsx_runtime.jsx)(Dropdown/* Dropdown */.L, {\n                label: label,\n                options: definition.options,\n                placeholder: definition.placeholder,\n                selectedKey: settings[definition.key],\n                onChange: (e, option)=>onChange(definition.key, option.key)\n            });\n        case \"toggle\":\n            return /*#__PURE__*/ (0,jsx_runtime.jsx)(Toggle/* Toggle */.Z, {\n                label: label,\n                checked: settings[definition.key],\n                onChange: (e, checked)=>onChange(definition.key, checked)\n            });\n        case \"number\":\n            return /*#__PURE__*/ (0,jsx_runtime.jsx)(SpinButton/* SpinButton */.k, {\n                label: definition.label,\n                labelPosition: positioning_types/* Position.top */.L.top,\n                min: definition.min,\n                max: definition.max,\n                step: definition.step,\n                value: settings[definition.key].toString(),\n                onChange: (e, value)=>onChange(definition.key, Number.parseInt(value, 10))\n            });\n    }\n});\nclass ScrcpyPageState {\n    get rotatedWidth() {\n        return scrcpy_state.rotate & 1 ? scrcpy_state.height : scrcpy_state.width;\n    }\n    get rotatedHeight() {\n        return scrcpy_state.rotate & 1 ? scrcpy_state.width : scrcpy_state.height;\n    }\n    async pushServer() {\n        const serverBuffer = await fetchServer();\n        await new stream_extra_esm/* ReadableStream */.Pz({\n            start (controller) {\n                controller.enqueue(serverBuffer);\n                controller.close();\n            }\n        }).pipeTo(AdbScrcpyClient.pushServer(state/* GlobalState.device */.q.device));\n    }\n    get commandBarItems() {\n        const result = [];\n        if (!this.running) {\n            result.push({\n                key: \"start\",\n                disabled: !state/* GlobalState.device */.q.device,\n                iconProps: {\n                    iconName: utils/* Icons.Play */.PJ.Play\n                },\n                text: \"Start\",\n                onClick: this.start\n            });\n        } else {\n            result.push({\n                key: \"stop\",\n                iconProps: {\n                    iconName: utils/* Icons.Stop */.PJ.Stop\n                },\n                text: \"Stop\",\n                onClick: this.stop\n            });\n        }\n        result.push({\n            key: \"fullscreen\",\n            disabled: !this.running,\n            iconProps: {\n                iconName: utils/* Icons.FullScreenMaximize */.PJ.FullScreenMaximize\n            },\n            iconOnly: true,\n            text: \"Fullscreen\",\n            onClick: ()=>{\n                var ref;\n                (ref = this.deviceView) === null || ref === void 0 ? void 0 : ref.enterFullscreen();\n            }\n        });\n        result.push({\n            key: \"volumeUp\",\n            disabled: !this.running,\n            iconProps: {\n                iconName: utils/* Icons.Speaker2 */.PJ.Speaker2\n            },\n            iconOnly: true,\n            text: \"Volume Up\",\n            onClick: async ()=>{\n                var ref, ref1;\n                // TODO: Auto repeat when holding\n                await ((ref = this.client) === null || ref === void 0 ? void 0 : ref.controlMessageSerializer.injectKeyCode({\n                    action: AndroidKeyEventAction.Down,\n                    keyCode: AndroidKeyCode.VolumeUp,\n                    repeat: 0,\n                    metaState: 0\n                }));\n                await ((ref1 = this.client) === null || ref1 === void 0 ? void 0 : ref1.controlMessageSerializer.injectKeyCode({\n                    action: AndroidKeyEventAction.Up,\n                    keyCode: AndroidKeyCode.VolumeUp,\n                    repeat: 0,\n                    metaState: 0\n                }));\n            }\n        }, {\n            key: \"volumeDown\",\n            disabled: !this.running,\n            iconProps: {\n                iconName: utils/* Icons.Speaker1 */.PJ.Speaker1\n            },\n            iconOnly: true,\n            text: \"Volume Down\",\n            onClick: async ()=>{\n                var ref, ref1;\n                await ((ref = this.client) === null || ref === void 0 ? void 0 : ref.controlMessageSerializer.injectKeyCode({\n                    action: AndroidKeyEventAction.Down,\n                    keyCode: AndroidKeyCode.VolumeDown,\n                    repeat: 0,\n                    metaState: 0\n                }));\n                await ((ref1 = this.client) === null || ref1 === void 0 ? void 0 : ref1.controlMessageSerializer.injectKeyCode({\n                    action: AndroidKeyEventAction.Up,\n                    keyCode: AndroidKeyCode.VolumeDown,\n                    repeat: 0,\n                    metaState: 0\n                }));\n            }\n        }, {\n            key: \"volumeMute\",\n            disabled: !this.running,\n            iconProps: {\n                iconName: utils/* Icons.SpeakerOff */.PJ.SpeakerOff\n            },\n            iconOnly: true,\n            text: \"Toggle Mute\",\n            onClick: async ()=>{\n                var ref, ref1;\n                await ((ref = this.client) === null || ref === void 0 ? void 0 : ref.controlMessageSerializer.injectKeyCode({\n                    action: AndroidKeyEventAction.Down,\n                    keyCode: AndroidKeyCode.VolumeMute,\n                    repeat: 0,\n                    metaState: 0\n                }));\n                await ((ref1 = this.client) === null || ref1 === void 0 ? void 0 : ref1.controlMessageSerializer.injectKeyCode({\n                    action: AndroidKeyEventAction.Up,\n                    keyCode: AndroidKeyCode.VolumeMute,\n                    repeat: 0,\n                    metaState: 0\n                }));\n            }\n        });\n        result.push({\n            key: \"rotateDevice\",\n            disabled: !this.running,\n            iconProps: {\n                iconName: utils/* Icons.Orientation */.PJ.Orientation\n            },\n            iconOnly: true,\n            text: \"Rotate Device\",\n            onClick: ()=>{\n                this.client.controlMessageSerializer.rotateDevice();\n            }\n        }, {\n            key: \"rotateVideoLeft\",\n            disabled: !this.running,\n            iconProps: {\n                iconName: utils/* Icons.RotateLeft */.PJ.RotateLeft\n            },\n            iconOnly: true,\n            text: \"Rotate Video Left\",\n            onClick: (0,mobx_esm/* action */.aD)(()=>{\n                this.rotate -= 1;\n                if (this.rotate < 0) {\n                    this.rotate = 3;\n                }\n            })\n        }, {\n            key: \"rotateVideoRight\",\n            disabled: !this.running,\n            iconProps: {\n                iconName: utils/* Icons.RotateRight */.PJ.RotateRight\n            },\n            iconOnly: true,\n            text: \"Rotate Video Right\",\n            onClick: (0,mobx_esm/* action */.aD)(()=>{\n                this.rotate = this.rotate + 1 & 3;\n            })\n        });\n        result.push({\n            key: \"turnScreenOff\",\n            disabled: !this.running,\n            iconProps: {\n                iconName: utils/* Icons.Lightbulb */.PJ.Lightbulb\n            },\n            iconOnly: true,\n            text: \"Turn Screen Off\",\n            onClick: ()=>{\n                this.client.controlMessageSerializer.setScreenPowerMode(AndroidScreenPowerMode.Off);\n            }\n        }, {\n            key: \"turnScreenOn\",\n            disabled: !this.running,\n            iconProps: {\n                iconName: utils/* Icons.LightbulbFilament */.PJ.LightbulbFilament\n            },\n            iconOnly: true,\n            text: \"Turn Screen On\",\n            onClick: ()=>{\n                this.client.controlMessageSerializer.setScreenPowerMode(AndroidScreenPowerMode.Normal);\n            }\n        });\n        if (this.running) {\n            result.push({\n                key: \"fps\",\n                text: \"FPS: \".concat(this.fps),\n                disabled: true\n            });\n        }\n        return result;\n    }\n    get commandBarFarItems() {\n        return [\n            {\n                key: \"NavigationBar\",\n                iconProps: {\n                    iconName: utils/* Icons.PanelBottom */.PJ.PanelBottom\n                },\n                checked: this.navigationBarVisible,\n                text: \"Navigation Bar\",\n                iconOnly: true,\n                onClick: (0,mobx_esm/* action */.aD)(()=>{\n                    this.navigationBarVisible = !this.navigationBarVisible;\n                })\n            },\n            {\n                key: \"Log\",\n                iconProps: {\n                    iconName: utils/* Icons.TextGrammarError */.PJ.TextGrammarError\n                },\n                checked: this.logVisible,\n                text: \"Log\",\n                iconOnly: true,\n                onClick: (0,mobx_esm/* action */.aD)(()=>{\n                    this.logVisible = !this.logVisible;\n                })\n            },\n            {\n                key: \"Settings\",\n                iconProps: {\n                    iconName: utils/* Icons.Settings */.PJ.Settings\n                },\n                checked: this.settingsVisible,\n                text: \"Settings\",\n                iconOnly: true,\n                onClick: (0,mobx_esm/* action */.aD)(()=>{\n                    this.settingsVisible = !this.settingsVisible;\n                })\n            },\n            {\n                key: \"DemoMode\",\n                iconProps: {\n                    iconName: utils/* Icons.Wand */.PJ.Wand\n                },\n                checked: this.demoModeVisible,\n                text: \"Demo Mode\",\n                iconOnly: true,\n                onClick: (0,mobx_esm/* action */.aD)(()=>{\n                    this.demoModeVisible = !this.demoModeVisible;\n                })\n            },\n            {\n                key: \"info\",\n                iconProps: {\n                    iconName: utils/* Icons.Info */.PJ.Info\n                },\n                iconOnly: true,\n                tooltipHostProps: {\n                    content: /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {\n                        children: [\n                            /*#__PURE__*/ (0,jsx_runtime.jsxs)(\"p\", {\n                                children: [\n                                    /*#__PURE__*/ (0,jsx_runtime.jsx)(components/* ExternalLink */.dL, {\n                                        href: \"https://github.com/Genymobile/scrcpy\",\n                                        spaceAfter: true,\n                                        children: \"Scrcpy\"\n                                    }),\n                                    \"developed by Genymobile can display the screen with low latency (1~2 frames) and control the device, all without root access.\"\n                                ]\n                            }),\n                            /*#__PURE__*/ (0,jsx_runtime.jsx)(\"p\", {\n                                children: \"This is a TypeScript implementation of the client part. Paired with official pre-built server binary.\"\n                            })\n                        ]\n                    }),\n                    calloutProps: {\n                        calloutMaxWidth: 300\n                    }\n                }\n            }\n        ];\n    }\n    get settingDefinitions() {\n        const result = [];\n        result.push({\n            key: \"powerOn\",\n            type: \"toggle\",\n            label: \"Turn device on when starting\"\n        }, {\n            key: \"turnScreenOff\",\n            type: \"toggle\",\n            label: \"Turn screen off when starting\"\n        }, {\n            key: \"stayAwake\",\n            type: \"toggle\",\n            label: \"Stay awake (if plugged in)\"\n        }, {\n            key: \"powerOffOnClose\",\n            type: \"toggle\",\n            label: \"Turn device off when exiting\"\n        });\n        result.push({\n            key: \"displayId\",\n            type: \"dropdown\",\n            label: \"Display\",\n            placeholder: \"Press refresh to update available displays\",\n            labelExtra: /*#__PURE__*/ (0,jsx_runtime.jsx)(IconButton/* IconButton */.h, {\n                iconProps: {\n                    iconName: utils/* Icons.ArrowClockwise */.PJ.ArrowClockwise\n                },\n                disabled: !state/* GlobalState.device */.q.device,\n                text: \"Refresh\",\n                onClick: this.updateDisplays\n            }),\n            options: this.displays.map((item)=>({\n                    key: item,\n                    text: item.toString()\n                }))\n        });\n        result.push({\n            key: \"crop\",\n            type: \"text\",\n            label: \"Crop\",\n            placeholder: \"W:H:X:Y\"\n        });\n        result.push({\n            key: \"maxSize\",\n            type: \"number\",\n            label: \"Max Resolution (longer side, 0 = unlimited)\",\n            min: 0,\n            max: 2560,\n            step: 50\n        });\n        result.push({\n            key: \"bitRate\",\n            type: \"number\",\n            label: \"Max Bit Rate\",\n            min: 100,\n            max: 100000000,\n            step: 100\n        });\n        result.push({\n            key: \"lockVideoOrientation\",\n            type: \"dropdown\",\n            label: \"Lock Video Orientation\",\n            options: [\n                {\n                    key: ScrcpyVideoOrientation.Unlocked,\n                    text: \"Unlocked\"\n                },\n                {\n                    key: ScrcpyVideoOrientation.Initial,\n                    text: \"Current\"\n                },\n                {\n                    key: ScrcpyVideoOrientation.Portrait,\n                    text: \"Portrait\"\n                },\n                {\n                    key: ScrcpyVideoOrientation.Landscape,\n                    text: \"Landscape\"\n                },\n                {\n                    key: ScrcpyVideoOrientation.PortraitFlipped,\n                    text: \"Portrait (Flipped)\"\n                },\n                {\n                    key: ScrcpyVideoOrientation.LandscapeFlipped,\n                    text: \"Landscape (Flipped)\"\n                }\n            ]\n        });\n        result.push({\n            key: \"encoderName\",\n            type: \"dropdown\",\n            label: \"Encoder\",\n            placeholder: \"Press refresh to update available encoders\",\n            labelExtra: /*#__PURE__*/ (0,jsx_runtime.jsx)(IconButton/* IconButton */.h, {\n                iconProps: {\n                    iconName: utils/* Icons.ArrowClockwise */.PJ.ArrowClockwise\n                },\n                disabled: !state/* GlobalState.device */.q.device,\n                text: \"Refresh\",\n                onClick: this.updateEncoders\n            }),\n            options: this.encoders.map((item)=>({\n                    key: item,\n                    text: item\n                }))\n        });\n        if (this.decoders.length > 1) {\n            result.push({\n                key: \"decoder\",\n                type: \"dropdown\",\n                label: \"Decoder\",\n                options: this.decoders.map((item)=>({\n                        key: item.key,\n                        text: item.name,\n                        data: item\n                    }))\n            });\n        }\n        result.push({\n            key: \"ignoreDecoderCodecArgs\",\n            type: \"toggle\",\n            label: \"Ignore decoder's codec arguments\",\n            description: \"Some decoders don't support all H.264 profile/levels, so they request the device to encode at their highest-supported codec. However, some super old devices may not support that codec so their encoders will fail to start. Use this option to let device choose the codec to be used.\"\n        });\n        result.push({\n            key: \"tunnelForward\",\n            type: \"toggle\",\n            label: \"Use forward connection\",\n            description: \"Android before version 9 has a bug that prevents reverse tunneling when using ADB over WiFi.\"\n        });\n        return result;\n    }\n    async stop() {\n        var ref;\n        // Request to close client first\n        await ((ref = this.client) === null || ref === void 0 ? void 0 : ref.close());\n        this.dispose();\n    }\n    dispose() {\n        var // Otherwise some packets may still arrive at decoder\n        ref;\n        (ref = this.decoder) === null || ref === void 0 ? void 0 : ref.dispose();\n        this.decoder = undefined;\n        this.fps = 0;\n        clearTimeout(this.fpsCounterIntervalId);\n        this.client = undefined;\n        this.running = false;\n    }\n    handleDeviceViewRef(element) {\n        this.deviceView = element;\n    }\n    handleRendererContainerRef(element) {\n        var ref;\n        this.rendererContainer = element;\n        (ref = this.rendererContainer) === null || ref === void 0 ? void 0 : ref.addEventListener(\"wheel\", this.handleWheel, {\n            passive: false\n        });\n    }\n    calculatePointerPosition(clientX, clientY) {\n        const viewRect = this.rendererContainer.getBoundingClientRect();\n        let pointerViewX = clamp((clientX - viewRect.x) / viewRect.width, 0, 1);\n        let pointerViewY = clamp((clientY - viewRect.y) / viewRect.height, 0, 1);\n        if (this.rotate & 1) {\n            [pointerViewX, pointerViewY] = [\n                pointerViewY,\n                pointerViewX\n            ];\n        }\n        switch(this.rotate){\n            case 1:\n                pointerViewY = 1 - pointerViewY;\n                break;\n            case 2:\n                pointerViewX = 1 - pointerViewX;\n                pointerViewY = 1 - pointerViewY;\n                break;\n            case 3:\n                pointerViewX = 1 - pointerViewX;\n                break;\n        }\n        return {\n            x: pointerViewX * this.width,\n            y: pointerViewY * this.height\n        };\n    }\n    constructor(){\n        this.running = false;\n        this.deviceView = null;\n        this.rendererContainer = null;\n        this.logVisible = false;\n        this.log = [];\n        this.settingsVisible = false;\n        this.demoModeVisible = false;\n        this.navigationBarVisible = true;\n        this.width = 0;\n        this.height = 0;\n        this.rotate = 0;\n        this.client = undefined;\n        this.encoders = [];\n        this.updateEncoders = async ()=>{\n            try {\n                await this.pushServer();\n                const encoders = await AdbScrcpyClient.getEncoders(state/* GlobalState.device */.q.device, DEFAULT_SERVER_PATH, version, new AdbScrcpyOptions1_22(new ScrcpyOptions1_24({\n                    logLevel: ScrcpyLogLevel.Debug,\n                    tunnelForward: this.settings.tunnelForward\n                })));\n                (0,mobx_esm/* runInAction */.z)(()=>{\n                    this.encoders = encoders;\n                    if (!this.settings.encoderName || !this.encoders.includes(this.settings.encoderName)) {\n                        this.settings.encoderName = this.encoders[0];\n                    }\n                });\n            } catch (e) {\n                state/* GlobalState.showErrorDialog */.q.showErrorDialog(e);\n            }\n        };\n        this.decoders = [\n            {\n                key: \"tinyh264\",\n                name: \"TinyH264 (Software)\",\n                Constructor: TinyH264Decoder\n            }\n        ];\n        this.decoder = undefined;\n        this.fpsCounterIntervalId = undefined;\n        this.fps = 0;\n        this.displays = [];\n        this.updateDisplays = async ()=>{\n            try {\n                await this.pushServer();\n                const displays = await AdbScrcpyClient.getDisplays(state/* GlobalState.device */.q.device, DEFAULT_SERVER_PATH, version, new AdbScrcpyOptions1_22(new ScrcpyOptions1_24({\n                    logLevel: ScrcpyLogLevel.Debug,\n                    tunnelForward: this.settings.tunnelForward\n                })));\n                (0,mobx_esm/* runInAction */.z)(()=>{\n                    this.displays = displays;\n                    if (!this.settings.displayId || !this.displays.includes(this.settings.displayId)) {\n                        this.settings.displayId = this.displays[0];\n                    }\n                });\n            } catch (e) {\n                state/* GlobalState.showErrorDialog */.q.showErrorDialog(e);\n            }\n        };\n        this.connecting = false;\n        this.serverTotalSize = 0;\n        this.serverDownloadedSize = 0;\n        this.debouncedServerDownloadedSize = 0;\n        this.serverDownloadSpeed = 0;\n        this.serverUploadedSize = 0;\n        this.debouncedServerUploadedSize = 0;\n        this.serverUploadSpeed = 0;\n        this.settings = {\n            maxSize: 1080,\n            bitRate: 4000000,\n            lockVideoOrientation: ScrcpyVideoOrientation.Unlocked,\n            displayId: 0,\n            crop: \"\",\n            powerOn: true\n        };\n        this.start = async ()=>{\n            if (!state/* GlobalState.device */.q.device) {\n                return;\n            }\n            try {\n                if (!this.settings.decoder) {\n                    throw new Error(\"No available decoder\");\n                }\n                (0,mobx_esm/* runInAction */.z)(()=>{\n                    this.serverTotalSize = 0;\n                    this.serverDownloadedSize = 0;\n                    this.debouncedServerDownloadedSize = 0;\n                    this.serverUploadedSize = 0;\n                    this.debouncedServerUploadedSize = 0;\n                    this.connecting = true;\n                });\n                let intervalId = setInterval((0,mobx_esm/* action */.aD)(()=>{\n                    this.serverDownloadSpeed = this.serverDownloadedSize - this.debouncedServerDownloadedSize;\n                    this.debouncedServerDownloadedSize = this.serverDownloadedSize;\n                }), 1000);\n                let serverBuffer;\n                try {\n                    serverBuffer = await fetchServer((0,mobx_esm/* action */.aD)((param)=>{\n                        let [downloaded, total] = param;\n                        this.serverDownloadedSize = downloaded;\n                        this.serverTotalSize = total;\n                    }));\n                    (0,mobx_esm/* runInAction */.z)(()=>{\n                        this.serverDownloadSpeed = this.serverDownloadedSize - this.debouncedServerDownloadedSize;\n                        this.debouncedServerDownloadedSize = this.serverDownloadedSize;\n                    });\n                } finally{\n                    clearInterval(intervalId);\n                }\n                intervalId = setInterval((0,mobx_esm/* action */.aD)(()=>{\n                    this.serverUploadSpeed = this.serverUploadedSize - this.debouncedServerUploadedSize;\n                    this.debouncedServerUploadedSize = this.serverUploadedSize;\n                }), 1000);\n                try {\n                    await new stream_extra_esm/* ReadableStream */.Pz({\n                        start (controller) {\n                            controller.enqueue(serverBuffer);\n                            controller.close();\n                        }\n                    }).pipeThrough(new stream_extra_esm/* ChunkStream */.Cc(esm/* ADB_SYNC_MAX_PACKET_SIZE */.j4)).pipeThrough(new utils/* ProgressStream */.hK((0,mobx_esm/* action */.aD)((progress)=>{\n                        this.serverUploadedSize = progress;\n                    }))).pipeTo(AdbScrcpyClient.pushServer(state/* GlobalState.device */.q.device));\n                    (0,mobx_esm/* runInAction */.z)(()=>{\n                        this.serverUploadSpeed = this.serverUploadedSize - this.debouncedServerUploadedSize;\n                        this.debouncedServerUploadedSize = this.serverUploadedSize;\n                    });\n                } finally{\n                    clearInterval(intervalId);\n                }\n                var ref;\n                const decoderDefinition = (ref = this.decoders.find((x)=>x.key === this.settings.decoder)) !== null && ref !== void 0 ? ref : this.decoders[0];\n                const decoder = new decoderDefinition.Constructor();\n                (0,mobx_esm/* runInAction */.z)(()=>{\n                    this.decoder = decoder;\n                    let lastFrameCount = 0;\n                    this.fpsCounterIntervalId = setInterval((0,mobx_esm/* action */.aD)(()=>{\n                        this.fps = decoder.frameRendered - lastFrameCount;\n                        lastFrameCount = decoder.frameRendered;\n                    }), 1000);\n                });\n                const options = new AdbScrcpyOptions1_22(new ScrcpyOptions1_24({\n                    logLevel: ScrcpyLogLevel.Debug,\n                    ...this.settings,\n                    sendDeviceMeta: false,\n                    sendDummyByte: false,\n                    codecOptions: !this.settings.ignoreDecoderCodecArgs ? new CodecOptions({\n                        profile: decoder.maxProfile,\n                        level: decoder.maxLevel\n                    }) : undefined\n                }));\n                (0,mobx_esm/* runInAction */.z)(()=>{\n                    this.log = [];\n                    this.log.push(\"[client] Server version: \".concat(version));\n                    this.log.push(\"[client] Server arguments: \".concat(options.formatServerArguments().join(\" \")));\n                });\n                const client = await AdbScrcpyClient.start(state/* GlobalState.device */.q.device, DEFAULT_SERVER_PATH, version, options);\n                client.stdout.pipeTo(new stream_extra_esm/* WritableStream */.Vj({\n                    write: (0,mobx_esm/* action */.aD)((line)=>{\n                        this.log.push(line);\n                    })\n                }));\n                client.videoStream.pipeThrough(new stream_extra_esm/* InspectStream */.N7((0,mobx_esm/* action */.aD)((packet)=>{\n                    if (packet.type === \"configuration\") {\n                        const { croppedWidth , croppedHeight  } = packet.data;\n                        this.log.push(\"[client] Video size changed: \".concat(croppedWidth, \"x\").concat(croppedHeight));\n                        this.width = croppedWidth;\n                        this.height = croppedHeight;\n                    }\n                }))).pipeTo(decoder.writable).catch(()=>{});\n                client.exit.then(this.dispose);\n                client.deviceMessageStream.pipeTo(new stream_extra_esm/* WritableStream */.Vj({\n                    write (message) {\n                        switch(message.type){\n                            case ScrcpyDeviceMessageType.Clipboard:\n                                window.navigator.clipboard.writeText(message.content);\n                                break;\n                        }\n                    }\n                })).catch(()=>{});\n                if (this.settings.turnScreenOff) {\n                    await client.controlMessageSerializer.setScreenPowerMode(AndroidScreenPowerMode.Off);\n                }\n                (0,mobx_esm/* runInAction */.z)(()=>{\n                    this.client = client;\n                    this.running = true;\n                });\n            } catch (e) {\n                state/* GlobalState.showErrorDialog */.q.showErrorDialog(e);\n            } finally{\n                (0,mobx_esm/* runInAction */.z)(()=>{\n                    this.connecting = false;\n                });\n            }\n        };\n        this.handleBackPointerDown = (e)=>{\n            if (!this.client) {\n                return;\n            }\n            if (e.button !== 0) {\n                return;\n            }\n            e.currentTarget.setPointerCapture(e.pointerId);\n            this.client.controlMessageSerializer.backOrScreenOn(AndroidKeyEventAction.Down);\n        };\n        this.handleBackPointerUp = (e)=>{\n            if (!this.client) {\n                return;\n            }\n            if (e.button !== 0) {\n                return;\n            }\n            this.client.controlMessageSerializer.backOrScreenOn(AndroidKeyEventAction.Up);\n        };\n        this.handleHomePointerDown = (e)=>{\n            if (!this.client) {\n                return;\n            }\n            if (e.button !== 0) {\n                return;\n            }\n            e.currentTarget.setPointerCapture(e.pointerId);\n            this.client.controlMessageSerializer.injectKeyCode({\n                action: AndroidKeyEventAction.Down,\n                keyCode: AndroidKeyCode.Home,\n                repeat: 0,\n                metaState: 0\n            });\n        };\n        this.handleHomePointerUp = (e)=>{\n            if (!this.client) {\n                return;\n            }\n            if (e.button !== 0) {\n                return;\n            }\n            this.client.controlMessageSerializer.injectKeyCode({\n                action: AndroidKeyEventAction.Up,\n                keyCode: AndroidKeyCode.Home,\n                repeat: 0,\n                metaState: 0\n            });\n        };\n        this.handleAppSwitchPointerDown = async (e)=>{\n            if (!this.client) {\n                return;\n            }\n            if (e.button !== 0) {\n                return;\n            }\n            e.currentTarget.setPointerCapture(e.pointerId);\n            this.client.controlMessageSerializer.injectKeyCode({\n                action: AndroidKeyEventAction.Down,\n                keyCode: AndroidKeyCode.AppSwitch,\n                repeat: 0,\n                metaState: 0\n            });\n        };\n        this.handleAppSwitchPointerUp = async (e)=>{\n            if (!this.client) {\n                return;\n            }\n            if (e.button !== 0) {\n                return;\n            }\n            this.client.controlMessageSerializer.injectKeyCode({\n                action: AndroidKeyEventAction.Up,\n                keyCode: AndroidKeyCode.AppSwitch,\n                repeat: 0,\n                metaState: 0\n            });\n        };\n        this.injectTouch = (action, e)=>{\n            if (!this.client) {\n                return;\n            }\n            const { x , y  } = this.calculatePointerPosition(e.clientX, e.clientY);\n            this.client.controlMessageSerializer.injectTouch({\n                action,\n                pointerId: e.pointerType === \"mouse\" ? BigInt(-1) : BigInt(e.pointerId),\n                screenWidth: this.client.screenWidth,\n                screenHeight: this.client.screenHeight,\n                pointerX: x,\n                pointerY: y,\n                pressure: e.pressure * 65535,\n                buttons: e.buttons\n            });\n        };\n        this.handlePointerDown = (e)=>{\n            this.rendererContainer.focus();\n            e.preventDefault();\n            e.currentTarget.setPointerCapture(e.pointerId);\n            this.injectTouch(AndroidMotionEventAction.Down, e);\n        };\n        this.handlePointerMove = (e)=>{\n            this.injectTouch(e.buttons === 0 ? AndroidMotionEventAction.HoverMove : AndroidMotionEventAction.Move, e);\n        };\n        this.handlePointerUp = (e)=>{\n            this.injectTouch(AndroidMotionEventAction.Up, e);\n        };\n        this.handleWheel = (e)=>{\n            if (!this.client) {\n                return;\n            }\n            e.preventDefault();\n            e.stopPropagation();\n            const { x , y  } = this.calculatePointerPosition(e.clientX, e.clientY);\n            this.client.controlMessageSerializer.injectScroll({\n                screenWidth: this.client.screenWidth,\n                screenHeight: this.client.screenHeight,\n                pointerX: x,\n                pointerY: y,\n                scrollX: -Math.sign(e.deltaX),\n                scrollY: -Math.sign(e.deltaY),\n                buttons: 0\n            });\n        };\n        this.handleContextMenu = (e)=>{\n            e.preventDefault();\n        };\n        this.handleKeyDown = async (e)=>{\n            if (!this.client) {\n                return;\n            }\n            const { key , code  } = e;\n            if (key.match(/^[!-`{-~]$/i)) {\n                this.client.controlMessageSerializer.injectText(key);\n                return;\n            }\n            const keyCode = {\n                Backspace: AndroidKeyCode.Delete,\n                Space: AndroidKeyCode.Space,\n                Enter: AndroidKeyCode.Enter\n            }[code];\n            if (keyCode) {\n                this.client.controlMessageSerializer.injectKeyCode({\n                    action: AndroidKeyEventAction.Down,\n                    keyCode,\n                    metaState: 0,\n                    repeat: 0\n                });\n                this.client.controlMessageSerializer.injectKeyCode({\n                    action: AndroidKeyEventAction.Up,\n                    keyCode,\n                    metaState: 0,\n                    repeat: 0\n                });\n            }\n        };\n        (0,mobx_esm/* makeAutoObservable */.ky)(this, {\n            decoders: mobx_esm/* observable.shallow */.LO.shallow,\n            settings: mobx_esm/* observable.deep */.LO.deep,\n            start: false,\n            stop: mobx_esm/* action.bound */.aD.bound,\n            dispose: mobx_esm/* action.bound */.aD.bound,\n            handleDeviceViewRef: mobx_esm/* action.bound */.aD.bound,\n            handleRendererContainerRef: mobx_esm/* action.bound */.aD.bound,\n            handleBackPointerDown: false,\n            handleBackPointerUp: false,\n            handleHomePointerDown: false,\n            handleHomePointerUp: false,\n            handleAppSwitchPointerDown: false,\n            handleAppSwitchPointerUp: false,\n            calculatePointerPosition: false,\n            injectTouch: false,\n            handlePointerDown: false,\n            handlePointerMove: false,\n            handlePointerUp: false,\n            handleWheel: false,\n            handleContextMenu: false,\n            handleKeyDown: false\n        });\n        (0,mobx_esm/* autorun */.EH)(()=>{\n            if (state/* GlobalState.device */.q.device) {\n                (0,mobx_esm/* runInAction */.z)(()=>{\n                    this.encoders = [];\n                    this.settings.encoderName = undefined;\n                    this.displays = [];\n                    this.settings.displayId = undefined;\n                });\n            } else {\n                this.dispose();\n            }\n        });\n        (0,mobx_esm/* autorun */.EH)(()=>{\n            if (this.rendererContainer && this.decoder) {\n                while(this.rendererContainer.firstChild){\n                    this.rendererContainer.firstChild.remove();\n                }\n                this.rendererContainer.appendChild(this.decoder.renderer);\n            }\n        });\n        (0,mobx_esm/* autorun */.EH)(()=>{\n            this.settings.decoder = this.decoders[0].key;\n        });\n        if ( true && typeof window.VideoDecoder === \"function\") {\n            setTimeout((0,mobx_esm/* action */.aD)(()=>{\n                this.decoders.unshift({\n                    key: \"webcodecs\",\n                    name: \"WebCodecs\",\n                    Constructor: WebCodecsDecoder\n                });\n            }), 0);\n        }\n    }\n}\nconst scrcpy_state = new ScrcpyPageState();\nconst ConnectionDialog = (0,es/* observer */.Pi)(()=>{\n    const layerHostId = (0,useId/* useId */.M)(\"layerHost\");\n    const [isClient, setIsClient] = (0,react.useState)(false);\n    (0,react.useEffect)(()=>{\n        setIsClient(true);\n    }, []);\n    if (!isClient) {\n        return null;\n    }\n    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,jsx_runtime.jsx)(LayerHost, {\n                id: layerHostId,\n                style: {\n                    position: \"absolute\",\n                    top: 0,\n                    bottom: 0,\n                    left: 0,\n                    right: 0,\n                    margin: 0,\n                    pointerEvents: \"none\"\n                }\n            }),\n            /*#__PURE__*/ (0,jsx_runtime.jsx)(Dialog/* Dialog */.V, {\n                hidden: !scrcpy_state.connecting,\n                modalProps: {\n                    layerProps: {\n                        hostId: layerHostId\n                    }\n                },\n                dialogContentProps: {\n                    title: \"Connecting...\"\n                },\n                children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(Stack/* Stack */.K, {\n                    tokens: utils/* CommonStackTokens */.WT,\n                    children: [\n                        /*#__PURE__*/ (0,jsx_runtime.jsx)(ProgressIndicator/* ProgressIndicator */.Y, {\n                            label: \"1. Downloading scrcpy server...\",\n                            percentComplete: scrcpy_state.serverTotalSize ? scrcpy_state.serverDownloadedSize / scrcpy_state.serverTotalSize : undefined,\n                            description: (0,utils/* formatSpeed */.CY)(scrcpy_state.debouncedServerDownloadedSize, scrcpy_state.serverTotalSize, scrcpy_state.serverDownloadSpeed)\n                        }),\n                        /*#__PURE__*/ (0,jsx_runtime.jsx)(ProgressIndicator/* ProgressIndicator */.Y, {\n                            label: \"2. Pushing scrcpy server to device...\",\n                            progressHidden: scrcpy_state.serverTotalSize === 0 || scrcpy_state.serverDownloadedSize !== scrcpy_state.serverTotalSize,\n                            percentComplete: scrcpy_state.serverUploadedSize / scrcpy_state.serverTotalSize,\n                            description: (0,utils/* formatSpeed */.CY)(scrcpy_state.debouncedServerUploadedSize, scrcpy_state.serverTotalSize, scrcpy_state.serverUploadSpeed)\n                        }),\n                        /*#__PURE__*/ (0,jsx_runtime.jsx)(ProgressIndicator/* ProgressIndicator */.Y, {\n                            label: \"3. Starting scrcpy server on device...\",\n                            progressHidden: scrcpy_state.serverTotalSize === 0 || scrcpy_state.serverUploadedSize !== scrcpy_state.serverTotalSize\n                        })\n                    ]\n                })\n            })\n        ]\n    });\n});\nconst NavigationBar = (0,es/* observer */.Pi)(function NavigationBar(param) {\n    let { className , style , children  } = param;\n    if (!scrcpy_state.navigationBarVisible) {\n        return /*#__PURE__*/ (0,jsx_runtime.jsx)(\"div\", {\n            className: className,\n            style: style,\n            children: children\n        });\n    }\n    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(Stack/* Stack */.K, {\n        className: className,\n        verticalFill: true,\n        horizontalAlign: \"center\",\n        style: {\n            height: \"40px\",\n            background: \"#999\",\n            ...style\n        },\n        children: [\n            children,\n            /*#__PURE__*/ (0,jsx_runtime.jsxs)(Stack/* Stack */.K, {\n                verticalFill: true,\n                horizontal: true,\n                style: {\n                    width: \"100%\",\n                    maxWidth: 300\n                },\n                horizontalAlign: \"space-evenly\",\n                verticalAlign: \"center\",\n                children: [\n                    /*#__PURE__*/ (0,jsx_runtime.jsx)(IconButton/* IconButton */.h, {\n                        iconProps: {\n                            iconName: utils/* Icons.Play */.PJ.Play\n                        },\n                        style: {\n                            transform: \"rotate(180deg)\",\n                            color: \"white\"\n                        },\n                        onPointerDown: scrcpy_state.handleBackPointerDown,\n                        onPointerUp: scrcpy_state.handleBackPointerUp\n                    }),\n                    /*#__PURE__*/ (0,jsx_runtime.jsx)(IconButton/* IconButton */.h, {\n                        iconProps: {\n                            iconName: utils/* Icons.Circle */.PJ.Circle\n                        },\n                        style: {\n                            color: \"white\"\n                        },\n                        onPointerDown: scrcpy_state.handleHomePointerDown,\n                        onPointerUp: scrcpy_state.handleHomePointerUp\n                    }),\n                    /*#__PURE__*/ (0,jsx_runtime.jsx)(IconButton/* IconButton */.h, {\n                        iconProps: {\n                            iconName: utils/* Icons.Stop */.PJ.Stop\n                        },\n                        style: {\n                            color: \"white\"\n                        },\n                        onPointerDown: scrcpy_state.handleAppSwitchPointerDown,\n                        onPointerUp: scrcpy_state.handleAppSwitchPointerUp\n                    })\n                ]\n            })\n        ]\n    });\n});\nconst Scrcpy = ()=>{\n    const classes = useClasses();\n    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(Stack/* Stack */.K, {\n        ...utils/* RouteStackProps */.LE,\n        children: [\n            /*#__PURE__*/ (0,jsx_runtime.jsx)((head_default()), {\n                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(\"title\", {\n                    children: \"Scrcpy - Android Web Toolbox\"\n                })\n            }),\n            /*#__PURE__*/ (0,jsx_runtime.jsx)(CommandBar/* CommandBar */.X, {\n                items: scrcpy_state.commandBarItems,\n                farItems: scrcpy_state.commandBarFarItems\n            }),\n            /*#__PURE__*/ (0,jsx_runtime.jsxs)(Stack/* Stack */.K, {\n                horizontal: true,\n                grow: true,\n                styles: {\n                    root: {\n                        height: 0\n                    }\n                },\n                children: [\n                    /*#__PURE__*/ (0,jsx_runtime.jsx)(components/* DeviceView */.wM, {\n                        ref: scrcpy_state.handleDeviceViewRef,\n                        width: scrcpy_state.rotatedWidth,\n                        height: scrcpy_state.rotatedHeight,\n                        BottomElement: NavigationBar,\n                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(\"div\", {\n                            ref: scrcpy_state.handleRendererContainerRef,\n                            tabIndex: -1,\n                            className: classes.video,\n                            style: {\n                                width: scrcpy_state.width,\n                                height: scrcpy_state.height,\n                                transform: \"translate(\".concat((scrcpy_state.rotatedWidth - scrcpy_state.width) / 2, \"px, \").concat((scrcpy_state.rotatedHeight - scrcpy_state.height) / 2, \"px) rotate(\").concat(scrcpy_state.rotate * 90, \"deg)\")\n                            },\n                            onPointerDown: scrcpy_state.handlePointerDown,\n                            onPointerMove: scrcpy_state.handlePointerMove,\n                            onPointerUp: scrcpy_state.handlePointerUp,\n                            onPointerCancel: scrcpy_state.handlePointerUp,\n                            onKeyDown: scrcpy_state.handleKeyDown,\n                            onContextMenu: scrcpy_state.handleContextMenu\n                        })\n                    }),\n                    /*#__PURE__*/ (0,jsx_runtime.jsx)(\"div\", {\n                        style: {\n                            padding: 12,\n                            overflow: \"hidden auto\",\n                            display: scrcpy_state.logVisible ? \"block\" : \"none\",\n                            width: 500,\n                            fontFamily: \"monospace\",\n                            overflowY: \"auto\",\n                            whiteSpace: \"pre-wrap\",\n                            wordWrap: \"break-word\"\n                        },\n                        children: scrcpy_state.log.map((line, index)=>/*#__PURE__*/ (0,jsx_runtime.jsx)(\"div\", {\n                                children: line\n                            }, index))\n                    }),\n                    /*#__PURE__*/ (0,jsx_runtime.jsxs)(\"div\", {\n                        style: {\n                            padding: 12,\n                            overflow: \"hidden auto\",\n                            display: scrcpy_state.settingsVisible ? \"block\" : \"none\",\n                            width: 300\n                        },\n                        children: [\n                            /*#__PURE__*/ (0,jsx_runtime.jsx)(\"div\", {\n                                children: \"Changes will take effect on next connection\"\n                            }),\n                            scrcpy_state.settingDefinitions.map((definition)=>/*#__PURE__*/ (0,jsx_runtime.jsx)(SettingItem, {\n                                    definition: definition,\n                                    settings: scrcpy_state.settings,\n                                    onChange: (0,mobx_esm/* action */.aD)((key, value)=>scrcpy_state.settings[key] = value)\n                                }, definition.key))\n                        ]\n                    }),\n                    /*#__PURE__*/ (0,jsx_runtime.jsx)(components/* DemoModePanel */.bq, {\n                        style: {\n                            display: scrcpy_state.demoModeVisible ? \"block\" : \"none\"\n                        }\n                    }),\n                    /*#__PURE__*/ (0,jsx_runtime.jsx)(ConnectionDialog, {})\n                ]\n            })\n        ]\n    });\n};\n/* harmony default export */ var scrcpy = ((0,es/* observer */.Pi)(Scrcpy));\n\n\n/***/ }),\n\n/***/ 4439:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\nmodule.exports = __webpack_require__.p + \"static/chunks/scrcpy-server.d406f4d14066a1d3\";\n\n/***/ })\n\n},\n/******/ function(__webpack_require__) { // webpackRuntimeModules\n/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }\n/******/ __webpack_require__.O(0, [81,774,888,179], function() { return __webpack_exec__(7452); });\n/******/ var __webpack_exports__ = __webpack_require__.O();\n/******/ _N_E = __webpack_exports__;\n/******/ }\n]);"],"names":["self","push","__unused_webpack_module","__unused_webpack_exports","__webpack_require__","window","__NEXT_P","__webpack_exports__","worker","cachedInitializePromise","cachedValue","r","d","scrcpy","ScrcpyControlMessageType","AndroidKeyEventAction","AndroidKeyCode","AndroidMotionEventAction","AndroidScreenPowerMode","ScrcpyDeviceMessageType","ScrcpyLogLevel","ScrcpyVideoOrientation","AndroidCodecProfile","AndroidCodecLevel","jsx_runtime","Stack","TooltipHost","Icon","TextField","Dropdown","Toggle","SpinButton","positioning_types","IconButton","tslib_es6","react","useUnmount","getId","css","Layer_notification","LayerHost","props","className","layerHostId","useState","z","_a","id","hostId","layerHostRef","useRef","rootRef","notifyLayersChanged","useImperativeHandle","componentRef","current","useEffect","_Y","EQ","k","nw","createElement","pi","i","ref","Dialog","ProgressIndicator","CommandBar","useId","makeStyles_esm","mobx_esm","es","head","head_default","n","esm","event_esm","async_esm","stream_extra_esm","AdbScrcpyConnection","adb","options","initialize","dispose","AdbScrcpyForwardConnection","connect","createSocket","connectAndRetry","e","gw","connectVideoStream","readable","videoStream","sendDummyByte","reader","getReader","done","value","read","byteLength","releaseLock","getStreams","controlStream","control","sendDeviceMeta","AdbScrcpyReverseConnection","streams","address","reverse","remove","catch","queue","GJ","writer","writable","getWriter","add","socket","write","accept","AdbScrcpyOptionsBase","raw","constructor","getDefaultValue","formatServerArguments","getOutputEncoderNameRegex","createVideoStreamTransformer","getControlMessageTypes","serializeBackOrScreenOnControlMessage","message","serializeInjectScrollControlMessage","AdbScrcpyOptions1_16","createConnection","tunnelForward","AdbScrcpyOptions1_22","struct_esm","ScrcpyInjectKeyCodeControlMessage","ZP","uint8","InjectKeyCode","W$","uint32","ScrcpyInjectTextControlMessage","InjectText","string","lengthField","ScrcpyInjectTouchControlMessage","InjectTouch","uint64","uint16","ScrcpyRotateDeviceControlMessage","RotateDevice","ScrcpySetScreenPowerModeControlMessage","SetScreenPowerMode","ScrcpyControlMessageSerializer","types","stream","getTypeValue","type","indexOf","injectKeyCode","serialize","injectText","text","injectTouch","injectScroll","InjectScroll","backOrScreenOn","action","buffer","BackOrScreenOn","setScreenPowerMode","mode","rotateDevice","close","ScrcpyClipboardDeviceMessage","extra","Clipboard","ScrcpyDeviceMessageDeserializeStream","pC","deserialize","CODEC_OPTION_TYPES","repeatPreviousFrameAfter","maxPtsGapToEncoder","CodecOptions","toOptionValue","entries","Object","filter","key","undefined","length","map","input","replace","toLowerCase","join","DEFAULT_SERVER_PATH","toScrcpyOptionValue","empty","BitReader","bytePosition","bitPosition","result","next","decodeExponentialGolombNumber","VideoPacket","uint8Array","NO_PTS","BigInt","ScrcpyBackOrScreenOnControlMessage1_16","ScrcpyInjectScrollControlMessage1_16","int32","ScrcpyOptions1_16","logLevel","Verbose","Debug","lockVideoOrientation","Initial","Unlocked","getArgumentOrder","maxSize","bitRate","maxFps","crop","sendFrameMeta","displayId","showTouches","stayAwake","codecOptions","encoderName","defaults","header","transform","chunk","controller","enqueue","data","deserializeStream","gL","pipeThrough","packet","frameData","pts","sequenceParameterSet","parse_sequence_parameter_set","nalu","iterateNalu","start","writeIndex","zeroCount","inEmulation","byte","lastZeroCount","subarray","Uint8Array","frame_crop_left_offset","frame_crop_right_offset","frame_crop_top_offset","frame_crop_bottom_offset","nal_ref_idc","nal_unit_type","profile_idc","constraint_set","constraint_set_reader","constraint_set0_flag","constraint_set1_flag","constraint_set2_flag","constraint_set3_flag","constraint_set4_flag","constraint_set5_flag","level_idc","seq_parameter_set_id","chroma_format_idc","seq_scaling_matrix_present_flag","seq_scaling_list_present_flag","pic_order_cnt_type","num_ref_frames_in_pic_order_cnt_cycle","offset_for_ref_frame","pic_width_in_mbs_minus1","pic_height_in_map_units_minus1","frame_mbs_only_flag","frame_cropping_flag","slice","profileIndex","constraintSet","levelIndex","encodedWidth","encodedHeight","cropLeft","cropRight","cropTop","cropBottom","croppedWidth","croppedHeight","set","ExpandNotificationPanel","CollapseNotificationPanel","GetClipboard","SetClipboard","Down","ScrcpyBackOrScreenOnControlMessage1_18","fields","ScrcpyOptions1_18","concat","powerOffOnClose","splice","ExpandSettingPanel","ScrcpyOptions1_21","init","clipboardAutosync","pair","ScrcpyInjectScrollControlMessage1_22","ScrcpyOptions1_22","rawVideoStream","downsizeOnError","KEYFRAME_PTS","ScrcpyOptions1_23","cleanup","superStream","keyframe","ScrcpyOptions1_24","powerOn","ArrayToStream","Pz","array","index","Promise","resolve","pull","ConcatStream","advance","AdbScrcpyClient","pushServer","path","sync","BF","version","process","connection","subprocess","spawn","protocols","vf","stdout","xU","Jb","output","abortController","HS","pipe","pipeTo","Vj","signal","preventCancel","race","exit","error","abort","kill","getEncoders","client","encoderNameRegex","encoders","line","match","getDisplays","Error","displayIdRegex","displays","Number","parseInt","_stdout","_screenWidth","screenWidth","_screenHeight","screenHeight","_videoStream","_controlMessageSerializer","controlMessageSerializer","_deviceMessageStream","deviceMessageStream","N7","workerReady","pendingResolvers","streamId","PICTURE_READY_SUBSCRIPTIONS","Map","TinyH264Wrapper","Xn","pictureReadyEvent","vp","onPictureReady","event","handler","addDisposable","handlePictureReady","delete","fire","feed","postMessage","offset","renderStateId","all","then","t","bind","YuvBuffer","default","YuvCanvas","TinyH264Decoder","maxProfile","Baseline","maxLevel","Level4","_renderer","renderer","_frameRendered","frameRendered","_writable","_yuvCanvas","_initializer","document","configure","wrapper","promise","config","hP","attach","chromaWidth","chromaHeight","width","height","format","cropWidth","cropHeight","displayWidth","displayHeight","createTinyH264Wrapper","Worker","tu","URL","p","u","b","addEventListener","resolver","get","decoder","uPlaneOffset","vPlaneOffset","frame","lumaPlane","chromaPlane","drawFrame","toHex","toString","padStart","toUpperCase","WebCodecsDecoder","context","lastFrame","animationFrame","getContext","VideoDecoder","render","decode","EncodedVideoChunk","timestamp","drawImage","requestAnimationFrame","codec","optimizeForLatency","cancelAnimationFrame","components","state","utils","SERVER_URL","U","FetchWithProgress","downloaded","_downloaded","total","_total","onProgress","progressEvent","fetch","url","response","headers","body","chunks","reduce","item","result1","position","fetchServer","useClasses","Z","labelRight","marginLeft","video","transformOrigin","SettingItem","Pi","param","definition","settings","onChange","classes","label","jsxs","K","horizontal","verticalAlign","children","jsx","description","G","content","J","iconName","PJ","Info","labelExtra","placeholder","L","selectedKey","option","checked","labelPosition","top","min","max","step","scrcpy_state","rotatedWidth","rotate","rotatedHeight","serverBuffer","q","device","commandBarItems","running","iconProps","Stop","onClick","stop","disabled","Play","FullScreenMaximize","iconOnly","deviceView","enterFullscreen","Speaker2","ref1","keyCode","VolumeUp","repeat","metaState","Up","Speaker1","VolumeDown","SpeakerOff","VolumeMute","Orientation","RotateLeft","aD","RotateRight","Lightbulb","Off","LightbulbFilament","Normal","fps","commandBarFarItems","PanelBottom","navigationBarVisible","TextGrammarError","logVisible","Settings","settingsVisible","Wand","demoModeVisible","tooltipHostProps","Fragment","dL","href","spaceAfter","calloutProps","calloutMaxWidth","settingDefinitions","h","ArrowClockwise","updateDisplays","Portrait","Landscape","PortraitFlipped","LandscapeFlipped","updateEncoders","decoders","name","clearTimeout","fpsCounterIntervalId","handleDeviceViewRef","element","handleRendererContainerRef","rendererContainer","handleWheel","passive","calculatePointerPosition","clientX","clientY","viewRect","getBoundingClientRect","pointerViewX","x","pointerViewY","y","log","includes","showErrorDialog","Constructor","connecting","serverTotalSize","serverDownloadedSize","debouncedServerDownloadedSize","serverDownloadSpeed","serverUploadedSize","debouncedServerUploadedSize","serverUploadSpeed","intervalId","setInterval","clearInterval","Cc","j4","hK","progress","decoderDefinition","find","lastFrameCount","ignoreDecoderCodecArgs","profile","level","navigator","clipboard","writeText","turnScreenOff","handleBackPointerDown","button","currentTarget","setPointerCapture","pointerId","handleBackPointerUp","handleHomePointerDown","Home","handleHomePointerUp","handleAppSwitchPointerDown","AppSwitch","handleAppSwitchPointerUp","pointerType","pointerX","pointerY","pressure","buttons","handlePointerDown","focus","preventDefault","handlePointerMove","HoverMove","Move","handlePointerUp","stopPropagation","scrollX","Math","sign","deltaX","scrollY","deltaY","handleContextMenu","handleKeyDown","code","Backspace","Delete","Space","Enter","ky","LO","shallow","deep","bound","EH","firstChild","appendChild","setTimeout","unshift","ConnectionDialog","M","isClient","setIsClient","style","bottom","left","right","margin","pointerEvents","V","hidden","modalProps","layerProps","dialogContentProps","title","tokens","WT","Y","percentComplete","CY","progressHidden","NavigationBar","verticalFill","horizontalAlign","background","maxWidth","color","onPointerDown","onPointerUp","Circle","Scrcpy","LE","X","items","farItems","grow","styles","root","wM","BottomElement","tabIndex","onPointerMove","onPointerCancel","onKeyDown","onContextMenu","padding","overflow","display","fontFamily","overflowY","whiteSpace","wordWrap","bq","module","exports","O","s","_N_E"],"sourceRoot":""}