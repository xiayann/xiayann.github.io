{"version":3,"file":"static/chunks/pages/file-manager-6b68b8d6d3f72e27.js","mappings":"AEACA,CAAAA,KAAK,gBAAmB,CAAGA,KAAK,gBAAmB,EAAI,EAAE,EAAEC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAElE,KACC,SAASC,uBAAuB,CAAEC,wBAAwB,CAAEC,mBAAmB,CAAE,CFDxF,CAAAC,OAAAC,QAAA,CAAAD,OAAAC,QAAA,MAAAL,IAAA,EACA,gBACA,UAAe,CACf,OAAAG,oBAAA,IACA,EACA,CAKA,eAAAF,uBAAA,CAAAK,mBAAA,CAAAH,mBAAA,eAAAA,oBAAAI,CAAA,CAAAD,qBAAA,IAAAE,+CAAAL,oBAAA,MAAAM,uDAAAN,oBAAA,MAAAO,8CAAAP,oBAAA,MAAAQ,8CAAAR,oBAAA,MAAAS,8CAAAT,oBAAA,MAAAU,8CAAAV,oBAAA,MAAAW,8CAAAX,oBAAA,MAAAY,8CAAAZ,oBAAA,MAAAa,8CAAAb,oBAAA,MAAAc,8CAAAd,oBAAA,MAAAe,8CAAAf,oBAAA,MAAAgB,8CAAAhB,oBAAA,MAAAiB,8CAAAjB,oBAAA,MAAAkB,8CAAAlB,oBAAA,MAAAmB,8CAAAnB,oBAAA,MAAAoB,8CAAApB,oBAAA,MAAAqB,8CAAArB,oBAAA,MAAAsB,8DAAAtB,oBAAA,MAAAuB,8DAAAvB,oBAAA,MAAAwB,8DAAAxB,oBAAA,MAAAyB,oDAAAzB,oBAAA,KAAA0B,4CAAA1B,oBAAA,MAAA2B,qDAAA3B,oBAAA,MAAA4B,mCAAA5B,oBAAA,MAAA6B,6CAAA7B,oBAAA,MAAA8B,uCAAA9B,oBAAA,MAAA+B,+CAAA/B,oBAAAgC,CAAA,CAAAF,wCAAAG,yCAAAjC,oBAAA,MAAAkC,iDAAAlC,oBAAAgC,CAAA,CAAAC,0CAAAE,kCAAAnC,oBAAA,MAAAoC,0CAAApC,oBAAAgC,CAAA,CAAAG,mCAAAE,mCAAArC,oBAAA,MAAAsC,yCAAAtC,oBAAA,MAAAuC,qCAAAvC,oBAAA,MCZAwC,qCAAAxC,oBAAA,MAuBkD,SAC3ByC,WAAWC,IAAI,EAEtC,OADIA,KAAAC,GAAO,CAAAD,KAAAE,IAAA,CACXF,IAEA,CALA,GAAApB,8DAAkDuB,EAAA,IAKhB,IAC9BC,WAAM,GAAAxC,uDAAAyC,EAAA,GAAAH,KACF,CACAI,OAAA,UAAW,UACP,CACJC,eAAA,WACJ,CACJ,CAEA,GACIC,oBAAe,CAAAC,MAAeC,gBAAA,OACfA,cAIRA,cAAK,CACR,GAAAD,KAAQ,CAA8BE,OAAE,GAAM/C,uDAAAgD,EAAA,EAAAH,MAAAE,MAAA,EAAAE,KAAE,CAAcC,WAAA,CAAE,CACpE,EACJ,GANK,KAQmD,SAChDC,yBAAWC,CAAA,CAAiBC,CAAA,CAAG,CACnC,IAAIC,OAAAF,EAAWG,iBAAG,GAAAC,aAAA,CAAAH,EAAAE,iBAAA,eACdD,OACGA,OAENF,EAAAI,aAAA,CAAAH,EACL,CA+bA,IAAMI,MAAA,IA7bA,MAmBuC,IACrCC,iBAAW,CACX,IAAAC,KAAM,GACFC,KAAQ,KAAMC,IAAA,CAAAC,KAAA,MAAAC,MAAA,CAAAC,SAAAC,GAAA,UAEV,EACA5B,IAFJsB,MAAO,IAAAO,QAGHC,KAAAD,QAAsBE,QACb,CAAAC,EAAAjC,OAAM,CACPA,MAGR,KAAAkC,aAAA,CAAAlC,KAAAC,GAAA,CACJ,CACJ,IASJ,OARiBuB,KACTW,OAAK,EACLlC,IAAA,IACA8B,KAAA,SACJC,QAAA,SAAAE,aAAA,KACA,GACAV,IAAA,CAAAA,KAAOY,MAAK,CAAK,GAAAC,aAAY,CAAO,GACpC,OAAOb,IAAA,CAAAA,KAAAY,MAAA,IAAAJ,OAAA,CACXR,IAEA,CAAgB,IACZc,WAAI,CAEJ,IAAApB,OAAa,GAAoB,OAC7B,IAAK,CAAAqB,aAAA,CAAAH,MAAA,OACD,EAAYlB,OACR/D,IAAK,EACL8C,IAAA,SACA8B,KAAA,SAAWS,UACP,CACAC,SAAO3C,qCAAA4C,EAAA,CAAAC,YAAA,CAAAC,MAAE,CAAYC,OAAA,GAAcC,SAAA,GAAgBC,WAAA,GACvD,CACA,EACAC,SAAS,CAAAnD,qCAAMoD,CAAA,CAAAC,MAAA,CAAAlB,QACV,KAAY,UACH,CAAuB,IAAEmB,MAAU,MAAI,GAAArD,qCAAAsD,EAAA,GAACC,SAAA,EAC9C,GAAuC,IACnC,IAAAC,EAAM,EAAAA,EAAOH,MAAMf,MAAK,CAAAkB,IAAA,CACxB,IAAMC,KAAKJ,MAAOnD,IAAA,CAAAsD,EACtB,YAAAE,MAAA,CAAAD,KACJ,CAEA,KACJ,GAEJ,GACJ,KAAK,MACD,EACI,KAAAhB,aAAY,IAAAkB,IAAA,GAAAzE,4CAAA0E,EAAA,CAAAC,IAAA,EAAAzC,OACR/D,IAAK,EACL8C,IAAA,WACA8B,KAAA,WAAWS,UACP,CACAC,SAAO3C,qCAAA4C,EAAA,CAAAkB,cAAA,CAAAhB,MAAE,CAAYC,OAAA,GAAcC,SAAA,GAAgBC,WAAA,GACvD,CACA,EAAef,QACV,KAAY,UACH,CACN,IAAI6B,KAAA,MAAAhE,qCAAAoD,CAAA,CAAAC,MAAA,CAAAW,IAAA,MACA,CACA,IAAM7D,KAAA,IAAW,CAAAuC,aAAA,IACXuB,SAAUpE,4CACJqE,OAAA,MAAAtC,IAAA,CAAAzB,KAAAE,IAAA,CACd,OAAO2D,KAAQG,IAAA,CAAAF,UAAAG,MAAA,IAAAnE,qCAAAoE,EAAA,EAAAlE,KAAAE,IAAA,CAAAiE,OAAAnE,KAAAoE,IAAA,UACbnC,EAAA,CACJpC,qCAAUoD,CAAA,CAAAoB,eAAA,CAAApC,EAAA,QACD,CACT4B,KAAAS,OAAA,EACJ,CACA,KACJ,GAEP,EAEL,SACgBpD,OACR/D,IAAK,EACL8C,IAAA,SACA8B,KAAA,SAAWS,UACP,CACAC,SAAO3C,qCAAA4C,EAAA,CAAA6B,MAAA,CAAA3B,MAAE,CAAYC,OAAA,GAAcC,SAAA,GAAgBC,WAAA,GACvD,CACA,EAAef,QACV,KAAY,UACL,IACA,CAAuC,IACnC,IAAMhC,QAAS,KAAAuC,aAAM,EACrB,IAAIiC,OAAQ,MAAA3E,qCAAAoD,CAAA,CAAAC,MAAA,CAAAuB,EAAA,CAAA/E,4CAAAqE,OAAA,MAAAtC,IAAA,CAAAzB,KAAAE,IAAA,MACRsE,OAAA,CACA3E,qCAAAoD,CAAA,CAAAoB,eAAA,CAAAG,QACH,MACL,EACa,OACbvC,EAAA,CACJpC,qCAAUoD,CAAA,CAAAoB,eAAA,CAAApC,EAAA,QACD,CACT,KAAAyC,SAAA,EACJ,CACA,KACJ,GAEJ,EAGR,CACJ,OAAAxD,MAEA,CAAiB,IACbyD,YAAa,CACb,IAAKnD,KAAM,IAAG,CAAMoD,KAAA,CAAAC,KAAA,GA0BxB,OA1BwBrD,KAChBsD,IAAA,CAAM,CAAA9D,EAAAC,IAAA,KAIFC,OAHJ,IAAM6D,QAAU/D,EAAEyC,IAAI,GAAKzE,4CAAA0E,EAAA,CAAAC,IAAkB,CAAG,EAAI,CAAC,CAEjDqB,QAAA/D,EAAAwC,IAAA,GAAAzE,4CAAA0E,EAAA,CAAAC,IAAA,KACqB,GACrBoB,UAASC,QACb9D,OAAO6D,QAAAC,YACH,CACA,IAAMC,SAAWjE,CAAC,CAAC,IAAI,CAACkE,OAAO,CAAC,CAE5BC,SAAalE,CAAA,MAAAiE,OAAU,EAE3BhE,OADI+D,WAASE,SACFpE,yBAAoBC,EAAAd,IAAU,CAAAe,EAAAf,IAAA,EACrC,iBAAS+E,SACNlE,yBAAAkE,SAAAE,UAENF,SAAAE,SAAA,KAGL,OACI,KAAAC,cAAW,EACdlE,CAAAA,QAAA,IAELA,MACA,GACJM,IAEA,CAAyB,IAAA6D,SAmFjB,CAlFJ,IAAAC,IAAMC,KAEkB,IACpB/D,KAAA,EAEIvB,IAAA,OACAC,KAAA,YACAuC,SAAA3C,qCAAgB4C,EAAA,CAAA8C,UAAA,CAChBC,WAAU,GACVC,SAPgB,GAQhBC,SARgB,GAShBC,cAA2B,GAAEC,SACrB7F,IAAA,MAEJyC,SAAiB,OACbzC,KAAKyD,IAAA,EAAkB,KACnBzE,4CAAsE0E,EAAA,CAAAoC,IAAA,CAItErD,SAAM,qBACV,KAAK,MACAzD,4CAAe0E,EAAA,CAAAqC,SAAA,CAAqB,EAAAtD,QAAQ,KAAA5D,8DAAmBmH,EAAA,GAAEvC,KAAA3E,8DAAAmH,CAAA,CAAAC,MAAA,EAClE,EACJ,KAAK,MACAlH,4CAAe0E,EAAA,CAAAC,IAAA,CAAqB,EAAAlB,QAAE,EAAW,GAAA5D,8DAAsBmH,EAAA,GAAIG,UAAAzG,4CAAA0G,OAAA,CAAApG,KAAAE,IAAA,CAC5E,IACJ,cACyC,EAAAuC,QAAQ,KAAA5D,8DAAAmH,EAAA,GAA0BvC,KAAA3E,8DAAAmH,CAAA,CAAAI,WAAA,EACvE,CAGR,CAEA,IAAAC,QAAA,GAAA1I,uDAAQ2I,EAAA,EAAA9D,UAAA+D,IAAA,CAAA/F,KAAA,CAAAgG,GAAA,CAAI,MAAa,GAAA9I,+CAAA+I,GAAA,EAAA7I,8CAAA8I,CAAA,EAAAC,WAAE,CAA0BC,YAAK,YAAQJ,IAAAH,OAAG,EAAO1D,MAAE,CAAkBkE,MAhCpF,GAgCsGjE,OAhCtG,EAgCsG,CACtH,EACJ,CACA,GAEI5C,IAAA,OACAC,KAAA,OACAwF,SAAA,EACAqB,YAAS,GAAoBlB,SAAAA,MAEJ,GAAAlI,+CAAe+I,GAAA,UAAEM,UAAA5G,WAAAF,IAAqB,yBACzC,GAAA+G,SAAAjH,KAAAE,IAAA,EAK1B,GAEID,IAAA,aACAC,KAAA,aACAwF,SAAA,EACAE,cAA2B,GAAEC,SAAAA,MAE7B,GAAAqB,MAAA,EAAAlH,KAAAmH,IAAA,OAAAC,QAAA,KAAAF,MAAA,EAAAlH,KAAAmH,IAAA,OAAAC,QAAA,KAAAF,MAAA,EAAAlH,EAAAA,KAAAmH,IAAA,EAAAC,QAAA,IAEJ,GAEInH,IAAA,OACAC,KAAA,OACAwF,SAAA,EACAE,cAA2B,GAAEC,SAAAA,MACa,KAClCpC,IAAO,GAAAzE,4CAAuB0E,EAAI,CAAAC,IAAA,CACrC,GAAA7D,qCAAAuH,EAAA,EAAAlD,OAAAnE,KAAAoE,IAAA,GAEL,EADI,EAGR,CAEInE,IAAA,QACAC,KAAA,qBACAwF,SAAA,IACAE,cAA2B,GAAEC,SAAAA,MAE7B,IAAAyB,KAAAnD,IAAAA,OAAAnE,KAAAuH,KAAA,GAAAC,cAAA,EAEP,EAED,CAuByB,IACrB,IAAKxH,QAvBL,KACI,GADJsF,CAAAA,IAAKzF,qCACDoD,CAAA,CAAAC,MAAA,GAAAoC,KAAA,IAAAA,IAAA,cAAAC,CAAAA,KAAAD,IAAAmC,QAAA,GAAAlC,KAAA,IAAAA,KAAA,OAAAA,KAAAmC,QAAA,CAAA1I,4CAAA2I,EAAA,CAAAC,MAAA,IAAApG,KACIrE,IAAK,EACL8C,IAAA,QACAC,KAAA,gBACAwF,SAAA,IACAE,cAA2B,GAAEC,SAAAA,MAE7B,IAAAyB,KAAAnD,IAAAA,OAAAnE,KAAA6H,KAAA,GAAAL,cAAA,EAEJ,GAEIvH,IAAA,QACAC,KAAA,mBACAwF,SAAA,IACAE,cAA2B,GAAEC,SAAAA,MAE7B,IAAAyB,KAAAnD,IAAAA,OAAAnE,KAAA8H,KAAA,GAAAN,cAAA,EAGX,GAGQhG,MAA+BxB,KAChC+H,aAAS,CAAO,CAAA9F,EAAK+F,SAAO,CACxB,KAAA9C,OAAA,GAAA8C,OAAA/H,GAAA,CACJ,GAAOf,mCAAA+I,CAAA,WAAA7C,cAAA,OAAAA,cAAA,EACe,GAAAlG,mCACW+I,CAAA,OACzB,IAAI,CAAC/C,OAAA,CAAA8C,OAAiB/H,GAAA,CAC1B,KAAAmF,cAAA,GACH,EAGL,EACIpF,KAAKC,GAAA,GAAQ,IAAG,CAAAiF,OAAI,GACpBlF,KAAKkI,QAAA,IACRlI,KAAAmI,kBAAA,MAAA/C,cAAA,EAIT,OAAA5D,IA2BA,CAA8B4G,gBACjB3G,IAAI,CAAK,CACd,KAAAA,IAAA,GAAAA,OAKJ,IAAI,CAACA,IAAA,CAAAA,KACD5B,qCAAAoD,CAAA,CAAAC,MAAA,EAIR,KAAAwB,SAAA,GArCA,CAAc2D,aA/Rd,CAAc,KACdC,OAAA,CAAU,GAAK,KACfC,OAAO,SACP9G,IAAA,KAAe,KACf+G,OAAA,CAAsB,QACtB5D,KAAA,GAA0B,MAC1BM,OAAA,QAAsB,KAEtBE,cAAY,CAAK,QACjBqD,SAAA,IAAiC,KACjCC,UAAA,CAAAC,KAAAA,EAAe,KACfC,YAAA,GAAkB,KAClBC,eAAA,GAAwB,KACxBC,qBAAc,QAEdC,WAAA,GAA8B,KAC9BxG,aAAA,IAA4C,KAoS5CyG,iBAAiB,CAAAL,KAAAA,EAAiB,IAC9B,CAAAzG,aAAA,QAAY1C,mDAASrC,IAAA,EAAA8L,MAAK,CAAc,GAAAzJ,mDAAAyJ,KAAA,CAAKxH,IAAE,CACnD,IAgB0C,IACtC,CAAAiD,SAAM,IAAA5E,qCAAuBoJ,EAAA,QAAAC,QAAA,CAE7B,IAAAC,YAAA,KAAA3H,IAAA,CAEyB,GAAzB,GAAAvC,mCAAK+I,CAAA,WAAArD,KAAA,CAAkB,EAAE,EACrB,CAAA/E,qCAAAoD,CAAA,CAAAC,MAAA,CACH,MAED,CAEA,GAAAhE,mCAAmB+I,CAAA,WAAAO,OAAA,KAEnB,IAAM3E,KAAA,MAAsBhE,qCAAAoD,CAAA,CAAAC,MAAA,CAAAW,IAAA,GACtBe,MAAA,GACAyE,UAAA,EAAa,CACfC,WAAWC,YAAS,KAChBJ,OAAAK,OAAA,EAIL,GAAAtK,mCAAA+I,CAAA,WAAArD,KAAA,CAAAA,MAAAC,KAAA,GAEH,OAAI,GACA,CAAqD,UAC7C,IAAO4E,SAAS5F,KAAA6F,OAAA,CAAAN,aAAA,IAChBD,OAAAK,OAAA,CACH,MAED,CACa,MAATC,MAAAvJ,IAAS,EAAAuJ,OAAAA,MAAAvJ,IAAA,GAITuJ,MAAAhG,IAAU,GAAKzE,4CAAA0E,EAAA,CAAAoC,IAAA,CACnBuD,UAAOlM,IAAA,CAAAsM,OAEN7E,MAAAzH,IAAA,CAAA4C,WAAA0J,QAGL,CAA+B,IAC3B,IAAIE,UAAON,UAAS,IAChBF,OAAAK,OAAA,CACH,MAED,OACU3F,KAAI+F,WAAG,CAAAlK,4CAAAqE,OAAA,CAAAqF,YAAAO,OAAuBzJ,IAAM,KAC1CyJ,OAAMxC,IAAI,CAAGnI,4CAAE0E,EAAA,CAAAC,IAAA,KAAAgG,OAAAE,UAAA,CAClBF,OAAAvF,IAAA,KAGLQ,MAAAzH,IAAA,CAAA4C,WAAA4J,QAEA,CAAoB,GAChBR,OAAAK,OAAA,CACH,MAED,CACJ,GAAAtK,mCAAU+I,CAAA,WAAArD,KAAA,CAAAA,MAAA,QACD,CACDuE,OAAAK,OAAA,EACH,GAAAtK,mCAAA+I,CAAA,WAAAO,OAAA,KAEDsB,cAAYR,YAChBzF,KAAAS,OAAA,EACJ,IAE+B,IAC3B,CAAAd,MAAM,OAAOD,MAAM,CACnB,IAAIM,KAAA,MAAAhE,qCAAAoD,CAAA,CAAAC,MAAA,CAAAW,IAAA,MACA,CACA,IAAAC,SAAApE,4CAAYqE,OAAM,MAAAtC,IAAA,CAAA8B,KAAArD,IAAA,KAAAhB,mCACO+I,CAAA,OACrB,IAAI,CAACQ,SAAA,CAAU,GACf,IAAI,CAACC,UAAA,CAAYnF,KAAGrD,IAAA,CACpB,IAAI,CAAC0I,YAAA,CAAe,EACpB,IAAI,CAACC,eAAA,CAAAtF,KAAqBa,IAAG,CAC7B,IAAI,CAAC0E,qBAAc,GACvB,KAAAC,WAAA,EAEA,GAA4C,IACxCO,WAAKC,YAAmB,GAAArK,mCAAyC6K,EAAA,OACjE,IAAI,CAAChB,WAAA,MAAAH,YAA6B,MAAAE,qBAAY,CAC9C,KAAAA,qBAAA,MAAAF,YAAA,GAEA,QACA,CAEyD,MACjD,GAAK9I,qCAAekK,EAAA,EAAAzG,MAAA0G,WAAA,KAAAhL,qDAAAiL,EAAA,CAAAlL,4CAAAmL,EAAA,GAAAF,WAAA,KAAAnK,qCAAAsK,EAAA,IAAAlL,mCAAA6K,EAAA,aACxB,IACC,CAAAnB,YAAY,CACTyB,QAKR,KAAApG,MAAA,CAAAJ,KAAAyG,KAAA,CAAAxG,SAAA9E,4CAAkB0E,EAAA,CAAAC,IAAA,SAAAJ,KAAAgH,YAAA,UAAArL,mCAC8B+I,CAAA,OAC5C,IAAI,CAACc,WAAA,MAAAH,YAA6B,MAAAE,qBAAY,CAClD,KAAAA,qBAAA,MAAAF,YAAA,EACM,QACN,CACJkB,cAAAR,WACF,CAAe,OACbrH,EAAA,CACJpC,qCAAUoD,CAAA,CAAAoB,eAAA,CAAApC,EAAA,QACD,CACL4B,KAAKS,OAAA,GACL,KAAAI,SAAA,GAAkB,GAAAxF,mCACQ+I,CAAA,OAC1B,KAAAQ,SAAA,GACJ,EACJ,CAvJI,EAAyB,GAAAvJ,mCACPsL,EAAA,QACdlC,QAAO,GACP1D,MAAA1F,mCAAoBuL,EAAA,CAAAC,OAAA,CACpBxI,cAAA,GACAkG,gBAAgBlJ,mCAAA6K,EAAA,CAAAY,KAAA,CACpBjG,UAAA,EAEA,GAAc,GAAAxF,mCACN0L,EAAA,OACA/K,qCAAkCoD,CAAA,CAAAC,MAAA,CAC9B,IAAI,CAACoF,OAAO,EAAG,IAAK,CAAAC,OAAA,GACpB,IAAI,CAACD,OAAA,CAAS,GACjB,KAAA5D,SAAA,IAGJ,KAAA4D,OAAA,GAET,EAsIJ,CAEA,EAGIuC,aAAA,GAAA1L,6CACK2L,EAAA,MACkB,GAAAnN,+CAAS+I,GAAA,EAAA5I,8CAAAiN,CAAA,EACxBC,OAAA,CAAA3J,MAAAoH,SAAoB,CAAAwC,mBACT,CACPC,MAAA,eACJC,QAAA9J,MAAAqH,UAAA,EAEkBzB,SACD,GAAAtJ,+CAAA+I,GAAA,EAAW3I,8CAAsEqN,CAAA,EAC9FC,YAAA,GAAAvL,qCAA2DwL,EAAA,EAAAjK,MAAAyH,qBAAA,CAAAzH,MAAAwH,eAAA,CAAAxH,MAAA0H,WAAA,EAAAwC,gBAAAlK,MAAAuH,YAAA,CAAAvH,MAAAwH,eAAA,EAI3E,IAGI2C,YAAA,KAAgB,GAAA7L,mCACZ8L,SAAA,OAAkB,GAAAvM,mCACM+I,CAAA,OACxB5G,MAAAkH,OAAA,GAEA,GACI,KAAkB,GAAArJ,mCACO+I,CAAA,OACzB5G,MAAAkH,OAAA,GACJ,EACJ,IAGA,IAAAmD,OAAA,GAAAnM,yCAAgBoM,SAAA,OAAAhM,mCACqB8L,SAAA,OACjC,IAAIG,UAAYF,OAAAzC,KAAA,CAAAxH,IAAA,IACZ,CAAAmK,UAAO,CAAQF,OAAEG,OAAO,EAAA5C,MAAK,CAAc,GAAAyC,OAAMzC,KAAM,CAAKxH,KAAAJ,MAAAI,IAAA,CAC5D,GACH,MAED,OACIqK,OAAY,CAAAF,YACfA,CAAAA,UAAAA,SAAA,KAGFvK,MAAA+G,eAAA,CAAAwD,UAAA,GAAQF,OAEX,EACA,GAAM,CAAAK,WAAAC,cAAe,IAAArM,mCAAYsM,QAAO,IACpCC,aAAa,GAAMvM,mCAAAwM,WAAA,QAAA1K,MAAA,CACnB,IAAIoC,KAAA,MAAAhE,qCAAAoD,CAAA,CAAAC,MAAA,CAAAW,IAAA,MACA,CACA,IAAAuI,SAAAvI,KAAAG,IAAA,CAAAvC,MAEM4K,SAAO,IAAMC,SAASF,UACtBG,KAAM,MAAOF,SAAIE,IAAA,GACvBC,IAAAjP,OAAckP,GAAA,CAAAC,eAAA,CAAAH,MAClBP,cAAUQ,IAAA,QACD,CACT3I,KAAAS,OAAA,EACD,CACH,MACIqI,YAAc,GAAAhN,mCAAAwM,WAAA,OACfH,cAAErD,KAAAA,EAEL,MACIiE,kBAAiB,GAAAjN,mCAAAwM,WAAA,gBACbnM,KAAKyD,IAAA,EACL,KAAKzE,4CAAA0E,EAAA,CAAAoC,IAAA,CAAuB,KACxB9G,4CAAiC0E,EAAM,CAAAqC,SAAO,CAC9C1E,MAAMa,aAAA,CAAAxC,4CAAAqE,OAAA,CAAA1C,MAAAI,IAAA,CAAAzB,KAAAE,IAAA,GACV,KAAK,MACDlB,4CAA8B0E,EAAA,CAAAC,IAAA,QAC1BjE,4CAAK0G,OAAA,CAAApG,KAAAE,IAAA,GACL,IAAK,OACL,IAAK,OACL,IAAK,WACD,OACAgM,aAAMxM,4CAAAqE,OAAA,CAAA1C,MAAAI,IAAA,CAAAzB,KAAAE,IAAA,EAEd,CAET,IAAcgM,aAEjB,EAA+CW,UAC3C,GAAA9N,oDAAqB+N,CAAA,UAAA9O,8CAAAoN,CAAA,EAAA2B,oBACjB,CAAkB,GAAA7N,mCAC8B+I,CAAA,OAChD5G,MAAAkB,aAAA,CAAAsK,UAAAG,YAAA,EACJ,EACJ,CAEA,IAKIC,gBAAQ,GAAAtN,mCAAAwM,WAAA,GAAAnM,KAAAkN,MAAAjL,IAAA,EACJA,IAIAZ,MAAAiB,SAAA,CAAAF,MAAA,EAAkB,GAAAlD,mCACY+I,CAAA,OAC9B5G,MAAA2H,iBAAA,CAAA/G,CACH,GAGA,IACL,IACIkL,gBAAA,GAAAxN,mCAAAwM,WAAkB,EAAM,KACzB,CAAE,EAAAjN,mCAAA+I,CAAA,MAAA5G,MAAA2H,iBAAA,CAAAL,KAAAA,EAEL,MACU,MAAK,GAAAhL,+CAAeyP,IAAA,EAAAnP,8CAAAoP,CAAA,KAAAvN,qCAAAwN,EAAA,CAAArG,SAAA,CAElB,GAAAtJ,+CAAA+I,GAAA,EAAArH,iDAAC,CAAA4H,SAAM,GAAAtJ,+CAAA+I,GAAA,WAAAO,SAAA,yCAGQ,GAAMtJ,+CAAS+I,GAAA,EAAA9G,yCAAA2N,EAAA,EAAA3I,MAAAvD,MAAAiB,SAAA,GAEf,GAAM3E,+CAAe+I,GAAA,EAAAxI,8CAAA8C,CAAA,EAAA4D,MAAAvD,MAAAC,eAAA,GAEzB,GAAA3D,+CAAAyP,IAAA,EAAAjP,8CAAAqP,CAAA,EAACC,KAAA,GAAQ9M,OACpB,CAAME,KACF,CACA6M,OAAA,yBACAC,QAAA,qBACJC,UAAA,MACJ,GAAA3G,SAAA,CACsB,CAAW,EAAAtJ,+CAAA+I,GAAA,EAAAtI,8CAAAyP,CAAA,EAAAhB,UACzBA,UAAqB5F,SACJ,GAAUtJ,+CAAA+I,GAAA,EAAArI,8CAAAsI,CAAA,EACvB/B,MAAAvD,MAASsD,UAAa,CACtBU,QAAQhE,MAAMgE,OAAI,CAClByI,OAAAzM,MAAWI,IAAA,CACXoL,UAAAA,UACAkB,WAAAzP,8CAAuD0P,EAAA,CAAAC,SAAA,CACvDC,cAAe7M,MAAAmH,OAAA,EAAAnH,IAAAA,MAAAuD,KAAA,CAAAxC,MAAA,CACf+L,cAAAvB,kBACAwB,kBAAAnB,gBACAoB,sBAAY7N,oBACZ8N,aAAA,GAAqBC,sBAAA,IAI5B,GACSxC,YACF,GAAApO,+CAAA+I,GAAA,EAACnI,8CAAAiQ,CAAA,CAAO,CAAAvH,SAAU,GAAAtJ,+CAAA+I,GAAA,EAAAlI,8CAAAwC,CAAA,EAAAgB,QAAA2K,YACb1F,SAAW,GAAAtJ,+CAAA+I,GAAA,SAAA9D,MAAE,CAAekE,MAAA,OAAgBjE,OAAA,OAAiB4L,QAAA,OAAsBC,WAAA,SAAyBC,eAAA,UAExG1H,SAAS,GAAAtJ,+CAAA+I,GAAA,SAAYD,IAAIsF,WAAG6C,IAAA,GAAOhM,MAAE,CAAkB+C,SAAA,OAAkBkJ,UAAA,mBAQ1F,GAAAlR,+CAAA+I,GAAA,EAAA9G,yCAACkP,EAAA,EAAc7H,SACE,GAAStJ,+CAAA+I,GAAA,EAAAjI,8CAAAf,CAAA,EACtBkH,MAAAvD,MAASiB,SAAM,CACf0I,OAAA,CAAA3J,MAAA2H,iBAAiB,CACjB+F,gBAAcrQ,8CAAiBuC,CAAA,CAAA+N,cAAA,CAC/BC,OAAA5N,MAAW2H,iBAAA,CACXkG,UAAA/B,gBAAkDgC,qBAAU,UAAAxR,+CAAA+I,GAAA,EAAA/H,8CAAAyQ,CAAA,EAAE,GAAA3O,KAAA,CAAe4O,SAAA,SAIpF,GAAA1R,+CAAA+I,GAAA,EAAAmE,aAAA,MAKb,CAAqCpN,CAAAA,oBAAA,WAAA0B,6CAAA2L,EAAA,EAAAU,YAAA,YAAAlO,mBAAA,EAAAA,oBAAAgS,CAAA,uCAAAhS,oBAAAA,oBAAAiS,CAAA,SAAAC,KAAAlS,oBAAAgS,CAAA","sources":["webpack://_N_E/?39b0","webpack://_N_E/./src/pages/file-manager.tsx","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/file-manager\",\n      function () {\n        return require(\"private-next-pages/file-manager.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/file-manager\"])\n      });\n    }\n  ","import { Breadcrumb, concatStyleSets, ContextualMenu, ContextualMenuItem, DetailsListLayoutMode, Dialog, DirectionalHint, IBreadcrumbItem, IColumn, Icon, IContextualMenuItem, IDetailsHeaderProps, IRenderFunction, Layer, MarqueeSelection, mergeStyleSets, Overlay, ProgressIndicator, Selection, ShimmeredDetailsList, Stack, StackItem } from '@fluentui/react';\nimport { FileIconType, getFileTypeIconProps, initializeFileTypeIcons } from \"@fluentui/react-file-type-icons\";\nimport { useConst } from '@fluentui/react-hooks';\nimport { getIcon } from '@fluentui/style-utilities';\nimport { AdbFeatures, ADB_SYNC_MAX_PACKET_SIZE, LinuxFileType, type AdbSyncEntry } from '@yume-chan/adb';\nimport { ChunkStream } from '@yume-chan/stream-extra';\nimport { action, autorun, makeAutoObservable, observable, runInAction } from \"mobx\";\nimport { observer } from \"mobx-react-lite\";\nimport { NextPage } from \"next\";\nimport Head from \"next/head\";\nimport Router, { useRouter } from \"next/router\";\nimport path from 'path';\nimport { useCallback, useEffect, useState } from 'react';\nimport { CommandBar, NoSsr } from '../components';\nimport { GlobalState } from '../state';\nimport { asyncEffect, createFileStream, formatSize, formatSpeed, Icons, pickFile, ProgressStream, RouteStackProps, saveFile } from '../utils';\n\ninitializeFileTypeIcons();\n\ninterface ListItem extends AdbSyncEntry {\n    key: string;\n}\n\nfunction toListItem(item: AdbSyncEntry): ListItem {\n    (item as ListItem).key = item.name;\n    return item as ListItem;\n}\n\nconst classNames = mergeStyleSets({\n    name: {\n        cursor: 'pointer',\n        '&:hover': {\n            textDecoration: 'underline',\n        },\n    },\n});\n\nconst renderDetailsHeader: IRenderFunction<IDetailsHeaderProps> = (props?, defaultRender?) => {\n    if (!props || !defaultRender) {\n        return null;\n    }\n\n    return defaultRender({\n        ...props,\n        styles: concatStyleSets(props.styles, { root: { paddingTop: 0 } })\n    });\n};\n\nfunction compareCaseInsensitively(a: string, b: string) {\n    let result = a.toLocaleLowerCase().localeCompare(b.toLocaleLowerCase());\n    if (result !== 0) {\n        return result;\n    } else {\n        return a.localeCompare(b);\n    }\n}\n\nclass FileManagerState {\n    initial = true;\n    visible = false;\n    path = '/';\n    loading = false;\n    items: ListItem[] = [];\n    sortKey: keyof ListItem = 'name';\n    sortDescending = false;\n\n    uploading = false;\n    uploadPath: string | undefined = undefined;\n    uploadedSize = 0;\n    uploadTotalSize = 0;\n    debouncedUploadedSize = 0;\n    uploadSpeed = 0;\n\n    selectedItems: ListItem[] = [];\n    contextMenuTarget: MouseEvent | undefined = undefined;\n\n    get breadcrumbItems(): IBreadcrumbItem[] {\n        let part = '';\n        const list: IBreadcrumbItem[] = this.path.split('/').filter(Boolean).map(segment => {\n            part += '/' + segment;\n            return {\n                key: part,\n                text: segment,\n                onClick: (e, item) => {\n                    if (!item) {\n                        return;\n                    }\n                    this.pushPathQuery(item.key);\n                },\n            };\n        });\n        list.unshift({\n            key: '/',\n            text: 'Device',\n            onClick: () => this.pushPathQuery('/'),\n        });\n        list[list.length - 1].isCurrentItem = true;\n        delete list[list.length - 1].onClick;\n        return list;\n    }\n\n    get menuItems() {\n        let result: IContextualMenuItem[] = [];\n\n        switch (this.selectedItems.length) {\n            case 0:\n                result.push({\n                    key: 'upload',\n                    text: 'Upload',\n                    iconProps: {\n                        iconName: Icons.CloudArrowUp,\n                        style: { height: 20, fontSize: 20, lineHeight: 1.5 }\n                    },\n                    disabled: !GlobalState.device,\n                    onClick: () => {\n                        (async () => {\n                            const files = await pickFile({ multiple: true });\n                            for (let i = 0; i < files.length; i++) {\n                                const file = files.item(i)!;\n                                await this.upload(file);\n                            }\n                        })();\n\n                        return false;\n                    }\n                });\n                break;\n            case 1:\n                if (this.selectedItems[0].type === LinuxFileType.File) {\n                    result.push({\n                        key: 'download',\n                        text: 'Download',\n                        iconProps: {\n                            iconName: Icons.CloudArrowDown,\n                            style: { height: 20, fontSize: 20, lineHeight: 1.5 }\n                        },\n                        onClick: () => {\n                            (async () => {\n                                const sync = await GlobalState.device!.sync();\n                                try {\n                                    const item = this.selectedItems[0];\n                                    const itemPath = path.resolve(this.path, item.name);\n                                    await sync.read(itemPath)\n                                        .pipeTo(saveFile(item.name, Number(item.size)));\n                                } catch (e: any) {\n                                    GlobalState.showErrorDialog(e);\n                                } finally {\n                                    sync.dispose();\n                                }\n                            })();\n                            return false;\n                        },\n                    });\n                }\n            // fall through\n            default:\n                result.push({\n                    key: 'delete',\n                    text: 'Delete',\n                    iconProps: {\n                        iconName: Icons.Delete,\n                        style: { height: 20, fontSize: 20, lineHeight: 1.5 }\n                    },\n                    onClick: () => {\n                        (async () => {\n                            try {\n                                for (const item of this.selectedItems) {\n                                    const output = await GlobalState.device!.rm(path.resolve(this.path, item.name!));\n                                    if (output) {\n                                        GlobalState.showErrorDialog(output);\n                                        return;\n                                    }\n                                }\n                            } catch (e: any) {\n                                GlobalState.showErrorDialog(e);\n                            } finally {\n                                this.loadFiles();\n                            }\n                        })();\n                        return false;\n                    }\n                });\n                break;\n        }\n\n        return result;\n    }\n\n    get sortedList() {\n        const list = this.items.slice();\n        list.sort((a, b) => {\n            const aIsFile = a.type === LinuxFileType.File ? 1 : 0;\n            const bIsFile = b.type === LinuxFileType.File ? 1 : 0;\n\n            let result: number;\n            if (aIsFile !== bIsFile) {\n                result = aIsFile - bIsFile;\n            } else {\n                const aSortKey = a[this.sortKey]!;\n                const bSortKey = b[this.sortKey]!;\n\n                if (aSortKey === bSortKey) {\n                    result = compareCaseInsensitively(a.name!, b.name!);\n                } else if (typeof aSortKey === 'string') {\n                    result = compareCaseInsensitively(aSortKey, bSortKey as string);\n                } else {\n                    result = aSortKey < bSortKey ? -1 : 1;\n                }\n            }\n\n            if (this.sortDescending) {\n                result *= -1;\n            }\n            return result;\n        });\n        return list;\n    }\n\n    get columns(): IColumn[] {\n        const ICON_SIZE = 20;\n\n        const list: IColumn[] = [\n            {\n                key: 'type',\n                name: 'File Type',\n                iconName: Icons.Document20,\n                isIconOnly: true,\n                minWidth: ICON_SIZE,\n                maxWidth: ICON_SIZE,\n                isCollapsible: true,\n                onRender(item: AdbSyncEntry) {\n                    let iconName: string;\n\n                    switch (item.type) {\n                        case LinuxFileType.Link:\n                            // larger sizes of `linkedFolder` icon now have a person symbol on it,\n                            // We want to use it for symbolic links, so use the 16px version\n                            // cspell:disable-next-line\n                            iconName = \"linkedfolder16_svg\";\n                            break;\n                        case LinuxFileType.Directory:\n                            ({ iconName } = getFileTypeIconProps({ type: FileIconType.folder }));\n                            break;\n                        case LinuxFileType.File:\n                            ({ iconName } = getFileTypeIconProps({ extension: path.extname(item.name!) }));\n                            break;\n                        default:\n                            ({ iconName } = getFileTypeIconProps({ type: FileIconType.genericFile }));\n                            break;\n                    }\n\n                    // `@fluentui/react-file-type-icons` doesn't export icon src.\n                    const iconSrc = (getIcon(iconName)!.code as unknown as JSX.Element).props.src;\n                    return <Icon imageProps={{ crossOrigin: 'anonymous', src: iconSrc }} style={{ width: ICON_SIZE, height: ICON_SIZE }} />;\n                }\n            },\n            {\n                key: 'name',\n                name: 'Name',\n                minWidth: 0,\n                isRowHeader: true,\n                onRender(item: AdbSyncEntry) {\n                    return (\n                        <span className={classNames.name} data-selection-invoke>\n                            {item.name}\n                        </span>\n                    );\n                }\n            },\n            {\n                key: 'permission',\n                name: 'Permission',\n                minWidth: 0,\n                isCollapsible: true,\n                onRender(item: AdbSyncEntry) {\n                    return `${(item.mode >> 6 & 0b100).toString(8)}${(item.mode >> 3 & 0b100).toString(8)}${(item.mode & 0b100).toString(8)}`;\n                }\n            },\n            {\n                key: 'size',\n                name: 'Size',\n                minWidth: 0,\n                isCollapsible: true,\n                onRender(item: AdbSyncEntry) {\n                    if (item.type === LinuxFileType.File) {\n                        return formatSize(Number(item.size));\n                    }\n                    return '';\n                }\n            },\n            {\n                key: 'mtime',\n                name: 'Last Modified Time',\n                minWidth: 150,\n                isCollapsible: true,\n                onRender(item: AdbSyncEntry) {\n                    return new Date(Number(item.mtime) * 1000).toLocaleString();\n                },\n            }\n        ];\n\n        if (GlobalState.device?.features?.includes(AdbFeatures.ListV2)) {\n            list.push(\n                {\n                    key: 'ctime',\n                    name: 'Creation Time',\n                    minWidth: 150,\n                    isCollapsible: true,\n                    onRender(item: AdbSyncEntry) {\n                        return new Date(Number(item.ctime!) * 1000).toLocaleString();\n                    },\n                },\n                {\n                    key: 'atime',\n                    name: 'Last Access Time',\n                    minWidth: 150,\n                    isCollapsible: true,\n                    onRender(item: AdbSyncEntry) {\n                        return new Date(Number(item.atime!) * 1000).toLocaleString();\n                    },\n                },\n            );\n        }\n\n        for (const item of list) {\n            item.onColumnClick = (e, column) => {\n                if (this.sortKey === column.key) {\n                    runInAction(() => this.sortDescending = !this.sortDescending);\n                } else {\n                    runInAction(() => {\n                        this.sortKey = column.key as keyof ListItem;\n                        this.sortDescending = false;\n                    });\n                }\n            };\n\n            if (item.key === this.sortKey) {\n                item.isSorted = true;\n                item.isSortedDescending = this.sortDescending;\n            }\n        }\n\n        return list;\n    }\n\n    constructor() {\n        makeAutoObservable(this, {\n            initial: false,\n            items: observable.shallow,\n            pushPathQuery: false,\n            changeDirectory: action.bound,\n            loadFiles: false,\n        });\n\n        autorun(() => {\n            if (GlobalState.device) {\n                if (this.initial && this.visible) {\n                    this.initial = false;\n                    this.loadFiles();\n                }\n            } else {\n                this.initial = true;\n            }\n        });\n    }\n\n    pushPathQuery = (path: string) => {\n        Router.push({ query: { ...Router.query, path } });\n    };\n\n    changeDirectory(path: string) {\n        if (this.path === path) {\n            return;\n        }\n\n        this.path = path;\n\n        if (!GlobalState.device) {\n            return;\n        }\n\n        this.loadFiles();\n    }\n\n    loadFiles = asyncEffect(async (signal) => {\n        const currentPath = this.path;\n\n        runInAction(() => this.items = []);\n\n        if (!GlobalState.device) {\n            return;\n        }\n\n        runInAction(() => this.loading = true);\n\n        const sync = await GlobalState.device.sync();\n\n        const items: ListItem[] = [];\n        const linkItems: AdbSyncEntry[] = [];\n        const intervalId = setInterval(() => {\n            if (signal.aborted) {\n                return;\n            }\n\n            runInAction(() => this.items = items.slice());\n        }, 1000);\n\n        try {\n            for await (const entry of sync.opendir(currentPath)) {\n                if (signal.aborted) {\n                    return;\n                }\n\n                if (entry.name === '.' || entry.name === '..') {\n                    continue;\n                }\n\n                if (entry.type === LinuxFileType.Link) {\n                    linkItems.push(entry);\n                } else {\n                    items.push(toListItem(entry));\n                }\n            }\n\n            for (const entry of linkItems) {\n                if (signal.aborted) {\n                    return;\n                }\n\n                if (!await sync.isDirectory(path.resolve(currentPath, entry.name!))) {\n                    entry.mode = (LinuxFileType.File << 12) | entry.permission;\n                    entry.size = 0n;\n                }\n\n                items.push(toListItem(entry));\n            }\n\n            if (signal.aborted) {\n                return;\n            }\n\n            runInAction(() => this.items = items);\n        } finally {\n            if (!signal.aborted) {\n                runInAction(() => this.loading = false);\n            }\n            clearInterval(intervalId);\n            sync.dispose();\n        }\n    });\n\n    upload = async (file: File) => {\n        const sync = await GlobalState.device!.sync();\n        try {\n            const itemPath = path.resolve(this.path!, file.name);\n            runInAction(() => {\n                this.uploading = true;\n                this.uploadPath = file.name;\n                this.uploadedSize = 0;\n                this.uploadTotalSize = file.size;\n                this.debouncedUploadedSize = 0;\n                this.uploadSpeed = 0;\n            });\n\n            const intervalId = setInterval(action(() => {\n                this.uploadSpeed = this.uploadedSize - this.debouncedUploadedSize;\n                this.debouncedUploadedSize = this.uploadedSize;\n            }), 1000);\n\n            try {\n                await createFileStream(file)\n                    .pipeThrough(new ChunkStream(ADB_SYNC_MAX_PACKET_SIZE))\n                    .pipeThrough(new ProgressStream(action((uploaded) => {\n                        this.uploadedSize = uploaded;\n                    })))\n                    .pipeTo(sync.write(\n                        itemPath,\n                        (LinuxFileType.File << 12) | 0o666,\n                        file.lastModified / 1000,\n                    ));\n\n                runInAction(() => {\n                    this.uploadSpeed = this.uploadedSize - this.debouncedUploadedSize;\n                    this.debouncedUploadedSize = this.uploadedSize;\n                });\n            } finally {\n                clearInterval(intervalId);\n            }\n        } catch (e: any) {\n            GlobalState.showErrorDialog(e);\n        } finally {\n            sync.dispose();\n            this.loadFiles();\n            runInAction(() => {\n                this.uploading = false;\n            });\n        }\n    };\n}\n\nconst state = new FileManagerState();\n\nconst UploadDialog = observer(() => {\n    return (\n        <Dialog\n            hidden={!state.uploading}\n            dialogContentProps={{\n                title: 'Uploading...',\n                subText: state.uploadPath\n            }}\n        >\n            <ProgressIndicator\n                description={formatSpeed(state.debouncedUploadedSize, state.uploadTotalSize, state.uploadSpeed)}\n                percentComplete={state.uploadedSize / state.uploadTotalSize}\n            />\n        </Dialog>\n    );\n});\n\nconst FileManager: NextPage = (): JSX.Element | null => {\n    useEffect(() => {\n        runInAction(() => {\n            state.visible = true;\n        });\n\n        return () => {\n            runInAction(() => {\n                state.visible = false;\n            });\n        };\n    });\n\n    const router = useRouter();\n    useEffect(() => {\n        let pathQuery = router.query.path;\n        if (!pathQuery) {\n            router.replace({ query: { ...router.query, path: state.path } });\n            return;\n        }\n\n        if (Array.isArray(pathQuery)) {\n            pathQuery = pathQuery[0];\n        }\n\n        state.changeDirectory(pathQuery);\n    }, [router]);\n\n    const [previewUrl, setPreviewUrl] = useState<string | undefined>();\n    const previewImage = useCallback(async (path: string) => {\n        const sync = await GlobalState.device!.sync();\n        try {\n            const readable = sync.read(path);\n            // @ts-ignore ReadableStream definitions are slightly incompatible\n            const response = new Response(readable);\n            const blob = await response.blob();\n            const url = window.URL.createObjectURL(blob);\n            setPreviewUrl(url);\n        } finally {\n            sync.dispose();\n        }\n    }, []);\n    const hidePreview = useCallback(() => {\n        setPreviewUrl(undefined);\n    }, []);\n\n    const handleItemInvoked = useCallback((item: AdbSyncEntry) => {\n        switch (item.type) {\n            case LinuxFileType.Link:\n            case LinuxFileType.Directory:\n                state.pushPathQuery(path.resolve(state.path!, item.name!));\n                break;\n            case LinuxFileType.File:\n                switch (path.extname(item.name!)) {\n                    case '.jpg':\n                    case '.png':\n                    case '.svg':\n                    case '.gif':\n                        previewImage(path.resolve(state.path!, item.name!));\n                        break;\n                }\n                break;\n        }\n    }, [previewImage]);\n\n    const selection = useConst(() => new Selection({\n        onSelectionChanged() {\n            runInAction(() => {\n                state.selectedItems = selection.getSelection() as ListItem[];\n            });\n        },\n    }));\n\n    const showContextMenu = useCallback((\n        item?: AdbSyncEntry,\n        index?: number,\n        e?: Event\n    ) => {\n        if (!e) {\n            return false;\n        }\n\n        if (state.menuItems.length) {\n            runInAction(() => {\n                state.contextMenuTarget = e as MouseEvent;\n            });\n        }\n\n        return false;\n    }, []);\n    const hideContextMenu = useCallback(() => {\n        runInAction(() => state.contextMenuTarget = undefined);\n    }, []);\n\n    return (\n        <Stack {...RouteStackProps}>\n            <Head>\n                <title>File Manager - Android Web Toolbox</title>\n            </Head>\n\n            <CommandBar items={state.menuItems} />\n\n            <Breadcrumb items={state.breadcrumbItems} />\n\n            <StackItem grow styles={{\n                root: {\n                    margin: '-8px -16px -16px -16px',\n                    padding: '8px 16px 16px 16px',\n                    overflowY: 'auto',\n                }\n            }}>\n                <MarqueeSelection selection={selection}>\n                    <ShimmeredDetailsList\n                        items={state.sortedList}\n                        columns={state.columns}\n                        setKey={state.path}\n                        selection={selection}\n                        layoutMode={DetailsListLayoutMode.justified}\n                        enableShimmer={state.loading && state.items.length === 0}\n                        onItemInvoked={handleItemInvoked}\n                        onItemContextMenu={showContextMenu}\n                        onRenderDetailsHeader={renderDetailsHeader}\n                        usePageCache\n                        useReducedRowRenderer\n                    />\n                </MarqueeSelection>\n\n                {previewUrl && (\n                    <Layer>\n                        <Overlay onClick={hidePreview}>\n                            <div style={{ width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n                                {/* eslint-disable-next-line @next/next/no-img-element */}\n                                <img src={previewUrl} alt=\"\" style={{ maxWidth: '100%', maxHeight: '100%' }} />\n                            </div>\n                        </Overlay>\n                    </Layer>\n                )}\n            </StackItem>\n\n            <NoSsr>\n                <ContextualMenu\n                    items={state.menuItems}\n                    hidden={!state.contextMenuTarget}\n                    directionalHint={DirectionalHint.bottomLeftEdge}\n                    target={state.contextMenuTarget}\n                    onDismiss={hideContextMenu}\n                    contextualMenuItemAs={props => <ContextualMenuItem {...props} hasIcons={false} />}\n                />\n            </NoSsr>\n\n            <UploadDialog />\n        </Stack>\n    );\n};\n\nexport default observer(FileManager);\n","(self[\"webpackChunk_N_E\"] = self[\"webpackChunk_N_E\"] || []).push([[941],{\n\n/***/ 7054:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/file-manager\",\n      function () {\n        return __webpack_require__(182);\n      }\n    ]);\n    if(false) {}\n  \n\n/***/ }),\n\n/***/ 182:\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4471);\n/* harmony import */ var _fluentui_style_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3349);\n/* harmony import */ var _fluentui_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(8415);\n/* harmony import */ var _fluentui_react__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(6335);\n/* harmony import */ var _fluentui_react__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(7520);\n/* harmony import */ var _fluentui_react__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(8228);\n/* harmony import */ var _fluentui_react__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(1887);\n/* harmony import */ var _fluentui_react__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(7201);\n/* harmony import */ var _fluentui_react__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(9899);\n/* harmony import */ var _fluentui_react__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(5198);\n/* harmony import */ var _fluentui_react__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(6706);\n/* harmony import */ var _fluentui_react__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(5116);\n/* harmony import */ var _fluentui_react__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(2137);\n/* harmony import */ var _fluentui_react__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(3053);\n/* harmony import */ var _fluentui_react__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(3407);\n/* harmony import */ var _fluentui_react__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(1937);\n/* harmony import */ var _fluentui_react__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(7879);\n/* harmony import */ var _fluentui_react_file_type_icons__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(4906);\n/* harmony import */ var _fluentui_react_file_type_icons__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(7232);\n/* harmony import */ var _fluentui_react_file_type_icons__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(5593);\n/* harmony import */ var _fluentui_react_hooks__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(935);\n/* harmony import */ var _yume_chan_adb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7417);\n/* harmony import */ var _yume_chan_stream_extra__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(6261);\n/* harmony import */ var mobx__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(6323);\n/* harmony import */ var mobx_react_lite__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6779);\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(3591);\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_head__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2314);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(8126);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(3370);\n/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(4347);\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(2344);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(5155);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n(0,_fluentui_react_file_type_icons__WEBPACK_IMPORTED_MODULE_12__/* .initializeFileTypeIcons */ .Mg)();\nfunction toListItem(item) {\n    item.key = item.name;\n    return item;\n}\nconst classNames = (0,_fluentui_style_utilities__WEBPACK_IMPORTED_MODULE_1__/* .mergeStyleSets */ .ZC)({\n    name: {\n        cursor: \"pointer\",\n        \"&:hover\": {\n            textDecoration: \"underline\"\n        }\n    }\n});\nconst renderDetailsHeader = (props, defaultRender)=>{\n    if (!props || !defaultRender) {\n        return null;\n    }\n    return defaultRender({\n        ...props,\n        styles: (0,_fluentui_style_utilities__WEBPACK_IMPORTED_MODULE_1__/* .concatStyleSets */ .E$)(props.styles, {\n            root: {\n                paddingTop: 0\n            }\n        })\n    });\n};\nfunction compareCaseInsensitively(a, b) {\n    let result = a.toLocaleLowerCase().localeCompare(b.toLocaleLowerCase());\n    if (result !== 0) {\n        return result;\n    } else {\n        return a.localeCompare(b);\n    }\n}\nclass FileManagerState {\n    get breadcrumbItems() {\n        let part = \"\";\n        const list = this.path.split(\"/\").filter(Boolean).map((segment)=>{\n            part += \"/\" + segment;\n            return {\n                key: part,\n                text: segment,\n                onClick: (e, item)=>{\n                    if (!item) {\n                        return;\n                    }\n                    this.pushPathQuery(item.key);\n                }\n            };\n        });\n        list.unshift({\n            key: \"/\",\n            text: \"Device\",\n            onClick: ()=>this.pushPathQuery(\"/\")\n        });\n        list[list.length - 1].isCurrentItem = true;\n        delete list[list.length - 1].onClick;\n        return list;\n    }\n    get menuItems() {\n        let result = [];\n        switch(this.selectedItems.length){\n            case 0:\n                result.push({\n                    key: \"upload\",\n                    text: \"Upload\",\n                    iconProps: {\n                        iconName: _utils__WEBPACK_IMPORTED_MODULE_11__/* .Icons.CloudArrowUp */ .PJ.CloudArrowUp,\n                        style: {\n                            height: 20,\n                            fontSize: 20,\n                            lineHeight: 1.5\n                        }\n                    },\n                    disabled: !_state__WEBPACK_IMPORTED_MODULE_10__/* .GlobalState.device */ .q.device,\n                    onClick: ()=>{\n                        (async ()=>{\n                            const files = await (0,_utils__WEBPACK_IMPORTED_MODULE_11__/* .pickFile */ .oT)({\n                                multiple: true\n                            });\n                            for(let i = 0; i < files.length; i++){\n                                const file = files.item(i);\n                                await this.upload(file);\n                            }\n                        })();\n                        return false;\n                    }\n                });\n                break;\n            case 1:\n                if (this.selectedItems[0].type === _yume_chan_adb__WEBPACK_IMPORTED_MODULE_2__/* .LinuxFileType.File */ .d6.File) {\n                    result.push({\n                        key: \"download\",\n                        text: \"Download\",\n                        iconProps: {\n                            iconName: _utils__WEBPACK_IMPORTED_MODULE_11__/* .Icons.CloudArrowDown */ .PJ.CloudArrowDown,\n                            style: {\n                                height: 20,\n                                fontSize: 20,\n                                lineHeight: 1.5\n                            }\n                        },\n                        onClick: ()=>{\n                            (async ()=>{\n                                const sync = await _state__WEBPACK_IMPORTED_MODULE_10__/* .GlobalState.device.sync */ .q.device.sync();\n                                try {\n                                    const item = this.selectedItems[0];\n                                    const itemPath = path__WEBPACK_IMPORTED_MODULE_7___default().resolve(this.path, item.name);\n                                    await sync.read(itemPath).pipeTo((0,_utils__WEBPACK_IMPORTED_MODULE_11__/* .saveFile */ .yH)(item.name, Number(item.size)));\n                                } catch (e) {\n                                    _state__WEBPACK_IMPORTED_MODULE_10__/* .GlobalState.showErrorDialog */ .q.showErrorDialog(e);\n                                } finally{\n                                    sync.dispose();\n                                }\n                            })();\n                            return false;\n                        }\n                    });\n                }\n            // fall through\n            default:\n                result.push({\n                    key: \"delete\",\n                    text: \"Delete\",\n                    iconProps: {\n                        iconName: _utils__WEBPACK_IMPORTED_MODULE_11__/* .Icons.Delete */ .PJ.Delete,\n                        style: {\n                            height: 20,\n                            fontSize: 20,\n                            lineHeight: 1.5\n                        }\n                    },\n                    onClick: ()=>{\n                        (async ()=>{\n                            try {\n                                for (const item of this.selectedItems){\n                                    const output = await _state__WEBPACK_IMPORTED_MODULE_10__/* .GlobalState.device.rm */ .q.device.rm(path__WEBPACK_IMPORTED_MODULE_7___default().resolve(this.path, item.name));\n                                    if (output) {\n                                        _state__WEBPACK_IMPORTED_MODULE_10__/* .GlobalState.showErrorDialog */ .q.showErrorDialog(output);\n                                        return;\n                                    }\n                                }\n                            } catch (e) {\n                                _state__WEBPACK_IMPORTED_MODULE_10__/* .GlobalState.showErrorDialog */ .q.showErrorDialog(e);\n                            } finally{\n                                this.loadFiles();\n                            }\n                        })();\n                        return false;\n                    }\n                });\n                break;\n        }\n        return result;\n    }\n    get sortedList() {\n        const list = this.items.slice();\n        list.sort((a, b)=>{\n            const aIsFile = a.type === _yume_chan_adb__WEBPACK_IMPORTED_MODULE_2__/* .LinuxFileType.File */ .d6.File ? 1 : 0;\n            const bIsFile = b.type === _yume_chan_adb__WEBPACK_IMPORTED_MODULE_2__/* .LinuxFileType.File */ .d6.File ? 1 : 0;\n            let result;\n            if (aIsFile !== bIsFile) {\n                result = aIsFile - bIsFile;\n            } else {\n                const aSortKey = a[this.sortKey];\n                const bSortKey = b[this.sortKey];\n                if (aSortKey === bSortKey) {\n                    result = compareCaseInsensitively(a.name, b.name);\n                } else if (typeof aSortKey === \"string\") {\n                    result = compareCaseInsensitively(aSortKey, bSortKey);\n                } else {\n                    result = aSortKey < bSortKey ? -1 : 1;\n                }\n            }\n            if (this.sortDescending) {\n                result *= -1;\n            }\n            return result;\n        });\n        return list;\n    }\n    get columns() {\n        var ref, ref1;\n        const ICON_SIZE = 20;\n        const list = [\n            {\n                key: \"type\",\n                name: \"File Type\",\n                iconName: _utils__WEBPACK_IMPORTED_MODULE_11__/* .Icons.Document20 */ .PJ.Document20,\n                isIconOnly: true,\n                minWidth: ICON_SIZE,\n                maxWidth: ICON_SIZE,\n                isCollapsible: true,\n                onRender (item) {\n                    let iconName;\n                    switch(item.type){\n                        case _yume_chan_adb__WEBPACK_IMPORTED_MODULE_2__/* .LinuxFileType.Link */ .d6.Link:\n                            // larger sizes of `linkedFolder` icon now have a person symbol on it,\n                            // We want to use it for symbolic links, so use the 16px version\n                            // cspell:disable-next-line\n                            iconName = \"linkedfolder16_svg\";\n                            break;\n                        case _yume_chan_adb__WEBPACK_IMPORTED_MODULE_2__/* .LinuxFileType.Directory */ .d6.Directory:\n                            ({ iconName  } = (0,_fluentui_react_file_type_icons__WEBPACK_IMPORTED_MODULE_13__/* .getFileTypeIconProps */ .EX)({\n                                type: _fluentui_react_file_type_icons__WEBPACK_IMPORTED_MODULE_14__/* .FileIconType.folder */ .I.folder\n                            }));\n                            break;\n                        case _yume_chan_adb__WEBPACK_IMPORTED_MODULE_2__/* .LinuxFileType.File */ .d6.File:\n                            ({ iconName  } = (0,_fluentui_react_file_type_icons__WEBPACK_IMPORTED_MODULE_13__/* .getFileTypeIconProps */ .EX)({\n                                extension: path__WEBPACK_IMPORTED_MODULE_7___default().extname(item.name)\n                            }));\n                            break;\n                        default:\n                            ({ iconName  } = (0,_fluentui_react_file_type_icons__WEBPACK_IMPORTED_MODULE_13__/* .getFileTypeIconProps */ .EX)({\n                                type: _fluentui_react_file_type_icons__WEBPACK_IMPORTED_MODULE_14__/* .FileIconType.genericFile */ .I.genericFile\n                            }));\n                            break;\n                    }\n                    // `@fluentui/react-file-type-icons` doesn't export icon src.\n                    const iconSrc = (0,_fluentui_style_utilities__WEBPACK_IMPORTED_MODULE_1__/* .getIcon */ .q7)(iconName).code.props.src;\n                    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_15__/* .Icon */ .J, {\n                        imageProps: {\n                            crossOrigin: \"anonymous\",\n                            src: iconSrc\n                        },\n                        style: {\n                            width: ICON_SIZE,\n                            height: ICON_SIZE\n                        }\n                    });\n                }\n            },\n            {\n                key: \"name\",\n                name: \"Name\",\n                minWidth: 0,\n                isRowHeader: true,\n                onRender (item) {\n                    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", {\n                        className: classNames.name,\n                        \"data-selection-invoke\": true,\n                        children: item.name\n                    });\n                }\n            },\n            {\n                key: \"permission\",\n                name: \"Permission\",\n                minWidth: 0,\n                isCollapsible: true,\n                onRender (item) {\n                    return \"\".concat((item.mode >> 6 & 4).toString(8)).concat((item.mode >> 3 & 4).toString(8)).concat((item.mode & 4).toString(8));\n                }\n            },\n            {\n                key: \"size\",\n                name: \"Size\",\n                minWidth: 0,\n                isCollapsible: true,\n                onRender (item) {\n                    if (item.type === _yume_chan_adb__WEBPACK_IMPORTED_MODULE_2__/* .LinuxFileType.File */ .d6.File) {\n                        return (0,_utils__WEBPACK_IMPORTED_MODULE_11__/* .formatSize */ .BU)(Number(item.size));\n                    }\n                    return \"\";\n                }\n            },\n            {\n                key: \"mtime\",\n                name: \"Last Modified Time\",\n                minWidth: 150,\n                isCollapsible: true,\n                onRender (item) {\n                    return new Date(Number(item.mtime) * 1000).toLocaleString();\n                }\n            }\n        ];\n        if ((ref = _state__WEBPACK_IMPORTED_MODULE_10__/* .GlobalState.device */ .q.device) === null || ref === void 0 ? void 0 : (ref1 = ref.features) === null || ref1 === void 0 ? void 0 : ref1.includes(_yume_chan_adb__WEBPACK_IMPORTED_MODULE_2__/* .AdbFeatures.ListV2 */ .Pq.ListV2)) {\n            list.push({\n                key: \"ctime\",\n                name: \"Creation Time\",\n                minWidth: 150,\n                isCollapsible: true,\n                onRender (item) {\n                    return new Date(Number(item.ctime) * 1000).toLocaleString();\n                }\n            }, {\n                key: \"atime\",\n                name: \"Last Access Time\",\n                minWidth: 150,\n                isCollapsible: true,\n                onRender (item) {\n                    return new Date(Number(item.atime) * 1000).toLocaleString();\n                }\n            });\n        }\n        for (const item of list){\n            item.onColumnClick = (e, column)=>{\n                if (this.sortKey === column.key) {\n                    (0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .runInAction */ .z)(()=>this.sortDescending = !this.sortDescending);\n                } else {\n                    (0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .runInAction */ .z)(()=>{\n                        this.sortKey = column.key;\n                        this.sortDescending = false;\n                    });\n                }\n            };\n            if (item.key === this.sortKey) {\n                item.isSorted = true;\n                item.isSortedDescending = this.sortDescending;\n            }\n        }\n        return list;\n    }\n    changeDirectory(path) {\n        if (this.path === path) {\n            return;\n        }\n        this.path = path;\n        if (!_state__WEBPACK_IMPORTED_MODULE_10__/* .GlobalState.device */ .q.device) {\n            return;\n        }\n        this.loadFiles();\n    }\n    constructor(){\n        this.initial = true;\n        this.visible = false;\n        this.path = \"/\";\n        this.loading = false;\n        this.items = [];\n        this.sortKey = \"name\";\n        this.sortDescending = false;\n        this.uploading = false;\n        this.uploadPath = undefined;\n        this.uploadedSize = 0;\n        this.uploadTotalSize = 0;\n        this.debouncedUploadedSize = 0;\n        this.uploadSpeed = 0;\n        this.selectedItems = [];\n        this.contextMenuTarget = undefined;\n        this.pushPathQuery = (path)=>{\n            next_router__WEBPACK_IMPORTED_MODULE_6___default().push({\n                query: {\n                    ...(next_router__WEBPACK_IMPORTED_MODULE_6___default().query),\n                    path\n                }\n            });\n        };\n        this.loadFiles = (0,_utils__WEBPACK_IMPORTED_MODULE_11__/* .asyncEffect */ .FW)(async (signal)=>{\n            const currentPath = this.path;\n            (0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .runInAction */ .z)(()=>this.items = []);\n            if (!_state__WEBPACK_IMPORTED_MODULE_10__/* .GlobalState.device */ .q.device) {\n                return;\n            }\n            (0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .runInAction */ .z)(()=>this.loading = true);\n            const sync = await _state__WEBPACK_IMPORTED_MODULE_10__/* .GlobalState.device.sync */ .q.device.sync();\n            const items = [];\n            const linkItems = [];\n            const intervalId = setInterval(()=>{\n                if (signal.aborted) {\n                    return;\n                }\n                (0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .runInAction */ .z)(()=>this.items = items.slice());\n            }, 1000);\n            try {\n                for await (const entry of sync.opendir(currentPath)){\n                    if (signal.aborted) {\n                        return;\n                    }\n                    if (entry.name === \".\" || entry.name === \"..\") {\n                        continue;\n                    }\n                    if (entry.type === _yume_chan_adb__WEBPACK_IMPORTED_MODULE_2__/* .LinuxFileType.Link */ .d6.Link) {\n                        linkItems.push(entry);\n                    } else {\n                        items.push(toListItem(entry));\n                    }\n                }\n                for (const entry1 of linkItems){\n                    if (signal.aborted) {\n                        return;\n                    }\n                    if (!await sync.isDirectory(path__WEBPACK_IMPORTED_MODULE_7___default().resolve(currentPath, entry1.name))) {\n                        entry1.mode = _yume_chan_adb__WEBPACK_IMPORTED_MODULE_2__/* .LinuxFileType.File */ .d6.File << 12 | entry1.permission;\n                        entry1.size = 0n;\n                    }\n                    items.push(toListItem(entry1));\n                }\n                if (signal.aborted) {\n                    return;\n                }\n                (0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .runInAction */ .z)(()=>this.items = items);\n            } finally{\n                if (!signal.aborted) {\n                    (0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .runInAction */ .z)(()=>this.loading = false);\n                }\n                clearInterval(intervalId);\n                sync.dispose();\n            }\n        });\n        this.upload = async (file)=>{\n            const sync = await _state__WEBPACK_IMPORTED_MODULE_10__/* .GlobalState.device.sync */ .q.device.sync();\n            try {\n                const itemPath = path__WEBPACK_IMPORTED_MODULE_7___default().resolve(this.path, file.name);\n                (0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .runInAction */ .z)(()=>{\n                    this.uploading = true;\n                    this.uploadPath = file.name;\n                    this.uploadedSize = 0;\n                    this.uploadTotalSize = file.size;\n                    this.debouncedUploadedSize = 0;\n                    this.uploadSpeed = 0;\n                });\n                const intervalId = setInterval((0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .action */ .aD)(()=>{\n                    this.uploadSpeed = this.uploadedSize - this.debouncedUploadedSize;\n                    this.debouncedUploadedSize = this.uploadedSize;\n                }), 1000);\n                try {\n                    await (0,_utils__WEBPACK_IMPORTED_MODULE_11__/* .createFileStream */ .Xd)(file).pipeThrough(new _yume_chan_stream_extra__WEBPACK_IMPORTED_MODULE_3__/* .ChunkStream */ .Cc(_yume_chan_adb__WEBPACK_IMPORTED_MODULE_2__/* .ADB_SYNC_MAX_PACKET_SIZE */ .j4)).pipeThrough(new _utils__WEBPACK_IMPORTED_MODULE_11__/* .ProgressStream */ .hK((0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .action */ .aD)((uploaded)=>{\n                        this.uploadedSize = uploaded;\n                    }))).pipeTo(sync.write(itemPath, _yume_chan_adb__WEBPACK_IMPORTED_MODULE_2__/* .LinuxFileType.File */ .d6.File << 12 | 438, file.lastModified / 1000));\n                    (0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .runInAction */ .z)(()=>{\n                        this.uploadSpeed = this.uploadedSize - this.debouncedUploadedSize;\n                        this.debouncedUploadedSize = this.uploadedSize;\n                    });\n                } finally{\n                    clearInterval(intervalId);\n                }\n            } catch (e) {\n                _state__WEBPACK_IMPORTED_MODULE_10__/* .GlobalState.showErrorDialog */ .q.showErrorDialog(e);\n            } finally{\n                sync.dispose();\n                this.loadFiles();\n                (0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .runInAction */ .z)(()=>{\n                    this.uploading = false;\n                });\n            }\n        };\n        (0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .makeAutoObservable */ .ky)(this, {\n            initial: false,\n            items: mobx__WEBPACK_IMPORTED_MODULE_16__/* .observable.shallow */ .LO.shallow,\n            pushPathQuery: false,\n            changeDirectory: mobx__WEBPACK_IMPORTED_MODULE_16__/* .action.bound */ .aD.bound,\n            loadFiles: false\n        });\n        (0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .autorun */ .EH)(()=>{\n            if (_state__WEBPACK_IMPORTED_MODULE_10__/* .GlobalState.device */ .q.device) {\n                if (this.initial && this.visible) {\n                    this.initial = false;\n                    this.loadFiles();\n                }\n            } else {\n                this.initial = true;\n            }\n        });\n    }\n}\nconst state = new FileManagerState();\nconst UploadDialog = (0,mobx_react_lite__WEBPACK_IMPORTED_MODULE_4__/* .observer */ .Pi)(()=>{\n    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_17__/* .Dialog */ .V, {\n        hidden: !state.uploading,\n        dialogContentProps: {\n            title: \"Uploading...\",\n            subText: state.uploadPath\n        },\n        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_18__/* .ProgressIndicator */ .Y, {\n            description: (0,_utils__WEBPACK_IMPORTED_MODULE_11__/* .formatSpeed */ .CY)(state.debouncedUploadedSize, state.uploadTotalSize, state.uploadSpeed),\n            percentComplete: state.uploadedSize / state.uploadTotalSize\n        })\n    });\n});\nconst FileManager = ()=>{\n    (0,react__WEBPACK_IMPORTED_MODULE_8__.useEffect)(()=>{\n        (0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .runInAction */ .z)(()=>{\n            state.visible = true;\n        });\n        return ()=>{\n            (0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .runInAction */ .z)(()=>{\n                state.visible = false;\n            });\n        };\n    });\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_6__.useRouter)();\n    (0,react__WEBPACK_IMPORTED_MODULE_8__.useEffect)(()=>{\n        let pathQuery = router.query.path;\n        if (!pathQuery) {\n            router.replace({\n                query: {\n                    ...router.query,\n                    path: state.path\n                }\n            });\n            return;\n        }\n        if (Array.isArray(pathQuery)) {\n            pathQuery = pathQuery[0];\n        }\n        state.changeDirectory(pathQuery);\n    }, [\n        router\n    ]);\n    const [previewUrl, setPreviewUrl] = (0,react__WEBPACK_IMPORTED_MODULE_8__.useState)();\n    const previewImage = (0,react__WEBPACK_IMPORTED_MODULE_8__.useCallback)(async (path)=>{\n        const sync = await _state__WEBPACK_IMPORTED_MODULE_10__/* .GlobalState.device.sync */ .q.device.sync();\n        try {\n            const readable = sync.read(path);\n            // @ts-ignore ReadableStream definitions are slightly incompatible\n            const response = new Response(readable);\n            const blob = await response.blob();\n            const url = window.URL.createObjectURL(blob);\n            setPreviewUrl(url);\n        } finally{\n            sync.dispose();\n        }\n    }, []);\n    const hidePreview = (0,react__WEBPACK_IMPORTED_MODULE_8__.useCallback)(()=>{\n        setPreviewUrl(undefined);\n    }, []);\n    const handleItemInvoked = (0,react__WEBPACK_IMPORTED_MODULE_8__.useCallback)((item)=>{\n        switch(item.type){\n            case _yume_chan_adb__WEBPACK_IMPORTED_MODULE_2__/* .LinuxFileType.Link */ .d6.Link:\n            case _yume_chan_adb__WEBPACK_IMPORTED_MODULE_2__/* .LinuxFileType.Directory */ .d6.Directory:\n                state.pushPathQuery(path__WEBPACK_IMPORTED_MODULE_7___default().resolve(state.path, item.name));\n                break;\n            case _yume_chan_adb__WEBPACK_IMPORTED_MODULE_2__/* .LinuxFileType.File */ .d6.File:\n                switch(path__WEBPACK_IMPORTED_MODULE_7___default().extname(item.name)){\n                    case \".jpg\":\n                    case \".png\":\n                    case \".svg\":\n                    case \".gif\":\n                        previewImage(path__WEBPACK_IMPORTED_MODULE_7___default().resolve(state.path, item.name));\n                        break;\n                }\n                break;\n        }\n    }, [\n        previewImage\n    ]);\n    const selection = (0,_fluentui_react_hooks__WEBPACK_IMPORTED_MODULE_19__/* .useConst */ .B)(()=>new _fluentui_react__WEBPACK_IMPORTED_MODULE_20__/* .Selection */ .Y({\n            onSelectionChanged () {\n                (0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .runInAction */ .z)(()=>{\n                    state.selectedItems = selection.getSelection();\n                });\n            }\n        }));\n    const showContextMenu = (0,react__WEBPACK_IMPORTED_MODULE_8__.useCallback)((item, index, e)=>{\n        if (!e) {\n            return false;\n        }\n        if (state.menuItems.length) {\n            (0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .runInAction */ .z)(()=>{\n                state.contextMenuTarget = e;\n            });\n        }\n        return false;\n    }, []);\n    const hideContextMenu = (0,react__WEBPACK_IMPORTED_MODULE_8__.useCallback)(()=>{\n        (0,mobx__WEBPACK_IMPORTED_MODULE_16__/* .runInAction */ .z)(()=>state.contextMenuTarget = undefined);\n    }, []);\n    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_fluentui_react__WEBPACK_IMPORTED_MODULE_21__/* .Stack */ .K, {\n        ..._utils__WEBPACK_IMPORTED_MODULE_11__/* .RouteStackProps */ .LE,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)((next_head__WEBPACK_IMPORTED_MODULE_5___default()), {\n                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"title\", {\n                    children: \"File Manager - Android Web Toolbox\"\n                })\n            }),\n            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components__WEBPACK_IMPORTED_MODULE_9__/* .CommandBar */ .X3, {\n                items: state.menuItems\n            }),\n            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_22__/* .Breadcrumb */ .a, {\n                items: state.breadcrumbItems\n            }),\n            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_fluentui_react__WEBPACK_IMPORTED_MODULE_23__/* .StackItem */ .v, {\n                grow: true,\n                styles: {\n                    root: {\n                        margin: \"-8px -16px -16px -16px\",\n                        padding: \"8px 16px 16px 16px\",\n                        overflowY: \"auto\"\n                    }\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_24__/* .MarqueeSelection */ .x, {\n                        selection: selection,\n                        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_25__/* .ShimmeredDetailsList */ .J, {\n                            items: state.sortedList,\n                            columns: state.columns,\n                            setKey: state.path,\n                            selection: selection,\n                            layoutMode: _fluentui_react__WEBPACK_IMPORTED_MODULE_26__/* .DetailsListLayoutMode.justified */ .Oh.justified,\n                            enableShimmer: state.loading && state.items.length === 0,\n                            onItemInvoked: handleItemInvoked,\n                            onItemContextMenu: showContextMenu,\n                            onRenderDetailsHeader: renderDetailsHeader,\n                            usePageCache: true,\n                            useReducedRowRenderer: true\n                        })\n                    }),\n                    previewUrl && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_27__/* .Layer */ .m, {\n                        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_28__/* .Overlay */ .a, {\n                            onClick: hidePreview,\n                            children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                                style: {\n                                    width: \"100%\",\n                                    height: \"100%\",\n                                    display: \"flex\",\n                                    alignItems: \"center\",\n                                    justifyContent: \"center\"\n                                },\n                                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"img\", {\n                                    src: previewUrl,\n                                    alt: \"\",\n                                    style: {\n                                        maxWidth: \"100%\",\n                                        maxHeight: \"100%\"\n                                    }\n                                })\n                            })\n                        })\n                    })\n                ]\n            }),\n            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components__WEBPACK_IMPORTED_MODULE_9__/* .NoSsr */ .ag, {\n                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_29__/* .ContextualMenu */ .r, {\n                    items: state.menuItems,\n                    hidden: !state.contextMenuTarget,\n                    directionalHint: _fluentui_react__WEBPACK_IMPORTED_MODULE_30__/* .DirectionalHint.bottomLeftEdge */ .b.bottomLeftEdge,\n                    target: state.contextMenuTarget,\n                    onDismiss: hideContextMenu,\n                    contextualMenuItemAs: (props)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_31__/* .ContextualMenuItem */ .W, {\n                            ...props,\n                            hasIcons: false\n                        })\n                })\n            }),\n            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(UploadDialog, {})\n        ]\n    });\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = ((0,mobx_react_lite__WEBPACK_IMPORTED_MODULE_4__/* .observer */ .Pi)(FileManager));\n\n\n/***/ })\n\n},\n/******/ function(__webpack_require__) { // webpackRuntimeModules\n/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }\n/******/ __webpack_require__.O(0, [878,774,888,179], function() { return __webpack_exec__(7054); });\n/******/ var __webpack_exports__ = __webpack_require__.O();\n/******/ _N_E = __webpack_exports__;\n/******/ }\n]);"],"names":["self","push","__unused_webpack_module","__unused_webpack_exports","__webpack_require__","window","__NEXT_P","__webpack_exports__","r","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","_fluentui_style_utilities__WEBPACK_IMPORTED_MODULE_1__","_fluentui_react__WEBPACK_IMPORTED_MODULE_15__","_fluentui_react__WEBPACK_IMPORTED_MODULE_17__","_fluentui_react__WEBPACK_IMPORTED_MODULE_18__","_fluentui_react__WEBPACK_IMPORTED_MODULE_20__","_fluentui_react__WEBPACK_IMPORTED_MODULE_21__","_fluentui_react__WEBPACK_IMPORTED_MODULE_22__","_fluentui_react__WEBPACK_IMPORTED_MODULE_23__","_fluentui_react__WEBPACK_IMPORTED_MODULE_24__","_fluentui_react__WEBPACK_IMPORTED_MODULE_25__","_fluentui_react__WEBPACK_IMPORTED_MODULE_26__","_fluentui_react__WEBPACK_IMPORTED_MODULE_27__","_fluentui_react__WEBPACK_IMPORTED_MODULE_28__","_fluentui_react__WEBPACK_IMPORTED_MODULE_29__","_fluentui_react__WEBPACK_IMPORTED_MODULE_30__","_fluentui_react__WEBPACK_IMPORTED_MODULE_31__","_fluentui_react_file_type_icons__WEBPACK_IMPORTED_MODULE_12__","_fluentui_react_file_type_icons__WEBPACK_IMPORTED_MODULE_13__","_fluentui_react_file_type_icons__WEBPACK_IMPORTED_MODULE_14__","_fluentui_react_hooks__WEBPACK_IMPORTED_MODULE_19__","_yume_chan_adb__WEBPACK_IMPORTED_MODULE_2__","_yume_chan_stream_extra__WEBPACK_IMPORTED_MODULE_3__","mobx__WEBPACK_IMPORTED_MODULE_16__","mobx_react_lite__WEBPACK_IMPORTED_MODULE_4__","next_head__WEBPACK_IMPORTED_MODULE_5__","next_head__WEBPACK_IMPORTED_MODULE_5___default","n","next_router__WEBPACK_IMPORTED_MODULE_6__","next_router__WEBPACK_IMPORTED_MODULE_6___default","path__WEBPACK_IMPORTED_MODULE_7__","path__WEBPACK_IMPORTED_MODULE_7___default","react__WEBPACK_IMPORTED_MODULE_8__","_components__WEBPACK_IMPORTED_MODULE_9__","_state__WEBPACK_IMPORTED_MODULE_10__","_utils__WEBPACK_IMPORTED_MODULE_11__","toListItem","item","key","name","Mg","classNames","ZC","cursor","textDecoration","renderDetailsHeader","props","defaultRender","styles","E$","root","paddingTop","compareCaseInsensitively","a","b","result","toLocaleLowerCase","localeCompare","state","breadcrumbItems","part","list","path","split","filter","Boolean","map","segment","text","onClick","e","pushPathQuery","unshift","length","isCurrentItem","menuItems","selectedItems","iconProps","iconName","PJ","CloudArrowUp","style","height","fontSize","lineHeight","disabled","q","device","files","oT","multiple","i","file","upload","type","d6","File","CloudArrowDown","sync","itemPath","resolve","read","pipeTo","yH","Number","size","showErrorDialog","dispose","Delete","output","rm","loadFiles","sortedList","items","slice","sort","aIsFile","bIsFile","aSortKey","sortKey","bSortKey","sortDescending","columns","ref","ref1","Document20","isIconOnly","minWidth","maxWidth","isCollapsible","onRender","Link","Directory","EX","I","folder","extension","extname","genericFile","iconSrc","q7","code","src","jsx","J","imageProps","crossOrigin","width","isRowHeader","className","children","concat","mode","toString","BU","Date","mtime","toLocaleString","features","includes","Pq","ListV2","ctime","atime","onColumnClick","column","z","isSorted","isSortedDescending","changeDirectory","constructor","initial","visible","loading","uploading","uploadPath","undefined","uploadedSize","uploadTotalSize","debouncedUploadedSize","uploadSpeed","contextMenuTarget","query","FW","signal","currentPath","linkItems","intervalId","setInterval","aborted","entry","opendir","entry1","isDirectory","permission","clearInterval","aD","Xd","pipeThrough","Cc","j4","hK","uploaded","write","lastModified","ky","LO","shallow","bound","EH","UploadDialog","Pi","V","hidden","dialogContentProps","title","subText","Y","description","CY","percentComplete","FileManager","useEffect","router","useRouter","pathQuery","replace","isArray","previewUrl","setPreviewUrl","useState","previewImage","useCallback","readable","response","Response","blob","url","URL","createObjectURL","hidePreview","handleItemInvoked","selection","B","onSelectionChanged","getSelection","showContextMenu","index","hideContextMenu","jsxs","K","LE","X3","v","grow","margin","padding","overflowY","x","setKey","layoutMode","Oh","justified","enableShimmer","onItemInvoked","onItemContextMenu","onRenderDetailsHeader","usePageCache","useReducedRowRenderer","m","display","alignItems","justifyContent","alt","maxHeight","ag","directionalHint","bottomLeftEdge","target","onDismiss","contextualMenuItemAs","W","hasIcons","O","s","_N_E"],"sourceRoot":""}