(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[390],{8722:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/framebuffer",function(){return __webpack_require__(7395)}])},7395:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4471),_fluentui_react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1887),mobx__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(6323),mobx_react_lite__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6779),next_head__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3591),next_head__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(next_head__WEBPACK_IMPORTED_MODULE_2__),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3370),_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4347),_state__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2344),_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5155);let state=new class{setImage(image){this.width=image.width,this.height=image.height,this.imageData=new ImageData(new Uint8ClampedArray(image.data),image.width,image.height)}toggleDemoModeVisible(){this.demoModeVisible=!this.demoModeVisible}constructor(){this.width=0,this.height=0,this.imageData=void 0,this.demoModeVisible=!1,(0,mobx__WEBPACK_IMPORTED_MODULE_7__.ky)(this,{toggleDemoModeVisible:mobx__WEBPACK_IMPORTED_MODULE_7__.aD.bound})}},FrameBuffer=()=>{let canvasRef=(0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null),capture=(0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(async()=>{if(_state__WEBPACK_IMPORTED_MODULE_5__.q.device)try{let framebuffer=await _state__WEBPACK_IMPORTED_MODULE_5__.q.device.framebuffer();state.setImage(framebuffer)}catch(e){_state__WEBPACK_IMPORTED_MODULE_5__.q.showErrorDialog(e)}},[]);(0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>(0,mobx__WEBPACK_IMPORTED_MODULE_7__.EH)(()=>{let canvas=canvasRef.current;if(canvas&&state.imageData){canvas.width=state.width,canvas.height=state.height;let context=canvas.getContext("2d");context.putImageData(state.imageData,0,0)}}),[]);let commandBarItems=(0,mobx__WEBPACK_IMPORTED_MODULE_7__.Fl)(()=>[{key:"start",disabled:!_state__WEBPACK_IMPORTED_MODULE_5__.q.device,iconProps:{iconName:_utils__WEBPACK_IMPORTED_MODULE_6__.PJ.Camera,style:{height:20,fontSize:20,lineHeight:1.5}},text:"Capture",onClick:capture},{key:"Save",disabled:!state.imageData,iconProps:{iconName:_utils__WEBPACK_IMPORTED_MODULE_6__.PJ.Save,style:{height:20,fontSize:20,lineHeight:1.5}},text:"Save",onClick(){let canvas=canvasRef.current;if(!canvas)return;let url=canvas.toDataURL(),a=document.createElement("a");a.href=url,a.download="Screenshot of ".concat(_state__WEBPACK_IMPORTED_MODULE_5__.q.backend.name,".png"),a.click()}}]),commandBarFarItems=(0,mobx__WEBPACK_IMPORTED_MODULE_7__.Fl)(()=>[{key:"DemoMode",iconProps:{iconName:_utils__WEBPACK_IMPORTED_MODULE_6__.PJ.Wand,style:{height:20,fontSize:20,lineHeight:1.5}},checked:state.demoModeVisible,text:"Demo Mode",onClick:state.toggleDemoModeVisible},{key:"info",iconProps:{iconName:_utils__WEBPACK_IMPORTED_MODULE_6__.PJ.Info,style:{height:20,fontSize:20,lineHeight:1.5}},iconOnly:!0,tooltipHostProps:{content:"Use ADB FrameBuffer command to capture a full-size, high-resolution screenshot.",calloutProps:{calloutMaxWidth:250}}}]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_fluentui_react__WEBPACK_IMPORTED_MODULE_8__.K,{..._utils__WEBPACK_IMPORTED_MODULE_6__.LE,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_head__WEBPACK_IMPORTED_MODULE_2___default(),{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("title",{children:"Screen Capture - Android Web Toolbox"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components__WEBPACK_IMPORTED_MODULE_4__.X3,{items:commandBarItems.get(),farItems:commandBarFarItems.get()}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_fluentui_react__WEBPACK_IMPORTED_MODULE_8__.K,{horizontal:!0,grow:!0,styles:{root:{height:0}},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components__WEBPACK_IMPORTED_MODULE_4__.wM,{width:state.width,height:state.height,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("canvas",{ref:canvasRef,style:{display:"block"}})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components__WEBPACK_IMPORTED_MODULE_4__.bq,{style:{display:state.demoModeVisible?"block":"none"}})]})]})};__webpack_exports__.default=(0,mobx_react_lite__WEBPACK_IMPORTED_MODULE_1__.Pi)(FrameBuffer)}},function(__webpack_require__){__webpack_require__.O(0,[774,888,179],function(){return __webpack_require__(__webpack_require__.s=8722)}),_N_E=__webpack_require__.O()}]);
//# sourceMappingURL=framebuffer-b17f9e6be035b23e.js.map